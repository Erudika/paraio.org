<!DOCTYPE html>
<!--
     ____  ___ _ ____ ___ _
    / __ \/ __` / ___/ __` /
   / /_/ / /_/ / /  / /_/ /
  / .___/\__,_/_/   \__,_/ io.org
 /_/

-->
<html lang="en-us" class="no-js">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Para - Documentation</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="google-site-verification" content="YXojLKu08NjIbC9uXuTBV-TmbaEHNGjyqaFcCzVyD-U">
		<meta property="og:image" content="https://paraio.org/apple-touch-icon-precomposed.png">
		<link rel="image_src" href="https://paraio.org/apple-touch-icon-precomposed.png">
		<link rel="canonical" href="https://paraio.org">

			<!-- Bootswatch Theme CSS -->
			<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css" rel="stylesheet">
		<link href="https://cdn.rawgit.com/konpa/devicon/89f2f44ba07ea3fff7e561c2142813b278c2d6c6/devicon.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,700">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
		<link href="/css/main.css?v=5" rel="stylesheet" id="theme">
		<noscript><style>.wrapper {	display: block; }</style></noscript>
	</head>
	<body>
		<!-- Main Content -->
		<div class="wrapper">
			

<!-- Sidebar Holder -->
<nav id="sidebar">
	<div class="sidebar-header">
		<a href="#" id="dismiss">
			<i class="glyphicon glyphicon-remove"></i>
		</a>
		<a class="navbar-brand" href="/">
			<img src="/img/logo.svg" id="logo" width="171" height="89" alt="logo" class="img-responsive">
		</a>
	</div>

	<ul class="list-unstyled components">
				<li><a href="#001-intro" class="docs-category">Introduction</a></li>

			<li>
				<a href="#Getting-Started" class="docs-category" data-toggle="collapse" aria-expanded="false">Getting Started</a>
				<ul id="Getting-Started" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#002-standalone">Standalone mode</a></li>
							<li class=""><a href="#003-maven">Maven</a></li>
							<li class=""><a href="#004-paraobject">The ParaObject interface</a></li>
				</ul>
			</li>
			<li>
				<a href="#Configuration" class="docs-category" data-toggle="collapse" aria-expanded="false">Configuration</a>
				<ul id="Configuration" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#005-config">The Config</a></li>
							<li class=""><a href="#006-modules">Modules</a></li>
							<li class=""><a href="#007-env">Environment</a></li>
							<li class=""><a href="#008-plugins">Plugins</a></li>
				</ul>
			</li>
			<li>
				<a href="#Core-classes" class="docs-category" data-toggle="collapse" aria-expanded="false">Core classes</a>
				<ul id="Core-classes" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#009-core">Core classes</a></li>
							<li class=""><a href="#010-serialization">Serialization</a></li>
							<li class=""><a href="#010-userdefined">User-defined classes</a></li>
							<li class=""><a href="#011-apps">Apps</a></li>
							<li class=""><a href="#011-permissions">Resource permissions</a></li>
							<li class=""><a href="#011-validations">Validations</a></li>
							<li class=""><a href="#011-webhooks">Webhooks</a></li>
				</ul>
			</li>
			<li>
				<a href="#Persistence" class="docs-category" data-toggle="collapse" aria-expanded="false">Persistence</a>
				<ul id="Persistence" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#012-dao">DAO interface</a></li>
							<li class=""><a href="#013-cassandra">Cassandra</a></li>
							<li class=""><a href="#013-dynamodb">DynamoDB</a></li>
							<li class=""><a href="#013-mongodb">MongoDB</a></li>
							<li class=""><a href="#013-sql">Generic SQL</a></li>
							<li class=""><a href="#014-h2">H2 DB</a></li>
				</ul>
			</li>
			<li>
				<a href="#Search" class="docs-category" data-toggle="collapse" aria-expanded="false">Search</a>
				<ul id="Search" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#015-search">Search interface</a></li>
							<li class=""><a href="#016-elasticsearch">Elasticsearch</a></li>
							<li class=""><a href="#016-lucene">Lucene</a></li>
				</ul>
			</li>
			<li>
				<a href="#Cache" class="docs-category" data-toggle="collapse" aria-expanded="false">Cache</a>
				<ul id="Cache" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#017-cache">Cache interface</a></li>
							<li class=""><a href="#018-caffeine">Caffeine</a></li>
							<li class=""><a href="#018-hazelcast">Hazelcast</a></li>
				</ul>
			</li>
			<li>
				<a href="#Linked-objects" class="docs-category" data-toggle="collapse" aria-expanded="false">Linked objects</a>
				<ul id="Linked-objects" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#019-one-to-many">One-to-many</a></li>
							<li class=""><a href="#020-many-to-many">Many-to-many</a></li>
				</ul>
			</li>
			<li>
				<a href="#Metrics" class="docs-category" data-toggle="collapse" aria-expanded="false">Metrics</a>
				<ul id="Metrics" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#020-metrics-basics">Collecting metrics</a></li>
							<li class=""><a href="#020-metrics-health">Health check</a></li>
							<li class=""><a href="#020-metrics-logging">Logging</a></li>
				</ul>
			</li>
			<li>
				<a href="#IoT" class="docs-category" data-toggle="collapse" aria-expanded="false">IoT</a>
				<ul id="IoT" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#021-iot-aws">AWS IoT</a></li>
							<li class=""><a href="#021-iot-azure">Azure IoT</a></li>
				</ul>
			</li>
			<li>
				<a href="#I18n" class="docs-category" data-toggle="collapse" aria-expanded="false">I18n</a>
				<ul id="I18n" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#021-translations">Translations</a></li>
							<li class=""><a href="#022-languages">Languages</a></li>
				</ul>
			</li>
			<li>
				<a href="#Utilities" class="docs-category" data-toggle="collapse" aria-expanded="false">Utilities</a>
				<ul id="Utilities" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#023-filters">Filters</a></li>
							<li class=""><a href="#023-utilities">Misc. utilities</a></li>
							<li class=""><a href="#024-humantime">HumanTime</a></li>
							<li class=""><a href="#025-pager">Pager</a></li>
							<li class=""><a href="#026-email">Email</a></li>
							<li class=""><a href="#027-queue">Queue</a></li>
							<li class=""><a href="#028-storage">Storage</a></li>
				</ul>
			</li>
			<li>
				<a href="#Security" class="docs-category" data-toggle="collapse" aria-expanded="false">Security</a>
				<ul id="Security" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#029-passwordless">Custom authentication</a></li>
							<li class=""><a href="#029-passwords">Simple authentication</a></li>
							<li class=""><a href="#029-saml">SAML support</a></li>
							<li class=""><a href="#030-ldap">LDAP support</a></li>
							<li class=""><a href="#030-oauth">OAuth 2.0 support</a></li>
							<li class=""><a href="#030-openid">OpenID support</a></li>
							<li class=""><a href="#031-facebook">Facebook support</a></li>
							<li class=""><a href="#031-github">GitHub support</a></li>
							<li class=""><a href="#031-google">Google support</a></li>
							<li class=""><a href="#031-linkedin">LinkedIn support</a></li>
							<li class=""><a href="#031-microsoft">Microsoft support</a></li>
							<li class=""><a href="#031-slack">Slack support</a></li>
							<li class=""><a href="#031-twitter">Twitter support</a></li>
							<li class=""><a href="#032-amazon">Amazon support</a></li>
							<li class=""><a href="#032-roles">Groups and roles</a></li>
							<li class=""><a href="#033-csrf">CSRF protection</a></li>
				</ul>
			</li>
			<li>
				<a href="#REST-API" class="docs-category" data-toggle="collapse" aria-expanded="false">REST API</a>
				<ul id="REST-API" class="docs-category-child collapse list-unstyled">
							<li class=""><a href="#033-restauth">Authentication</a></li>
							<li class=""><a href="#034-api-intro">API methods</a></li>
							<li class="POST"><a href="#034-api-jwt-signin">Sign in (JWT, public)</a></li>
							<li class="GET"><a href="#035-api-jwt-refresh">Token refresh (JWT)</a></li>
							<li class="DELETE"><a href="#035-api-jwt-revoke">Revoke all tokens (JWT)</a></li>
							<li class="POST"><a href="#036-api-create">Create object</a></li>
							<li class="GET"><a href="#037-api-read">Read object</a></li>
							<li class="PUT"><a href="#038-api-overwrite">Overwrite object</a></li>
							<li class="PATCH"><a href="#038-api-update">Update object</a></li>
							<li class="DELETE"><a href="#039-api-delete">Delete object</a></li>
							<li class="POST"><a href="#040-api-batch-create">Batch create</a></li>
							<li class="GET"><a href="#041-api-batch-read">Batch read</a></li>
							<li class="PATCH"><a href="#042-api-batch-update">Batch update</a></li>
							<li class="DELETE"><a href="#043-api-batch-delete">Batch delete</a></li>
							<li class="GET"><a href="#044-api-basicsearch">Basic search</a></li>
							<li class="GET"><a href="#045-api-search">Advanced search</a></li>
							<li class="GET"><a href="#046-api-links-get">Find linked objects</a></li>
							<li class="POST"><a href="#047-api-links-link">Link objects</a></li>
							<li class="DELETE"><a href="#048-api-links-unlink">Unlink objects</a></li>
							<li class="PUT"><a href="#049-api-constraints-add">Add constraint</a></li>
							<li class="GET"><a href="#049-api-constraints-get">List constraints</a></li>
							<li class="DELETE"><a href="#049-api-constraints-rem">Remove constraint</a></li>
							<li class="GET"><a href="#049-api-health">Health check (public)</a></li>
							<li class="GET"><a href="#049-api-id">Read by id</a></li>
							<li class="GET"><a href="#049-api-me">Me object</a></li>
							<li class="GET"><a href="#049-api-types-list">List types</a></li>
							<li class="GET"><a href="#050-api-permissions-check">Check permission</a></li>
							<li class="GET"><a href="#050-api-permissions-get">List permissions</a></li>
							<li class="PUT"><a href="#050-api-permissions-grant">Grant permissions</a></li>
							<li class="DELETE"><a href="#050-api-permissions-revoke">Revoke permissions</a></li>
							<li class="GET"><a href="#050-api-settings-get">List custom settings</a></li>
							<li class="PUT"><a href="#050-api-settings-put">Add custom setting</a></li>
							<li class="DELETE"><a href="#050-api-settings-rem">Remove custom setting</a></li>
							<li class="GET"><a href="#050-api-setup-child">Child app setup</a></li>
							<li class="GET"><a href="#050-api-setup">Initial setup (public)</a></li>
							<li class="POST"><a href="#051-api-newkeys">Reset API keys</a></li>
							<li class="GET"><a href="#052-api-utils">Utilities</a></li>
							<li class="POST"><a href="#053-api-reindex">Rebuild index</a></li>
				</ul>
			</li>
	</ul>

	<ul class="list-unstyled visible-xs-block">
		<!--  Navigation  -->
		<!-- Hidden li included to remove active class from about link when scrolled up past about section -->
		<li class="hidden">
			<a href="/#page-top"></a>
		</li>
		<li>
			<a href="/#download">Download</a>
		</li>
		<li>
			<a href="https://console.paraio.org">Console</a>
		</li>
		<li>
			<a href="/#about">About</a>
		</li>
	</ul>

	<ul class="list-unstyled CTAs">
		<li><a href="#" id="theme-switch-btn" class="btn btn-default">Dark Theme</a></li>
	</ul>
</nav>

<!-- Page Content Holder -->
<div id="content">

	<nav class="navbar navbar-default">
		<div class="container-fluid">

			<div class="navbar-header">
				<button type="button" id="sidebarCollapse" class="btn btn-default navbar-btn">
					<i class="glyphicon glyphicon-menu-hamburger"></i>
				</button>
				<p id="docs-title">Para Docs</p>

			</div>

			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-right">
					<!--  Navigation  -->
					<!-- Hidden li included to remove active class from about link when scrolled up past about section -->
					<li class="hidden">
						<a href="/#page-top"></a>
					</li>
					<li>
						<a href="/docs/"><b>Docs</b></a>
					</li>
					<li>
						<a href="/#download">Download</a>
					</li>
					<li>
						<a href="https://console.paraio.org">Console</a>
					</li>
					<li>
						<a href="/#about">About</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<section id="docs" class="top-section">
			<a id="001-intro" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Introduction</h2>
				<section class="body  img-rounded">
					<p>Para is a flexible backend service, created as an open-source project from the very beginning, in 2013.
It was born out of our need to have a robust system which would allow us to persist objects easily to anything -
RDBMS, NoSQL and in-memory databases. We needed a simple solution with an API which would scale well and provide a
solid foundation for our future projects.</p>
<p>Para is a <strong>stateless, schemaless, 3-layer backend system</strong> with a REST API in front of it.
The first layer is the <strong>database</strong>, the second layer is the <strong>search index</strong> and the third – the <strong>cache</strong>.
Depending on how you use it, Para can either be a standalone backend service or a persistence
framework that is part of your code base. Each request to the API is stateless, meaning you can scale out easily.
The data model requires no schema – it’s based around plain old Java/JSON objects and is optimized for schemaless
key-value data stores, but also works with traditional databases.</p>
<p>Para is also <strong>multitenant</strong>, which means you can deploy it as a standalone service on one or more nodes and host one
or more applications on it (“apps”). An app can be a website, mobile app, desktop app or even a command-line tool.
This is made possible by the REST API which talks JSON to your apps, and with the help of the client libraries below,
it’s easy to get started. If you’re building an application on the JVM, you can also add Para as Maven dependency to
your project. You can still keep the REST API or turn it off completely.</p>
<h3 id="quick-start">Quick start</h3>
<p>Create a configuration file <code>application.conf</code> file in the same directory as the Para package.
Here’s an example default configuration:</p>
<pre><code class="language-bash"><span class="hljs-comment"># the name of the root app</span>
para.app_name = <span class="hljs-string">"Para"</span>
<span class="hljs-comment"># or set it to 'production'</span>
para.env = <span class="hljs-string">"embedded"</span>
<span class="hljs-comment"># if true, users can be created without verifying their emails</span>
para.security.allow_unverified_emails = <span class="hljs-literal">false</span>
<span class="hljs-comment"># if hosting multiple apps on Para, set this to false</span>
para.clients_can_access_root_app = <span class="hljs-literal">true</span>
<span class="hljs-comment"># if false caching is disabled</span>
para.cache_enabled = <span class="hljs-literal">true</span>
<span class="hljs-comment"># a secret used for generating and verifying remember me tokens, JWTs. should be a long random string</span>
para.app_secret_key = <span class="hljs-string">"b8db69a24a43f2ce134909f164a45263"</span>
<span class="hljs-comment"># enable API request signature verification</span>
para.security.api_security = <span class="hljs-literal">true</span>
<span class="hljs-comment"># the node number from 1 to 1024, used for distributed ID generation</span>
para.worker_id = 1</code></pre>
<ol>
<li><a href="https://github.com/erudika/para/releases">Download the JAR</a></li>
<li>Run it with <code>java -jar -Dconfig.file=./application.conf para-*.jar</code></li>
<li>Call <code>curl localhost:8080/v1/_setup</code> and save the access and secret keys for the root app (important!)</li>
<li>Install <code>para-cli</code> tool for easy access <code>$ npm install -g para-cli</code></li>
<li>Configure <code>para-cli</code> with <code>$ para-cli setup</code></li>
<li>Create a new “child” app for regular use:<pre><code class="language-bash">$ para-cli new-app <span class="hljs-string">"myapp"</span> --name <span class="hljs-string">"My App"</span> --endpoint <span class="hljs-string">"http://localhost:8080"</span> \
 --accessKey <span class="hljs-string">"app:para"</span> --secretKey <span class="hljs-string">"{root app secret}"</span></code></pre>
</li>
<li>Open the <a href="https://console.paraio.org">Para Web Console</a> or use one of the provided
client libraries below to connect to the API.</li>
</ol>
<p>The root app (the initial Para app) is always created first. If you want to create multiple apps then you must
use <a href="https://github.com/Erudika/para-cli">Para CLI tool</a> as shown above. Alternatively, you can call <code>Para.newApp()</code>
or make an authenticated request to the API <code>GET /v1/_setup/{app_name}</code>.</p>
<p>The quickest way to interact with Para is through the <a href="https://github.com/Erudika/para-cli">command-line tool</a> (CLI):</p>
<pre><code>$ npm install -g para-cli
# run setup and set endpoint to either 'http://localhost:8080' or 'https://paraio.com'
$ para-cli setup
$ para-cli ping
$ echo "{\"type\":\"todo\", \"name\": \"buy milk\"}" &gt; todo.json
$ para-cli create todo.json --id todo1 --encodeId false
$ para-cli read --id todo1
$ para-cli search "type:todo"</code></pre><p>Users are created either from Java code <code>paraClient.signIn(...)</code> or by making an API request to <code>POST /v1/jwt_auth</code>. See
<a href="#034-api-jwt-signin">Sign in</a> or <a href="#033-restauth">Authentication</a> sections for more details.</p>
<h3 id="docker">Docker</h3>
<p>Tagged Docker images for Para are located at <code>erudikaltd/para</code> on Docker Hub.
First, create an <code>application.conf</code> file in a directory and run this command:</p>
<pre><code>$ docker run -ti -p <span class="hljs-number">8080</span>:<span class="hljs-number">8080</span> --rm -v para-data:<span class="hljs-regexp">/para/</span>data \
  -v $(pwd)/application.conf:<span class="hljs-regexp">/para/</span>application.conf \
  -e JAVA_OPTS=<span class="hljs-string">"-Dconfig.file=/para/application.conf"</span> erudikaltd/para</code></pre><p><strong>Environment variables</strong></p>
<p><code>JAVA_OPTS</code> - Java system properties, e.g. <code>-Dpara.port=8000</code>
<code>BOOT_SLEEP</code> - Startup delay, in seconds</p>
<p><strong>Plugins</strong></p>
<p>To use plugins, create a new <code>Dockerfile-plugins</code> which does a multi-stage build like so:</p>
<pre><code># change X.Y.Z to the version you want to use
FROM erudikaltd/para:v1.XY.Z-base AS base
FROM erudikaltd/para-search-lucene:1.XY.Z AS search
FROM erudikaltd/para-dao-mongodb:1.XY.Z AS dao
FROM base AS final
COPY --from=search /para/lib/*.jar /para/lib
COPY --from=dao /para/lib/*.jar /para/lib</code></pre><p>Then simply run <code>$ docker build -f Dockerfile-plugins -t para-mongo .</code></p>
<h3 id="maven">Maven</h3>
<p>The Java client for Para is a separate module with these Maven coordinates:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{VERSION}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p>In your own project you can create a new <code>ParaClient</code> instance like so:</p>
<pre><code class="language-java">ParaClient pc = <span class="hljs-keyword">new</span> ParaClient(accessKey, secretKey);
<span class="hljs-comment">// Para endpoint - http://localhost:8080 or https://paraio.com</span>
pc.setEndpoint(paraServerURL);
<span class="hljs-comment">// Set this to true if you want ParaClient to throw exceptions on HTTP errors</span>
pc.throwExceptionOnHTTPError(<span class="hljs-keyword">false</span>);
<span class="hljs-comment">// send a test request - this should return a JSON object of type 'app'</span>
pc.me();</code></pre>
<blockquote>
<p>We’ve built a full-blown StackOverflow clone with Para in just about 4000 lines of code - check it out at <a href="https://scoold.com">https://scoold.com</a></p>
</blockquote>
<h3 id="client-libraries">Client libraries</h3>
<div class="row">
  <div class="col-sm-4 text-center">
        <a href="https://github.com/Erudika/para/tree/master/para-client" class="btn-client">
            <i class="devicon-java-plain-wordmark"></i>
        </a>
    </div>
  <div class="col-sm-4 text-center">
        <a href="https://github.com/Erudika/para-client-js" class="btn-client">
            <i class="devicon-javascript-plain"></i>
        </a>
    </div>
  <div class="col-sm-4 text-center">
        <a href="https://github.com/Erudika/para-client-php" class="btn-client">
            <i class="devicon-php-plain"></i>
        </a>
    </div>
</div>
<div class="row">
    <div class="col-sm-4 text-center">
        <a href="https://github.com/Erudika/para-client-csharp" class="btn-client">
            <i class="devicon-dot-net-plain-wordmark"></i>
        </a>
    </div>
  <div class="col-sm-4 text-center">
        <a href="https://github.com/Erudika/para-client-android" class="btn-client">
            <i class="devicon-android-plain"></i>
        </a>
    </div>
  <div class="col-sm-4 text-center">
        <a href="https://github.com/Erudika/para-client-ios" class="btn-client">
            <i class="devicon-apple-original"></i>
        </a>
    </div>
</div>
<div class="row">
  <div class="col-sm-12 text-center">
        <a href="https://github.com/Erudika/para-client-python" class="btn-client">
            <i class="devicon-python-plain-wordmark"></i>
        </a>
    </div>
</div>

<h3 id="building-para">Building Para</h3>
<p>Para can be compiled with JDK 8 and up.</p>
<p>To compile it you’ll need Maven. Once you have it, just clone and build:</p>
<pre><code class="language-sh">$ git <span class="hljs-built_in">clone</span> https://github.com/erudika/para.git &amp;&amp; <span class="hljs-built_in">cd</span> para
$ mvn install -DskipTests=<span class="hljs-literal">true</span></code></pre>
<p>To generate the executable “uber-jar” run <code>$ mvn package</code> and it will be in <code>./para-jar/target/para-x.y.z-SNAPSHOT.jar</code>.
Two JAR files will be generated in total - the fat one is a bit bigger in size.</p>
<p>To run a local instance of Para for development, use:</p>
<pre><code class="language-sh">$ mvn spring-boot:run</code></pre>
<p>Alternatively, you can build a WAR file and deploy it to your favorite servlet container:</p>
<pre><code>$ cd para-war &amp;&amp; mvn package</code></pre>
				</section>
			</article>
			<a id="002-standalone" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Standalone mode</h2>
				<section class="body  img-rounded">
					<p>There are two ways to run Para as a standalone server. The first one is by downloading the executable JAR file and executing it:</p>
<pre><code class="language-bash">java -jar para-X.Y.Z.jar</code></pre>
<p>The JAR contains an embedded Jetty server and bundles together all the necessary libraries. This is the simplest and
recommended way to run Para.</p>
<p>Running a standalone server allows you to build a cluster of distributed Para nodes and connect to it
through the REST API. Here’s a simple diagram of this architecture:</p>
<pre>

+-------------------------------------+
|  Your app + Para API client library |
+------------------+------------------+
                   |
+------------------+------------------+
|        REST API over HTTPS          |
+-------------------------------------+
|       Cluster Load Balancer         |
+------------------+------------------+
                   |
     +------------------ ... ----+
     |             |             |
+----+----+   +----+----+   +----+----+
| Para #1 |   | Para #2 |   | Para #N |
+---------+   +---------+   +---------+

  Node 1        Node 2   ...  Node N

</pre>

<h2 id="deploying-to-a-servlet-container-or-a-self-hosted-environment">Deploying to a servlet container or a self-hosted environment</h2>
<p>Another option is to build and deploy the WAR file to a servlet container like Tomcat or GlassFish, for example.</p>
<p><strong>Note:</strong> We recommend deploying the Para at the root context <code>/</code>. You can do this by renaming the WAR file
to <code>ROOT.war</code> before deploying. See <a href="#005-config">the Config</a> for more details about configuring your deployment.</p>
<p>Para can also be deployed easily to a PaaS environment like Heroku or AWS Elastic Beanstalk. The JAR file is executable
and should “just work” by setting the execution command to <code>java -jar para-X.Y.Z.jar</code>.</p>
<p>In a self-hosted environment where you want to manage your own SSL certificates, it is recommended to run a
reverse-proxy server like NGINX in front of Para. As an alternative you can use Apache or Lighttpd.</p>
<details><summary><b>Example configuration for NGINX</b></summary>
<pre><code>
server_tokens off;
add_header X-XSS-Protection "1; mode=block";
add_header X-Content-Type-Options nosniff;<br>
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name www.domain.com domain.com;<br>
    # Redirect all HTTP requests to HTTPS with a 301 Moved Permanently response.
    return 301 https://$host$request_uri;
}<br>
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name www.domain.com domain.com;<br>
    # certs sent to the client in SERVER HELLO are concatenated in ssl_certificate
    ssl_certificate /path/to/signed_cert_plus_intermediates;
    ssl_certificate_key /path/to/private_key;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;<br>
    # modern configuration. tweak to your needs.
    ssl_protocols TLSv1.2;
    ssl_ciphers 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256';
    ssl_prefer_server_ciphers on;<br>
    # HSTS (ngx_http_headers_module is required) (15768000 seconds = 6 months)
    add_header Strict-Transport-Security max-age=15768000;<br>
    # OCSP Stapling - fetch OCSP records from URL in ssl_certificate and cache them
    ssl_stapling on;
    ssl_stapling_verify on;<br>
    # Verify chain of trust of OCSP response using Root CA and Intermediate certs
    ssl_trusted_certificate /path/to/root_CA_cert_plus_intermediates;<br>
    # Cloudflare DNS
    resolver 1.1.1.1;<br>
    # Required for LE certificate enrollment using certbot
    location '/.well-known/acme-challenge' {
        default_type "text/plain";
        root /var/www/html;
    }<br>
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto https;
        proxy_set_header Host $http_host;
    }
}
</code></pre>
</details>

<br>

<blockquote>
<p>Visit the <a href="https://github.com/erudika/para/releases">releases page</a> for the latest package.</p>
</blockquote>
<h2 id="hosted-service">Hosted service</h2>
<p>Don’t want to deal with servers and performance issues? We offer hosting and premium support at
<a href="https://paraio.com">ParaIO.com</a> where you can try Para online with a <strong>free developer account</strong>.
Browse and manage your users and objects, do backups and edit permissions with a few clicks in the web console.
By upgrading to a premium account you will be able to scale you projects up and down in seconds and manage multiple apps.</p>

				</section>
			</article>
			<a id="003-maven" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Maven</h2>
				<section class="body  img-rounded">
					<p>Para is hosted on Maven Central. To add it to your project just include this into your <code>pom.xml</code>:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{VERSION}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p>For building lightweight client-only applications connecting to Para, include only the client module:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{VERSION}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p>By building your JVM app on top of Para, you have full control over persistence, caching and indexing operations.
Here’s a simple diagram of this architecture:</p>
<pre>
+----------+ +----------+ +-----------+
| Web SPA  | |API Client| | Mobile app|
+----+-----+ +-----+----+ +----+------+
     |             |           |
+----+-------------+-----------+------+
|        REST API over HTTPS          |
+------------------+------------------+
|       Cluster Load Balancer         |
+------------------+------------------+
                   |
     +------------------ ... ----+
     |             |             |
+----+----+   +----+----+   +----+----+
| Your app|   | Your app|   | Your app|
+---------+   +---------+   +---------+
| Cache   |   | Cache   |   | Cache   |  \
+---------+   +---------+   +---------+   \
| Search  |   | Search  |   | Search  |    } Para
+---------+   +---------+   +---------+   /
| Database|   | Database|   | Database|  /
+---------+   +---------+   +---------+

  Node 1        Node 2   ...  Node N

</pre>

<h3 id="javadocs">Javadocs</h3>
<p><a href="/javadocs-core/" class="btn btn-default">para-core</a> &nbsp;
<a href="/javadocs-server/" class="btn btn-default">para-server</a> &nbsp;
<a href="/javadocs-client/" class="btn btn-default">para-client</a></p>

				</section>
			</article>
			<a id="004-paraobject" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>The ParaObject interface</h2>
				<section class="body  img-rounded">
					<p>All domain classes in Para implement the <code>ParaObject</code> interface which gives objects basic common properties like
<code>id</code>, <code>timestamp</code>, <code>name</code>, etc. Let’s say you have a plain old Java object like this:</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
    <span class="hljs-keyword">public</span> String name;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;
}</code></pre>
<p>and you want to turn it into persistable Para objects. You can do it by just adding one annotation and
implementing <code>ParaObject</code>:</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ParaObject</span> </span>{
    <span class="hljs-meta">@Stored</span> <span class="hljs-keyword">public</span> String name;
    <span class="hljs-meta">@Stored</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> age;
}</code></pre>
<p>This allows you do call <code>create()</code>, <code>update()</code>, <code>delete()</code> on that object <strong>and</strong> enables search indexing automatically.
Now you can do:</p>
<pre><code class="language-java">User u = <span class="hljs-keyword">new</span> User();
u.setName(<span class="hljs-string">"Gordon Freeman"</span>);
u.setAge(<span class="hljs-number">40</span>);
<span class="hljs-comment">// generates a new id and persists the object</span>
String id = u.create();</code></pre>
<p>Once the objects is created and persisted we can search for it like this:</p>
<pre><code class="language-java"><span class="hljs-comment">// returns a list of users found</span>
List&lt;User&gt; users = Para.getSearch().findQuery(u.getType(), <span class="hljs-string">"freeman"</span>);</code></pre>
<p>And here’s what a Para object looks like as JSON when returned from the REST API:</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"id"</span> : <span class="hljs-string">"572040968316915712"</span>,
  <span class="hljs-attr">"timestamp"</span> : <span class="hljs-number">1446469779546</span>,
  <span class="hljs-attr">"type"</span> : <span class="hljs-string">"user"</span>,
  <span class="hljs-attr">"appid"</span> : <span class="hljs-string">"para"</span>,
  <span class="hljs-attr">"updated"</span> : <span class="hljs-number">1446469780024</span>,
  <span class="hljs-attr">"name"</span> : <span class="hljs-string">"Gordon Freeman"</span>,
  <span class="hljs-attr">"votes"</span> : <span class="hljs-number">0</span>,
  <span class="hljs-attr">"identifier"</span> : <span class="hljs-string">"fb:1000123456789"</span>,
  <span class="hljs-attr">"groups"</span> : <span class="hljs-string">"admins"</span>,
  <span class="hljs-attr">"active"</span> : <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"email"</span> : <span class="hljs-string">"g.freeman@blackmesa.com"</span>,
  <span class="hljs-attr">"objectURI"</span> : <span class="hljs-string">"/users/572040968316915712"</span>,
  <span class="hljs-attr">"plural"</span> : <span class="hljs-string">"users"</span>
}</code></pre>
<h3 id="implementing-your-own-paraobject-classes">Implementing your own <code>ParaObject</code> classes</h3>
<p><strong>This step is optional.</strong> There was a question about how to implement <code>ParaObject</code> and where to start from.
First of all, there is no need to write your own custom classes if you’re going to be using them for simple stuff.
So step one is to take a look at the generic class called <code>Sysprop</code>. Look at the
<a href="https://github.com/Erudika/para/blob/master/para-core/src/main/java/com/erudika/para/core/Sysprop.java">source code on GitHub</a>.
It’s pretty simple and implements all of <code>ParaObject</code>‘s methods. Then you have to decide if you can work with that
generic class or not. If you really need custom properties and methods then that class is a good starting point.
Just copy the getters and setters and add your own fields and methods.</p>
<p>Another option is to extend <code>Sysprop</code> like so:</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyParaObject</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Sysprop</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ParaObject</span> </span>{
    <span class="hljs-comment">// 'implements ParaObject' is redundant in this case</span>

    <span class="hljs-meta">@Stored</span>
    <span class="hljs-keyword">public</span> String myCustomField;
    <span class="hljs-comment">// this field is ignored and not stored anywhere</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">transient</span> String secretKey;

    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> write getters &amp; setters...</span>
}</code></pre>
<p>This is a quick way of having your own classes that work with Para and it spares you the writing of all the boilerplate code.
You can later override the parent methods, for example if you need to execute some custom code on <code>create()</code>:</p>
<pre><code class="language-java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">create</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// TODO; write your own code here</span>
    <span class="hljs-keyword">return</span> dao.create(getAppid(), <span class="hljs-keyword">this</span>); <span class="hljs-comment">// this writes to DB</span>
}</code></pre>
<h3 id="fine-tuning-backend-operations">Fine-tuning backend operations</h3>
<p>From version 1.18 Para objects have three new flags - <code>stored</code>, <code>indexed</code> and <code>cached</code>. These flags turn on and off
the three main operations - persistence, indexing and caching. Developers can choose to switch off caching on a number
of objects that change very often, for example. Also some objects my be hidden from search by setting the <code>indexed: false</code>
flag. And finally you can turn off persistence completely with <code>stored: false</code> and thus have objects that
live only in memory (and search index) but are never stored in the database.</p>

				</section>
			</article>
			<a id="005-config" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>The Config</h2>
				<section class="body  img-rounded">
					<p>Once deployed, Para will initialize itself by loading the default configuration file <code>reference.conf</code>.
To load your own configuration you need to set one of the following system properties:</p>
<ul>
<li><code>config.resource</code> specifies a resource name - not a basename, i.e. ‘application.conf’ and not ‘application’</li>
<li><code>config.file</code> specifies a filesystem path, again it should include the file extension</li>
<li><code>config.url</code> specifies the URL from which to load the config file</li>
</ul>
<p>You need to set these properties before calling <code>Para.initialize()</code> or at the startup of your servlet container.
If you have a file called <code>application.conf</code> or <code>application.json</code> on the classpath, Para will pick it up automatically.</p>
<p>Here’s a sample <code>application.conf</code> file:</p>
<pre><code class="language-bash">para.env = <span class="hljs-string">"embedded"</span>
para.print_logo = <span class="hljs-literal">true</span>
para.security.api_security = <span class="hljs-literal">true</span>
para.security.csrf_protection = <span class="hljs-literal">true</span></code></pre>
<p>The configuration logic is to read system properties first, then environment properties and finally check the config file.
So the order of precedence is as follows:</p>
<pre><code>System.getProperty() &gt; System.getenv() &gt; application.conf</code></pre><p>Note that environment properties containing <code>.</code> (dots) are invalid and will be replaced with <code>_</code> (underscore).
For example, the environment property <code>$para_env</code> is equivalent to <code>para.env</code> in the config file.</p>
<blockquote>
<p><strong>Important:</strong> In a production environment, set <code>para.app_secret_key</code> to some randomly generated secret string.
This is important for securing your server because this secret key is used for signing and verifying authentication tokens.</p>
</blockquote>
<p>Here’s a list of all configuration properties that can be set in the config file:</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Configuration Property</th>
            <th>Default Value</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.env</code>                                    </td><td>    <code>embedded</code></td></tr>
        <tr><td>Enables/disables certain features, depending on the environment. Can be “production”, “development”, “embedded”.  </td><td></td></tr>
        <tr><td></p>
<p><code>para.dao</code>                                    </td><td>-</td></tr>
        <tr><td>Selects the <code>DAO</code> implementation at runtime. Can be <code>AWSDynamoDAO</code> or    “dynamodb”, “MongoDBDAO”,
        “CassandraDAO”, etc. Each implementation has its own configuration properties. Defaults to <code>H2DAO</code>. </td><td></td></tr>
        <tr><td></p>
<p><code>para.search</code>                                </td><td>-</td></tr>
        <tr><td>Selects the <code>Search</code> implementation at runtime. Defaults to <code>LuceneSearch</code>.</td><td></td></tr>
        <tr><td></p>
<p><code>para.cache</code>                                </td><td>-</td></tr>
        <tr><td>Selects the <code>Cache</code> implementation at runtime. Defaults to <code>CaffeineCache</code>.</td><td></td></tr>
        <tr><td></p>
<p><code>para.worker_id</code>                        </td><td></p>
<p><code>1</code></td></tr>
        <tr><td>Node number, 1 to 128. Used for ID generation. Each instance of Para <strong>must</strong> have a different worker id. </td><td></td></tr>
        <tr><td></p>
<p><code>para.app_name</code>                            </td><td></p>
<p><code>para</code></td></tr>
        <tr><td>The name of the root app - the main app which is used for initializing Para. </td><td></td></tr>
        <tr><td></p>
<p><code>para.context_path</code>                </td><td>-</td></tr>
        <tr><td>Context path for the server, relative to the root <code>/</code>. By default, Para is deployed to the root context path under <code>/</code>. </td><td></td></tr>
        <tr><td></p>
<p><code>para.app_secret_key</code>                </td><td>md5(‘paraseckey’)</td></tr>
        <tr><td>Para secret key. Set this to a long secure random string. Used for salting other secrets and tokens and for generating and verifying JWTs, remember me tokens, etc.. </td><td></td></tr>
        <tr><td></p>
<p><code>para.core_package_name</code>        </td><td>-</td></tr>
        <tr><td>The name of the Java package which contains your domain (core) classes. </td><td></td></tr>
        <tr><td></p>
<p><code>para.max_items_per_page</code>        </td><td></p>
<p><code>30</code></td></tr>
        <tr><td>The default page size - maximum number of results that will be returned in a search query. </td><td></td></tr>
        <tr><td></p>
<p><code>para.max_pages</code>                        </td><td></p>
<p><code>1000</code></td></tr>
        <tr><td>The maximum value for the <code>?page</code> parameter, which can be specified in a search query. </td><td></td></tr>
        <tr><td></p>
<p><code>para.max_page_limit</code>                        </td><td></p>
<p><code>256</code></td></tr>
        <tr><td>The maximum value for the <code>?limit</code> request parameter, when it is set. </td><td></td></tr>
        <tr><td></p>
<p><code>para.max_datatypes_per_app</code></td><td></p>
<p><code>256</code></td></tr>
        <tr><td>The maximum number of custom types an app can have. </td><td></td></tr>
        <tr><td></p>
<p><code>para.max_entity_size_bytes</code></td><td></p>
<p><code>1024 * 1024</code></td></tr>
        <tr><td>The size of the request payload. Requests with payloads larger than this will be denied. </td><td></td></tr>
        <tr><td></p>
<p><code>para.min_password_length</code>    </td><td></p>
<p><code>6</code></td></tr>
        <tr><td>The minimum length of passwords. </td><td></td></tr>
        <tr><td></p>
<p><code>para.aws_access_key</code>                </td><td>-</td></tr>
        <tr><td><strong>Deprecated.</strong> Use credential profiles.</td><td></td></tr>
        <tr><td></p>
<p><code>para.aws_secret_key</code>                </td><td>-</td></tr>
        <tr><td><strong>Deprecated.</strong> Use credential profiles.</td><td></td></tr>
        <tr><td></p>
<p><code>para.fb_app_id</code>                        </td><td>-</td></tr>
        <tr><td>Facebook app id (for OAuth authentication).</td><td></td></tr>
        <tr><td></p>
<p><code>para.fb_secret</code>                        </td><td>-</td></tr>
        <tr><td>Facebook app secret. </td><td></td></tr>
        <tr><td></p>
<p><code>para.gp_app_id</code>                        </td><td>-</td></tr>
        <tr><td>Google+ app id (for OAuth authentication). </td><td></td></tr>
        <tr><td></p>
<p><code>para.gp_secret</code>                        </td><td>-</td></tr>
        <tr><td>Google+ app secret. </td><td></td></tr>
        <tr><td></p>
<p><code>para.in_app_id</code>                        </td><td>-</td></tr>
        <tr><td>LinkedIn app id (for OAuth authentication) </td><td></td></tr>
        <tr><td></p>
<p><code>para.in_secret</code>                        </td><td>-</td></tr>
        <tr><td>LinkedIn app secret. </td><td></td></tr>
        <tr><td></p>
<p><code>para.tw_app_id</code>                        </td><td>-</td></tr>
        <tr><td>Twitter app id (for authentication). </td><td></td></tr>
        <tr><td></p>
<p><code>para.tw_secret</code>                        </td><td>-</td></tr>
        <tr><td>Twitter app secret. </td><td></td></tr>
        <tr><td></p>
<p><code>para.gh_app_id</code>                        </td><td>-</td></tr>
        <tr><td>GitHub app id (for OAuth authentication). </td><td></td></tr>
        <tr><td></p>
<p><code>para.gh_secret</code>                        </td><td>-</td></tr>
        <tr><td>GitHub app secret. </td><td></td></tr>
        <tr><td></p>
<p><code>para.ms_app_id</code>                        </td><td>-</td></tr>
        <tr><td>Microsoft app id (for OAuth authentication). </td><td></td></tr>
        <tr><td></p>
<p><code>para.ms_secret</code>                        </td><td>-</td></tr>
        <tr><td>Microsoft app secret. </td><td></td></tr>
        <tr><td></p>
<p><code>para.admin_ident</code>                    </td><td>-</td></tr>
        <tr><td>This is the identifier that will be used by the first admin user. It can be the email which the admin
        user will use to login or a social id in the form of <code>prefix:social_id</code>, e.g. <code>fb:12345</code>. It is used to assign
        administrative privileges to the user with that identifier.</td><td></td></tr>
        <tr><td></p>
<p><code>para.print_logo</code>                        </td><td></p>
<p><code>true</code></td></tr>
        <tr><td>If <code>true</code>, the Para ASCII logo and version will be displayed on startup.</td><td></td></tr>
        <tr><td></p>
<p><code>para.auth_cookie</code>                    </td><td></p>
<p><code>[app_name]-auth</code></td></tr>
        <tr><td>The name of the authorization cookie. Changes depending on the app name.</td><td></td></tr>
        <tr><td></p>
<p><code>para.returnto_cookie</code>            </td><td></p>
<p><code>[app_name]-returnto</code></td></tr>
        <tr><td>The name of the cookie used to remember which URL the user requested and will be redirected to after login. </td><td></td></tr>
        <tr><td></p>
<p><code>para.support_email</code>                </td><td></p>
<p><code>support@myapp.co</code></td></tr>
        <tr><td>The email of the webmaster/support team. Para will send emails to this email.</td><td></td></tr>
        <tr><td></p>
<p><code>para.session_timeout</code>            </td><td></p>
<p><code>24 * 60 * 60</code> sec.</td></tr>
        <tr><td>The lifetime of the login session, in seconds. </td><td></td></tr>
        <tr><td></p>
<p><code>para.jwt_expires_after</code>        </td><td></p>
<p><code>7 * 24 * 60 * 60</code> sec.</td></tr>
        <tr><td>JWT token validity period, in seconds. </td><td></td></tr>
        <tr><td></p>
<p><code>para.jwt_refresh_interval</code>    </td><td></p>
<p><code>60 * 60</code> sec.</td></tr>
        <tr><td>JWT refresh interval, after which a new token is issued. </td><td></td></tr>
        <tr><td></p>
<p><code>para.request_expires_after</code></td><td></p>
<p><code>15 * 60</code> sec.</td></tr>
        <tr><td>Expiration of signed API request, in seconds. </td><td></td></tr>
        <tr><td></p>
<p><code>para.vote_expires_after</code>        </td><td></p>
<p><code>30 * 24 * 60 * 60</code> sec.</td></tr>
        <tr><td>After this period has elapsed, you can vote again on the same object.</td><td></td></tr>
        <tr><td></p>
<p><code>para.vote_locked_after</code>        </td><td></p>
<p><code>30</code> sec.</td></tr>
        <tr><td>Vote locking mechanism - locks vote change after X seconds.  </td><td></td></tr>
        <tr><td></p>
<p><code>para.pass_reset_timeout</code>        </td><td></p>
<p><code>30 * 60</code> sec.</td></tr>
        <tr><td>The time window in which passwords can be reset, in seconds. After that the token in the email expires. </td><td></td></tr>
        <tr><td></p>
<p><code>para.api_enabled</code>                    </td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enable/disable the REST API. </td><td></td></tr>
        <tr><td></p>
<p><code>para.cache_enabled</code>                </td><td></p>
<p><code>false</code> || <code>para.env == production</code></td></tr>
        <tr><td>Enable/disable object caching in Para. </td><td></td></tr>
        <tr><td></p>
<p><code>para.search_enabled</code>                </td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enable/disable object indexing in Para. </td><td></td></tr>
        <tr><td></p>
<p><code>para.webhooks_enabled</code>                    </td><td></p>
<p><code>false</code></td></tr>
        <tr><td>Enable/disable the webhooks functionality around <code>Webhook</code> objects. </td><td></td></tr>
        <tr><td></p>
<p><code>para.iot_enabled</code>                    </td><td></p>
<p><code>false</code></td></tr>
        <tr><td>Enable/disable the IoT functionality around <code>Thing</code> objects. </td><td></td></tr>
        <tr><td></p>
<p><code>para.metrics_enabled</code>    </td><td> <code>true</code> </td></tr>
        <tr><td>Enable/disable all metrics. </td><td></td></tr>
        <tr><td></p>
<p><code>para.health_check_enabled</code>    </td><td> <code>true</code> </td></tr>
        <tr><td>Enable/disable regular health checks. </td><td></td></tr>
        <tr><td></p>
<p><code>para.cors_enabled</code>                    </td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enable/disable the CORS filter. It adds CORS headers to API responses.</td><td></td></tr>
        <tr><td></p>
<p><code>para.gzip_enabled</code>                    </td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enable/disable the GZIP filter. It compresses API responses, only.</td><td></td></tr>
        <tr><td></p>
<p><code>para.access_log_enabled</code>        </td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enable/disable the access log file. </td><td></td></tr>
        <tr><td></p>
<p><code>para.read_from_index</code>            </td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enable/disable reading objects from index instead of the database. This will bypass the database.
        Useful for local testing/development or to recover objects that were lost/deleted from the database. </td><td></td></tr>
        <tr><td></p>
<p><code>para.queue_link_enabled</code>        </td><td></p>
<p><code>false</code></td></tr>
        <tr><td>Enable/disable polling the default queue for objects to be imported into Para. </td><td></td></tr>
        <tr><td></p>
<p><code>para.default_queue_name</code>        </td><td></p>
<p><code>para-default</code></td></tr>
        <tr><td>The default queue name (optional). </td><td></td></tr>
        <tr><td></p>
<p><code>para.shared_table_name</code>        </td><td></p>
<p><code>0</code></td></tr>
        <tr><td>The name of the table which is shared by apps with <code>isSharingTable</code> set to <code>true</code>. </td><td></td></tr>
        <tr><td></p>
<p><code>para.prepend_shared_appids_with_space</code>        </td><td></p>
<p><code>false</code></td></tr>
        <tr><td>Enable/disable table sharing functionality by prepending the <code>appid</code> with a space. <code>DAO</code> implementations
        can detect that and switch tables based on it. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.api_security</code>                </td><td> <code>true</code> </td></tr>
        <tr><td>Enable/disable the API security mechanism. If <code>false</code>, the API endpoint will <strong>not</strong> check request
        signatures and all requests will go through. <strong>For development only</strong>.</td><td></td></tr>
        <tr><td></p>
<p><code>para.security.csrf_protection</code>            </td><td> <code>true</code> </td></tr>
        <tr><td>Enable/disable CSRF protection which checks for valid CSRF tokens in write requests. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.csrf_cookie</code>                    </td><td> <code>para-csrf-token</code> </td></tr>
        <tr><td>The name of the CSRF cookie.</td><td></td></tr>
        <tr><td></p>
<p><code>para.security.protected.{name}</code>        </td><td> - </td></tr>
        <tr><td>Protects a named resource by requiring users to authenticated before accessing it.
        A protected resource has a <code>{name}</code> and value like this <code>[&quot;/{path}&quot;, &quot;/{path}/**&quot;, [&quot;{role}&quot; or {http_method}]]</code>.
        The value is an array of relative paths which are matche by an ANT pattern matcher. This array can contain a subarray
        which lists all the HTTP methods that require authentication and the user roles that are allowed to access
        this particular resource. No HTTP methods means that all requests to this resource require authentication.</td><td></td></tr>
        <tr><td></p>
<p><code>para.security.ignored</code>                            </td><td> <code>[&quot;/{path}/**&quot;, &quot;/{path}/**&quot;]</code> </td></tr>
        <tr><td>These are the resource paths that will be explicitly public and not require authentication. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.signin</code>                            </td><td> <code>/signin</code> </td></tr>
        <tr><td>The path to the login page. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.signout</code>                            </td><td> <code>/signout</code> </td></tr>
        <tr><td>The path to the logout page. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.access_denied</code>                </td><td> <code>/403</code> </td></tr>
        <tr><td>The path to redirect to when 403 code is returned. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.returnto</code>                        </td><td> <code>returnto</code> </td></tr>
        <tr><td>The path to return to when an authentication request succeeds. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.signin_success</code>            </td><td> <code>/</code> </td></tr>
        <tr><td>The default page to send users to when they login. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.signout_success</code>            </td><td> <code>/signin</code> </td></tr>
        <tr><td>The default page to send users to when they logout.</td><td></td></tr>
        <tr><td></p>
<p><code>para.security.signin_failure</code>            </td><td> <code>/signin</code> </td></tr>
        <tr><td>The default page to send users to when login fails. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.allow_unverified_emails</code>    </td><td> <code>false</code> </td></tr>
        <tr><td>Enable/disable user email verification. When <code>false</code> user accounts are locked until
        the user checks their email and confirms it. </td><td></td></tr>
        <tr><td></p>
<p><code>para.security.admins_have_full_api_access</code>            </td><td> <code>true</code> </td></tr>
        <tr><td>If set to <code>false</code> admin users will be subject to standard resource permissions when accessing the API.
        This is applicable when <code>paraClient.signIn()</code> is used. By default, they have unlimited access. </td><td></td></tr>
        <tr><td></p>
<p><code>para.debug_request_signatures</code>                                        </td><td> <code>false</code> </td></tr>
        <tr><td>Prints out the request signature (AWS V4) for each request, both the incoming signature from clients
        and the one calculated by the server. </td><td></td></tr>
        <tr><td></p>
<p><code>para.s3.bucket</code>                                        </td><td> <code>org.paraio.files</code> </td></tr>
        <tr><td>The S3 bucket where files will be stored by <code>FileStore</code> implementations. </td><td></td></tr>
        <tr><td></p>
<p><code>para.s3.max_filesize_mb</code>                        </td><td> 10 </td></tr>
        <tr><td>Max filesize for files uploaded to S3, in megabytes. </td><td></td></tr>
        <tr><td></p>
<p><code>para.localstorage.folder</code>                    </td><td> - </td></tr>
        <tr><td>The local folder for file storage. </td><td></td></tr>
        <tr><td></p>
<p><code>para.localstorage.max_filesize_mb</code>    </td><td> 10 </td></tr>
        <tr><td>Max filesize for files stored locally, in megabytes. </td><td></td></tr>
        <tr><td></p>
<p><code>para.logs_dir</code>    </td><td> <code>.</code> </td></tr>
        <tr><td>The directory where Para logs will be stored. If not specified, logs are stored in the current directory. </td><td></td></tr>
        <tr><td></p>
<p><code>para.metrics.logging_rate</code>    </td><td> 60 </td></tr>
        <tr><td>The rate at which the metrics logger will write to file, in seconds. </td><td></td></tr>
        <tr><td></p>
<p><code>para.metrics.jmx_enabled</code>    </td><td> <code>false</code> </td></tr>
        <tr><td>Enable/disable JMX reporting for all metrics. </td><td></td></tr>
        <tr><td></p>
<p><code>para.health.check_interval</code>    </td><td> 60 </td></tr>
        <tr><td>Health check inverval, in seconds. </td><td></td></tr>
        <tr><td></p>
<p><code>para.reindex_batch_size</code>    </td><td> <code>pager.getLimit()</code> </td></tr>
        <tr><td>Controls the number of documents to reindex in a single batch. By default is equal to page size for
        reading the docs from DB.</td><td></td></tr>
    </tbody></p>
</table>

<p>All of the above can be overridden with <code>System.setProperty()</code>.</p>
<blockquote>
<p>Para uses the excellent <a href="https://github.com/typesafehub/config/">Config library</a> by TypeSafe.
For more information about how it works, see the README for it.</p>
</blockquote>

				</section>
			</article>
			<a id="006-modules" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Modules</h2>
				<section class="body  img-rounded">
					<p>In the <code>para-server</code> package, there are several core modules:</p>
<ul>
<li><code>PersistenceModule</code> - defines the core persistence class implementation</li>
<li><code>SearchModule</code> - defines the core search class implementation</li>
<li><code>CacheModule</code> - defines the core cache class implementation</li>
<li><code>EmailModule</code> - defines an email service implementation for sending emails</li>
<li><code>AOPModule</code> - manages the indexing and caching aspects of Para objects</li>
<li><code>I18nModule</code> - defines a currency converter service implementation</li>
<li><code>QueueModule</code> - defines a queue service implementation</li>
<li><code>StorageModule</code> - defines a file storage service, e.g. Amazon S3</li>
</ul>
<p>You can override all of the above using the <code>ServiceLoader</code> mechanism in Java like so:</p>
<ol>
<li>Create a file <code>com.google.inject.Module</code> inside the <code>META-INF/services</code> folder</li>
<li>Then add the full class names of all your modules, one on each line</li>
<li>Para will load these modules on startup use them instead of the default ones</li>
</ol>
<p>For example, let’s say you want to implement a new <code>PersistenceModule</code> which connects to MySQL.
You can define it like so:</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MySqlModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractModule</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">()</span> </span>{
        bind(DAO.class).to(MySqlDAO.class).asEagerSingleton();
    }
}</code></pre>
<p>Then implement the <code>DAO</code> interface in your class <code>MySqlDAO</code> so that it connects to a MySQL server and stores and loads objects.
Finally write the full class name <code>com.company.MySqlModule</code> to the file <code>com.google.inject.Module</code> and Para will use this
module as its default persistence module.</p>
<p>You can also override modules programmatically like this:</p>
<pre><code class="language-java">ParaServer.initialize(Modules.override(ParaServer.getCoreModules()).with(<span class="hljs-keyword">new</span> Module() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(Binder binder)</span> </span>{
        binder.bind(DAO.class).to(MyDAO.class).asEagerSingleton();
        binder.bind(Cache.class).to(MyCache.class).asEagerSingleton();
        binder.bind(Search.class).to(MySearch.class).asEagerSingleton();
    }
}));</code></pre>
<p>Also, you could start Para with the default modules like this:</p>
<pre><code class="language-java"><span class="hljs-comment">// Initialize Para and call each listener.onInitialize()</span>
ParaServer.initialize();

<span class="hljs-comment">// Finally, destroy all resources by calling each listener.onDestroy()</span>
ParaServer.destroy();</code></pre>
<p>If you’re defining your own custom classes, don’t forget to set:</p>
<pre><code>System.setProperty(<span class="hljs-string">"para.core_package_name"</span>, <span class="hljs-string">"com.company.myapp.core"</span>);</code></pre><p>There are two additional methods <code>Para.initialize()</code> and <code>Para.destroy()</code> which are now part of <code>para-core</code>. The
difference between these and the ones above is:</p>
<ul>
<li><p><code>Para.initialize()</code> - invokes all registered <code>InitializeListener</code> instances and prints out logo to console;</p>
</li>
<li><p><code>ParaServer.initialize()</code> - loads all Guice modules, binds them and injects concrete types into each
<code>InitializeListener</code>, then calls <code>Para.initialize()</code>;</p>
</li>
<li><p><code>Para.destroy()</code> - invokes all registered <code>DestroyListener</code> instances and prints out a log message;</p>
</li>
<li><p><code>ParaServer.destroy()</code> - injects concrete types into each <code>DestroyListener</code> and calls <code>Para.destroy()</code>.</p>
</li>
</ul>
<blockquote>
<p>Para uses <a href="https://github.com/google/guice">Google Guice</a> as its module manager and DI system.</p>
</blockquote>

				</section>
			</article>
			<a id="007-env" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Environment</h2>
				<section class="body  img-rounded">
					<p><code>para.env</code> is an important configuration property that turns features on and off. There are three main
values for it - <code>embedded</code>, <code>development</code>, <code>production</code>, but you can define more.</p>
<p>When you are in <code>embedded</code> mode Para will use <strong>H2</strong> as a database and pure <strong>Lucene</strong> as a search engine.
This is the simplest way to get started with Para as you don’t need to configure anything.</p>
<blockquote>
<p><strong>Important:</strong> Embedded mode is recommended for <em>local development only</em>.</p>
</blockquote>
<p>When you are in <code>development</code> mode Para will try to connect to a DynamoDB server running on <code>localhost</code>. It will also
try to connect to a local Elasticsearch server. This mode was created so that you can keep your DB and search
servers running in the background while developing your application rather than loading them on each deploy. This will
make redeploys a bit faster.</p>
<p>Finally when you are ready to deploy your app to a real server set <code>para.env</code> to <code>production</code>. This will enable object
caching and will try to connect to the real AWS DynamoDB service. Also you have to set up a new node for Elasticsearch
or run it locally.</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>

<p><code>para.env</code></th>
            <th></p>
<p><code>DAO</code></th>
            <th></p>
<p><code>Cache</code></th>
            <th></p>
<p><code>Search</code></th>
        </tr>
    </thead>
    <tbody>
        <tr><td></p>
<p><code>embedded</code> (default)</td><td></p>
<p><code>H2DAO</code></td><td></p>
<p><code>off</code></td><td></p>
<p><code>on</code></td></tr>
        <tr><td></p>
<p><code>development</code></td><td></p>
<p><code>AWSDynamoDAO</code></td><td></p>
<p><code>off</code></td><td></p>
<p><code>on</code></td></tr>
        <tr><td></p>
<p><code>production</code></td><td></p>
<p><code>AWSDynamoDAO</code></td><td></p>
<p><code>on</code></td><td></p>
<p><code>on</code></td></tr>
    </tbody></p>
</table>


				</section>
			</article>
			<a id="008-plugins" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Plugins</h2>
				<section class="body  img-rounded">
					<p>Para will look for various plugins like <code>IOListener</code>s, <code>CustomResourceHandler</code>s, <code>DAO</code>s etc, on startup.
The folder in which plugins JARs should be placed is <code>./lib/</code>, by default, but it can be configured like so:</p>
<pre><code>para.plugin_folder = <span class="hljs-string">"plugins/"</span></code></pre><h3 id="dao-search-and-cache-plugins"><code>DAO</code>, <code>Search</code> and <code>Cache</code> plugins</h3>
<p>In version 1.18 we expanded the support for plugins. Para can now load third-party plugins for various <code>DAO</code>
implementations, like <a href="https://github.com/Erudika/para-dao-mongodb">MongoDB</a> for example. The plugin <code>para-dao-mongodb</code>
is loaded using the <code>ServiceLoader</code> mechanism from the classpath and replaces the default <code>AWSDynamoDAO</code> implementation.</p>
<p>To create a plugin you have to create a new project and import <code>para-core</code> with Maven and extend one of the three
interfaces - <code>DAO</code>, <code>Search</code>, <code>Cache</code>. Implement one of these interfaces and name your project by following the
convention:</p>
<ul>
<li><code>para-dao-mydao</code> for <code>DAO</code> plugins,</li>
<li><code>para-search-mysearch</code> for <code>Search</code> plugins,</li>
<li><code>para-cache-mycache</code> for <code>Cache</code> plugins.</li>
</ul>
<p>For example, the <a href="https://github.com/Erudika/para-dao-mongodb">plugin for MongoDB</a> is called <code>para-dao-mongodb</code> and
implements the <code>DAO</code> interface with the MongoDB driver for Java.</p>
<p>You also need to create one file inside <code>src/main/resources/META-INF/services/</code> in your plugin project:</p>
<ul>
<li><code>com.erudika.para.persistence.DAO</code> for <code>DAO</code> plugins,</li>
<li><code>com.erudika.para.search.Search</code> for <code>Search</code> plugins,</li>
<li><code>com.erudika.para.cache.Cache</code> for <code>Cache</code> plugins.</li>
</ul>
<p>Inside this file you put the full class name of your implementation, for example <code>com.erudika.para.persistence.MyDAO</code>,
on one line and save the file.</p>
<p>To load a plugin follow these steps:</p>
<ol>
<li>Place the plugin JAR in a folder called <code>lib</code> (depends on configuration) or <code>WEB-INF/lib</code> in the same folder
as the Para server or include the plugin through Maven,</li>
<li>Set the configuration property <code>para.dao = &quot;MyDAO&quot;</code> or <code>para.search = &quot;MySearch&quot;</code> or <code>para.cache = &quot;MyCache&quot;</code>
(use the simple class name here)</li>
<li>Start the Para server and the new plugin should be loaded</li>
</ol>
<blockquote>
<p><strong>Important:</strong> Each plugin must implement and register a <code>DestroyListener</code> on initialization where all resources
(connections, streams, pools) should be properly released and closed. Using <code>Runtime.getRuntime().addShutdownHook()</code> is
<strong>not</strong> recommended because in some cases that method is not executed.</p>
</blockquote>
<h3 id="custom-event-listeners">Custom event listeners</h3>
<p>To register your own <code>InitializeListener</code>s and <code>DestroyListener</code>s add the following code to one of your constructors
or inside a static block in one of your classes:</p>
<pre><code class="language-java"><span class="hljs-comment">// this has to be registered before Para.initialize() is called</span>
Para.addInitListener(<span class="hljs-keyword">new</span> InitializeListener() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInitialize</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> do stuff on initialization...</span>
    }
});

Para.addDestroyListener(<span class="hljs-keyword">new</span> DestroyListener() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> release resources...</span>
    }
});</code></pre>
<h3 id="custom-io-listeners">Custom I/O listeners</h3>
<p>An I/O listener is a callback function which is executed after an input/output (CRUD) operation. After a call is made to
one of the <code>DAO</code> methods like <code>read()</code>, <code>update()</code>, etc., all registered listeners are notified and called.
It is recommended that the code inside these listeners is asynchronous or less CPU intensive so it does not slow down
the calls to <code>DAO</code>.</p>
<pre><code class="language-java">Para.addIOListener(<span class="hljs-keyword">new</span> IOListener() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPreInvoke</span><span class="hljs-params">(Method method, Object[] args)</span> </span>{
        <span class="hljs-comment">// do something before the CRUD operation...</span>
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPostInvoke</span><span class="hljs-params">(Method method, Object result)</span> </span>{
        <span class="hljs-comment">// do something with the result...</span>
    }
});</code></pre>
<h3 id="custom-listeners-for-app-events">Custom listeners for app events</h3>
<p>These listeners can be registered to execute code when an app is created or deleted. This is useful when we need to
do additional operations like creating DB tables and/or creating indexes for the new app. Also we might want to clean up
those after the app is deleted. Example:</p>
<pre><code class="language-java">App.addAppCreatedListener(<span class="hljs-keyword">new</span> AppCreatedListener() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAppCreated</span><span class="hljs-params">(App app)</span> </span>{
        <span class="hljs-keyword">if</span> (app != <span class="hljs-keyword">null</span>) {
            createTable(app.getAppIdentifier());
        }
    }
});

App.addAppDeletedListener(<span class="hljs-keyword">new</span> AppDeletedListener() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onAppDeleted</span><span class="hljs-params">(App app)</span> </span>{
        <span class="hljs-keyword">if</span> (app != <span class="hljs-keyword">null</span>) {
            deleteTable(app.getAppIdentifier());
        }
    }
});</code></pre>
<p>Additionally, you can listen for changes to the custom app settings with these two event listeners:</p>
<pre><code>App.addAppSettingAddedListener(<span class="hljs-keyword">new</span> AppSettingAddedListener() {
    public <span class="hljs-keyword">void</span> onSettingAdded(App app, <span class="hljs-built_in">String</span> settingKey, <span class="hljs-built_in">Object</span> settingValue) {
        <span class="hljs-keyword">if</span> (app != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// trigger something</span>
        }
    }
});

App.addAppSettingRemovedListener(<span class="hljs-keyword">new</span> AppSettingRemovedListener() {
    public <span class="hljs-keyword">void</span> onSettingRemoved(App app, <span class="hljs-built_in">String</span> settingKey) {
        <span class="hljs-keyword">if</span> (app != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// trigger something else</span>
        }
    }
});</code></pre><h3 id="custom-context-initializers">Custom context initializers</h3>
<p>Para will automatically pick up your classes which extend the <code>Para</code> class. They should be annotated
with <code>@Configuration</code>, <code>@EnableAutoConfiguration</code> and <code>@ComponentScan</code>. The <code>Para</code> class implements Spring Boot’s
<code>WebApplicationInitializer</code> which creates the root application context.</p>
<p>In your custom initializers you have full access to the <code>ServletContext</code> and this is a good place to register
your own filters and servlets. These initializer classes also act as an alternative to
<code>web.xml</code> by providing programmatic configuration capabilities.</p>
<h3 id="custom-api-resource-handlers">Custom API resource handlers</h3>
<p>Since version 1.7, you can register custom API resources by implementing the <code>CustomResourceHandler</code> interface.
Use the <code>ServiceLoader</code> mechanism to tell Para to load your handlers - add them to a file named:</p>
<pre><code>com.erudika.para.rest.CustomResourceHandler</code></pre><p>in <code>META-INF/services</code> where each line contains the full class name
of your custom resource handler class. On startup Para will load these and register them as API resource handlers.</p>
<p>The <code>CustomResourceHandler</code> interface is simple:</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CustomResourceHandler</span> </span>{
    <span class="hljs-comment">// the path of the resource, e.g. "my-resource"</span>
    <span class="hljs-function">String <span class="hljs-title">getRelativePath</span><span class="hljs-params">()</span></span>;
    <span class="hljs-comment">// handle GET requests</span>
    <span class="hljs-function">Response <span class="hljs-title">handleGet</span><span class="hljs-params">(ContainerRequestContext ctx)</span></span>;
    <span class="hljs-comment">// handle PUT requests</span>
    <span class="hljs-function">Response <span class="hljs-title">handlePut</span><span class="hljs-params">(ContainerRequestContext ctx)</span></span>;
    <span class="hljs-comment">// handle POST requests</span>
    <span class="hljs-function">Response <span class="hljs-title">handlePost</span><span class="hljs-params">(ContainerRequestContext ctx)</span></span>;
    <span class="hljs-comment">// handle DELETE requests</span>
    <span class="hljs-function">Response <span class="hljs-title">handleDelete</span><span class="hljs-params">(ContainerRequestContext ctx)</span></span>;
}</code></pre>
<p>You can use <code>@Inject</code> in your custom handlers to inject any object managed by Para.</p>

				</section>
			</article>
			<a id="009-core" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Core classes</h2>
				<section class="body  img-rounded">
					<p>In the package <code>com.erudika.para.core</code> there are a number of core domain classes that are used throughout Para.
These are common classes like <code>User</code> and <code>App</code> which you can use in you application directly or extend them.
You can use them for your objects but you’re always free to create your own. To do that, simply <code>POST</code> a new object
with <code>type: mytype</code> through the API and your new type will be automatically registered.</p>
<p><strong>Note:</strong> Type definitions <em>cannot</em> contain the symbols <code>/</code> and <code>#</code>.</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>class</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>User</code></td><td> Defines a basic user with a name, email, password. Used for user registration and security.</td></tr>
        <tr><td></p>
<p><code>Address</code></td><td> Defines an address with optional geographical coordinates. Used for location based searching. </td></tr>
        <tr><td></p>
<p><code>App</code></td><td> Defines an application within Para. Usually there’s only one existing (root) app.</td></tr>
        <tr><td></p>
<p><code>Tag</code></td><td> Simple tag class which contains a tag and its frequency count. Basically any Para object can be tagged. Used for searching.</td></tr>
        <tr><td></p>
<p><code>Vote</code></td><td> Defines a user vote - negative or positive. Useful for modeling objects which can be voted on (likes, +1s, favs, etc). </td></tr>
        <tr><td></p>
<p><code>Translation</code></td><td> Holds a translated string. Can be used for collecting translations from users. </td></tr>
        <tr><td></p>
<p><code>Sysprop</code></td><td> <strong>System class</strong> used as a general-purpose data container. It’s basically a map. </td></tr>
        <tr><td></p>
<p><code>Linker</code></td><td> <strong>System class</strong> used for implementing a many-to-many relationship between objects. </td></tr>
        <tr><td></p>
<p><code>Thing</code></td><td> <strong>System class</strong> used for storing IoT devices’ state and metadata.</td></tr>
        <tr><td></p>
<p><code>Webhook</code></td><td> <strong>System class</strong> used for storing webhook metadata.</td></tr>
    </tbody></p>
</table>

<h3 id="voting">Voting</h3>
<p>Para implements a simple voting mechanism for objects - each object can be voted up and down an has a <code>votes</code> property.
Voting is useful for many application which require sorting by user votes. When a vote is cast, a new object of type
<code>Vote</code> is created to store the vote in the database. Users have a configurable time window to amend their vote, they can
no longer vote on that particular object.</p>

				</section>
			</article>
			<a id="010-serialization" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Serialization</h2>
				<section class="body  img-rounded">
					<p>Para handles serialization and deserialization using a combination of Jackson, BeanUtils and Java reflection.
The process happens in the <code>ParaObjectUtils</code> class, and more precisely inside two particular methods -
<code>setAnnotatedFields()</code> and <code>getAnnotatedFields()</code>.</p>
<p>When defining your custom classes and fields, you’re free to use any Java type, primitive or your own custom classes.
Basically, any type compatible with Jackson will work with Para as well. You can also use Jackson annotations on your
fields. A common example is declaring custom serializers and deserializers:</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyCustomClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Sysprop</span> </span>{
    <span class="hljs-meta">@JsonSerialize</span>(using = CatSerializer.class)
    <span class="hljs-meta">@JsonDeserialize</span>(using = CatDeserializer.class)
    <span class="hljs-meta">@Stored</span> <span class="hljs-keyword">private</span> Cat cat;
}

Map&lt;String, Object&gt; properties = ParaObjectUtils.getAnnotatedFields(customClass, <span class="hljs-keyword">false</span>);
MyCustomClass deserialized = ParaObjectUtils.setAnnotatedFields(properties);</code></pre>
<p>Notice the <code>false</code> at the end of <code>getAnnotatedFields()</code>. It means that whenever a complex/custom type is encountered,
it <strong>will not</strong> be flattened to a JSON string. This allows you to persist objects in their original format or
flatten them (<code>true</code>) to JSON. This is really useful in some situations.</p>
<p>Once a <code>ParaObject</code> is serialized to a <code>Map</code>, each <code>DAO</code> decides how it will persist that data. Some <code>DAO</code> implementations
persist objects in two columns - <code>id</code> and <code>json</code>, containing the JSON representation of that <code>Map</code>. Others,
like <code>MongoDBDAO</code>, preserve the format of objects and they are stored as JSON documents (not a JSON string).
When you’re implementing your own <code>DAO</code> classes, it’s entirely up to you to decide how <code>ParaObjects</code> will be persisted.
There are absolutely no restrictions for this, as long as the data comes back as a <code>Map</code> at the point of retrieval.</p>
<p>It’s important to mention that serialization/deserialization can happen in both the server and the client.
The Para clients will read your custom classes and serialize them to JSON before sending them to the Para server.
When you define your custom classes on the clientside, the server doesn’t know about them - they are simply converted to
<code>Sysprop</code> (a container class) objects when received from the client. This, however, is only done for practical reasons
on the serverside. It does not mean that on the clientside, the objects returned from the server will be
deserialized to <code>Sysprop</code>, on the contrary, they will be deserialized to your custom classes.</p>
<h3 id="annotations">Annotations</h3>
<p>Para uses annotations to mark what attributes of a class need to be saved. There are several annotations that Para uses
but the two main ones are <code>@Stored</code> and <code>@Locked</code>.</p>
<p><code>@Stored</code> tell Para that an attribute needs to be persisted but
that field should not be declared as <code>transient</code> otherwise it will be skipped.</p>
<p><code>@Locked</code> is used as a filter for those
attributes that are read-only like <code>type</code> and <code>id</code>. These are created once and never change so when calling <code>update()</code>
they will be skipped.</p>
<p><strong>Note:</strong> All of the annotations above are <strong>ignored</strong> on the clientside and not supported by <code>ParaClient</code>, yet. By default
all fields declared on the clientside or through the API will be stored and <strong>not</strong> locked, i.e. they can be updated.</p>

				</section>
			</article>
			<a id="010-userdefined" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>User-defined classes</h2>
				<section class="body  img-rounded">
					<p>Let’s say you have a class <code>Article</code> in your application that you wish to persist. You first implement the <code>ParaObject</code>
interface, then add a few data fields to it. Implementing the interface is trivial as the basic functionality of
the required methods is already implemented in the <code>CoreUtils</code>.</p>
<p>You need to specify which fields you want to be saved by adding the <code>@Stored</code> annotation. Additionally, you can add
the <code>@Locked</code> annotation to prevent a field from being updated (i.e. it can only be set on <code>create()</code>). This is useful
for fields that contain sensitive data, which should not be modified easily.</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ParaObject</span> </span>{
    <span class="hljs-meta">@Stored</span> <span class="hljs-keyword">private</span> String title;
    <span class="hljs-meta">@Stored</span> <span class="hljs-keyword">private</span> String text;
    <span class="hljs-meta">@Stored</span> <span class="hljs-keyword">private</span> Map&lt;?, ?&gt; someCustomProperty;
}</code></pre>
<p>When defining your custom properties (fields) you can either declare they as Java types like <code>List</code>, <code>Map</code>,
<code>String</code>, <code>boolean</code>, or use your own custom types.</p>
<p>You don’t have to define common fields like <code>id</code> or <code>name</code> because they are already defined in the parent class.
Now you can create a new article like so:</p>
<pre><code class="language-java">System.setProperty(<span class="hljs-string">"para.core_package_name"</span>, <span class="hljs-string">"com.erudika.para.core"</span>);

Article a = <span class="hljs-keyword">new</span> Article();
a.setTitle(<span class="hljs-string">"Some title"</span>);
a.setText(<span class="hljs-string">"text..."</span>);
<span class="hljs-comment">// the article is saved and a new id is generated</span>
String id = a.create();</code></pre>
<blockquote>
<p><strong>Important:</strong> Don’t forget to set <code>para.core_package_name</code> to point to the package where your <code>ParaObject</code> classes are.
Para will scan that package and will use those new definitions to serialize and deserialize objects.</p>
</blockquote>
<p>Updating and deleting is easy too:</p>
<pre><code class="language-java">a.setTitle(<span class="hljs-string">"A new title"</span>);
a.update();
<span class="hljs-comment">// or</span>
a.delete();</code></pre>
<p>When you call <code>create()</code> Para will intercept that call and automatically index and cache the object. Calling the methods
<code>update()</code> and <code>delete()</code> also get intercepted and will update or delete that object in/from the search index and
cache respectively.</p>
<p>If you want to read an object, first you have to get access to the <code>DAO</code> object. You can either:</p>
<ul>
<li>call <code>Para.getDAO()</code></li>
<li>get it by calling <code>CoreUtils.getInstance().getDao()</code></li>
<li><code>@Inject</code> it with <code>Para.injectInto()</code></li>
</ul>
<p>Then you can read an object using its id:</p>
<pre><code class="language-java"><span class="hljs-comment">// returns a single article or null</span>
Article readA = dao.read(id);</code></pre>
<p>You can also define custom types of objects through the REST API by changing the <code>type</code> property on your objects.
Keep in mind that the following are reserved words and they <em>should not</em> be used for naming your types (plural form included):
<strong>“search(es)”, “util(s)”</strong>.</p>
<blockquote>
<p>Note that you can create objects with custom types and fields <a href="#036-api-create">through the REST API</a> without having
to define them as Java classes like above. These custom objects will be based on the generic <code>Sysprop</code> class but
can have any number of custom properties (fields). When doing search on custom fields, add the “properties” prefix to
them, like <code>properties.myfield</code>.</p>
</blockquote>
<p>For example, lets create another custom <code>Article</code> object through the API. We’ll add to it a custom field called <code>author</code>:</p>
<pre><code>POST /v1/articles

{
 <span class="hljs-string">"appid"</span>: <span class="hljs-string">"myapp"</span>,
 <span class="hljs-string">"author"</span>: <span class="hljs-string">"Gordon Freeman"</span>
}</code></pre><p>This creates a new <code>Article</code> and indexes all fields including the custom field <code>author</code>. To search for objects through the
API, containing the <code>author</code> field we can do a request like this:</p>
<pre><code>GET /v1/articles/search?q=properties.author:Gordon*</code></pre><p>Note that we have <code>q=properties.author:...</code> instead of <code>q=author:...</code>. This is due to the fact that custom fields are
stored in Para using a nested <code>Map</code> called <code>properties</code> (see the <code>Sysprop</code> class).</p>

				</section>
			</article>
			<a id="011-apps" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Apps</h2>
				<section class="body  img-rounded">
					<p>Apps allow you to have separate namespaces and data models for different purposes. Each app lives in its own separate
database table and is independent from apps.</p>
<p>Each app has a unique identifier, like “my-custom-app”. When an object is created, Para will attach the app identifier
to it automatically. Apps also have a set of data types, as set of permissions and validation constraints.
Data types can be created on-the-fly, for example you can create a type called “article” and it will have be
available as a new API resource at <code>/v1/article</code> (and in plural form <code>/v1/articles</code>).</p>
<h3 id="creating-and-deleting-apps">Creating and deleting apps</h3>
<p>Initially Para creates a default root app with an <code>id</code> equal to the value of the <code>para.app_name</code>
configuration parameter. If you need to have only one app then you don’t need to do anything. If you want to create
multiple apps then you must call <code>Para.newApp()</code> or make an authenticated request to the API <code>GET /v1/_setup/{app_name}</code>.
This is a special API request and it <strong>must</strong> be signed with the keys of the <em>root app</em>.
Alternatively, download the <a href="https://github.com/Erudika/para-cli">Para CLI</a> and run:</p>
<pre><code class="language-sh">$ para-cli setup
$ para-cli new-app <span class="hljs-string">"my-app"</span> --name <span class="hljs-string">"My new app"</span></code></pre>
<p>Every app can delete itself through the API with <code>DELETE /v1/app/myapp</code>. Another way to do this is by programmatically
calling <code>app.delete()</code> from your code.</p>
<p>Currently Para organizes objects in <strong>one table per app</strong> and uses a single shared search index unless that app has
<code>sharingIndex</code> set to <code>false</code>. If this is the case then a separate search index is created for that app.
It is possible to make Para use a single database table for all apps by prefixing <code>id</code> fields
(e.g. <code>app1_id1</code>: <code>{data}</code>) but this is not yet implemented.</p>
<p>You can also set custom settings for each app through the settings API <code>/v1/_settings</code> using <code>GET</code>, <code>PUT</code> and <code>DELETE</code>.
These can be OAuth credentials for social apps or other configuration details that are specific for the app.</p>
<h3 id="social-sign-in-for-apps">Social sign-in for apps</h3>
<p>Apps can have their own separate credentials for social sign-in, like an OAuth <code>app_id</code> and <code>secret</code>. These
are stored within the app object and can be used to create/login users to the app that has these credentials.
For example, we can send a request to <code>/facebook_auth?appid=myapp</code> where <code>myapp</code> is not the root app. This will tell
Para to look for Facebook keys inside that app. This allows for each Para app to have a corresponding Facebook app
(or any other app on the supported social networks, see <a href="#034-api-jwt-signin">JWT sign in</a>).</p>
<p>Additionally, we’ve added two custom settings which can tell Para where to redirect users after a successful login or a
login failure. These are <code>signin_success</code> and <code>signin_failure</code> (see <a href="#050-api-settings-get">Custom Settings</a>).
Here’s an example of all settings combined:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"fb_app_id"</span>: <span class="hljs-string">"123U3VTNifLPqnZ1W2"</span>,
    <span class="hljs-string">"fb_secret"</span>: <span class="hljs-string">"YXBwOnBhcmE11234151667"</span>,
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"/dashboard"</span>,
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"/signin?error"</span>
}</code></pre>
<p>Note that these settings will work for the traditional authentication flow through the browser and the standard
endpoints <code>/facebook_auth?appid=myapp</code>, <code>/github_auth?appid=myapp</code>, <code>/google_auth?appid=myapp</code>, and the rest.
The other way of authenticating users is through the JWT sign in API which requires an OAuth access token and doesn’t
require stored OAuth credentials - these are not even checked because we are supplied with a ready-to-use token.</p>

				</section>
			</article>
			<a id="011-permissions" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Resource permissions</h2>
				<section class="body  img-rounded">
					<p>When creating new users, we usually want to specify which resources they can access. This is why we added a few methods
for adding and removing resource permissions. Each app can have any number of users and each user can have a set of
permissions for a given resource. Resources are identified by name, for example the <code>_batch</code> resource would represent
requests going to <code>/v1/_batch</code>.</p>
<p>There are several methods and flags which control which requests can go through. These are:</p>
<ul>
<li><code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code> - use these to allow a certain method explicitly</li>
<li><code>?</code> - use this to enable public (unauthenticated) access to a resource</li>
<li><code>-</code> - use this to deny all access to a resource</li>
<li><code>*</code> - wildcard, allow all request to go through</li>
<li><code>OWN</code> - allow subject to only access objects they created</li>
</ul>
<p>Let’s look at a few example scenarios where we give users permission to access the <code>_batch</code>. We have two users - user
one with <code>id = 1</code> and user two with <code>id = 2</code>. We’ll use the following methods:</p>
<pre><code class="language-java"><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">grantResourcePermission</span><span class="hljs-params">(String subjectid, String resourcePath, EnumSet&lt;AllowedMethods&gt; permission)</span></span>;
<span class="hljs-comment">// when not using the Java client - permission is an array of HTTP methods</span>
<span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">grantResourcePermission</span><span class="hljs-params">(String subjectid, String resourcePath, String[] permission)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">revokeResourcePermission</span><span class="hljs-params">(String subjectid, String resourcePath)</span></span>;</code></pre>
<p>These methods allow the use of wildcards <code>*</code> for <code>subjectid</code> and <code>resourcePath</code> arguments.</p>
<p><strong>Scenario 1:</strong> Give all users permission to <code>READ</code> - this allows them to make <code>GET</code> requests:</p>
<pre><code class="language-java">app.grantResourcePermission(<span class="hljs-string">"*"</span>, <span class="hljs-string">"_batch"</span>, AllowedMethods.READ);</code></pre>
<p><strong>Scenario 2:</strong> Give user <code>1</code> <code>WRITE</code> permissions - allow HTTP methods <code>POST, PUT, PATCH, DELETE</code>:</p>
<pre><code class="language-java">app.grantResourcePermission(<span class="hljs-string">"1"</span>, <span class="hljs-string">"_batch"</span>, AllowedMethods.WRITE);</code></pre>
<p>Also you could grant permissions on specific objects like so:</p>
<pre><code class="language-java">paraClient.grantResourcePermission(<span class="hljs-string">"user1"</span>, <span class="hljs-string">"posts/123"</span>, AllowedMethods.DELETE);</code></pre>
<p>This will allow <code>user1</code> to delete only the post object with an <code>id</code> of <code>123</code>.</p>
<p><strong>Scenario 3:</strong> Give user <code>2</code> permission ot only make <code>POST</code> requests:</p>
<pre><code class="language-java">app.grantResourcePermission(<span class="hljs-string">"2"</span>, <span class="hljs-string">"_batch"</span>, AllowedMethods.POST);</code></pre>
<p>Note that all users still have the <code>READ</code> permissions because permissions are compounded.
However, when <code>grantResourcePermission()</code> is called again on the same subject and resource, the new
permission will overwrite the old one.</p>
<p><strong>Scenario 4:</strong> Revoke all permissions for user <code>1</code> except <code>READ</code>:</p>
<pre><code class="language-java">app.revokeAllResourcePermissions(<span class="hljs-string">"1"</span>);</code></pre>
<p><strong>Scenario 5:</strong> Grant full access or deny all access to everyone:</p>
<pre><code class="language-java">app.grantResourcePermission(<span class="hljs-string">"*"</span>, <span class="hljs-string">"*"</span>, AllowedMethods.ALL);</code></pre>
<pre><code class="language-java">app.grantResourcePermission(<span class="hljs-string">"*"</span>, <span class="hljs-string">"*"</span>, AllowedMethods.NONE);</code></pre>
<p><strong>Scenario 6:</strong> Grant full access to user <code>1</code> but only to the objects he/she created. In this case user <code>1</code> will be able
to create, edit, delete and search <code>todo</code> objects but only those which he/she created, i.e. <code>creatorid == 1</code>.</p>
<pre><code class="language-java">app.grantResourcePermission(<span class="hljs-string">"1"</span>, <span class="hljs-string">"todo"</span>, [<span class="hljs-string">"*"</span>, <span class="hljs-string">"OWN"</span>]);
app.grantResourcePermission(<span class="hljs-string">"1"</span>, <span class="hljs-string">"todo/*"</span>, [<span class="hljs-string">"*"</span>, <span class="hljs-string">"OWN"</span>]);</code></pre>
<p>To get all permissions for both users call:</p>
<pre><code class="language-java">app.getAllResourcePermissions(<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>);</code></pre>
<p>The default initial policy for all apps is “deny all” which means that new users won’t be able to access any resources,
except their own object and child objects, unless given explicit permission to do so.</p>
<p>You can also create “anonymous” permissions to allow unauthenticated users to access certain resources:</p>
<pre><code class="language-java">app.grantResourcePermission(<span class="hljs-string">"*"</span>, <span class="hljs-string">"public/resource"</span>, AllowedMethods.READ, <span class="hljs-keyword">true</span>);</code></pre>
<p>This resource is now public but to access it you still need to specify your access key as a parameter:</p>
<pre><code>GET /v1/public/resource?accessKey=app:myapp</code></pre><p>Alternatively, on the client-side, you can set the <code>Authorization</code> header to indicate that the request is anonymous:</p>
<pre><code>Authorization: Anonymous app:myapp</code></pre><p>The special permission method <code>?</code> means that anyone can do a <code>GET</code> request on <code>public/resource</code>.</p>
<p>To check if user <code>1</code> is allowed to access a particular resource call:</p>
<pre><code class="language-java"><span class="hljs-comment">// returns 'false'</span>
app.isAllowedTo(<span class="hljs-string">"1"</span>, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"GET"</span>);</code></pre>

				</section>
			</article>
			<a id="011-validations" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Validations</h2>
				<section class="body  img-rounded">
					<p>Para supports JSR-303 validation annotations and also allows you to define validation constraints in two different ways.
One way is to attach annotations to fields in Java classes. The other way is by using the constraints API to add
validation constraints to any object, be it core or user-defined. This method is more flexible as it allows you to
validate any property of any object.</p>
<p>The built-in constraints are: </p>
<p><code>required</code>, <code>min</code>, <code>max</code>, <code>size</code>, <code>email</code>, <code>digits</code>, <code>pattern</code>, <code>false</code>, <code>true</code>, <code>future</code>, <code>past</code>, <code>url</code>.</p>
<p><strong>Note:</strong> Objects are validated on <code>create()</code> and <code>update()</code> operations only.</p>
<h3 id="annotation-based-validation-constraints">Annotation-based validation constraints</h3>
<p>You can use any of the JSR 303 annotations specified by the <code>javax.validation.constraints</code> package, part of Java EE.
Example:</p>
<pre><code class="language-java"><span class="hljs-meta">@Stored</span> <span class="hljs-meta">@NotBlank</span> <span class="hljs-meta">@Email</span>
<span class="hljs-keyword">private</span> String email;</code></pre>
<p>This will tell Para to validate that field and check that it actually contains an email. If the validation fails, the
object containing that field will not be created or updated.</p>
<h3 id="user-defined-validation-constraints">User-defined validation constraints</h3>
<p>Annotations work fine for most objects but are less useful when we want to define objects through the API.
For this purpose we can use the constraints API:</p>
<pre><code class="language-java"><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">addValidationConstraint</span><span class="hljs-params">(String type, String field, Constraint c)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">removeValidationConstraint</span><span class="hljs-params">(String type, String field, String constraintName)</span></span>;</code></pre>
<p>To create a constraint you can use the static methods provided by the <code>Constraint</code> class. For example calling
<code>Constraint.email()</code> will return a new constraint object for checking email addresses.</p>
<p>We can use these methods to define constraints on custom types and fields that are not yet defined or are created by
the API.</p>
<p>To manually validate an object you can use:</p>
<pre><code class="language-java">String[] errors = ValidationUtils.validateObject(App app, ParaObject po);</code></pre>
<p>Or through <code>ParaClient</code>:</p>
<pre><code class="language-java"><span class="hljs-comment">// return a JSON object with all validation constraints</span>
paraClient.validationConstraints();</code></pre>
<p>The returned string array contains 0 elements if the <code>po</code> is valid or a list of errors that were encountered on validation.</p>
<h3 id="integration-with-the-client-side">Integration with the client-side</h3>
<p>You can easily implement client-side validation by getting the JSON object containing all validation constraints for
all Para classes.</p>
<pre><code class="language-java">String jsonValidations = ValidationUtils.getAllValidationConstraints(App app);</code></pre>
<p>This returned JSON is in the following format (note that type names are all in lowercase):</p>
<pre><code class="language-js"><span class="hljs-string">'user'</span>: {
    <span class="hljs-string">'email'</span>: {
        <span class="hljs-string">'email'</span>: {
            <span class="hljs-string">'message'</span>: <span class="hljs-string">'messages.email'</span>
        },
        <span class="hljs-string">'required'</span>: {
            <span class="hljs-string">'message'</span>: <span class="hljs-string">'messages.required'</span>
        }
    },
    <span class="hljs-string">'identifier'</span>: {
        <span class="hljs-string">'required'</span>: {
            <span class="hljs-string">'message'</span>: <span class="hljs-string">'messages.required'</span>
        }
    }
    ...
},
...</code></pre>
<p>This format used by the excellent JavaScript validation tool <a href="https://github.com/netceteragroup/valdr">Valdr</a> but can
easily be integrated with other client-side validators.</p>
<blockquote>
<p>Para uses <a href="http://hibernate.org/validator/">Hibernate Validator</a> for data validation.</p>
</blockquote>

				</section>
			</article>
			<a id="011-webhooks" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Webhooks</h2>
				<section class="body  img-rounded">
					<p>Webhook were implemented in <code>v1.32.0</code>. The implementation is fully asynchronous and uses a queue for decoupling
the message publishing from the actual processing and delivery of payloads. There’s a <code>LocalQueue</code> implementation which
holds messages in memory and a <code>LocalRiver</code> (worker) which periodically pulls messages from the queue and forwards them
to their destinations. The <code>AWSQueue</code> class implements webhooks processing based on AWS SQS queues and is recommended
for production use. Any other queue server can be potentially supported via a plugin which implements the <code>Queue</code>
interface.</p>
<p>To enable the webhooks functionality in Para, add <code>para.webhooks_enabled = true</code> in your <code>application.conf</code>.</p>
<p>The <code>Webhook</code> class is used for storing webhook metadata. Each <code>Webhook</code> object represents a destination which will
receive a POST request with a certain payload. The payload is determined by the type of event to which that webhook
is subscribed to. For example, a webhook might be a subscribed to all <code>update</code> events in Para, and also it might only
be interested in updated <code>user</code> objects. So we can register a new webhook like so:</p>
<pre><code>POST /v1/webhooks
{
    <span class="hljs-string">"urlEncoded"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"update"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"targetUrl"</span>: <span class="hljs-string">"https://destination.url"</span>,
    <span class="hljs-string">"secret"</span>: <span class="hljs-string">"secret"</span>,
    <span class="hljs-string">"typeFilter"</span>:<span class="hljs-string">"user"</span>
}</code></pre><p>The <code>urlEncoded</code> parameter sets the <code>Content-Type</code> header for the payload. By default that’s
<code>application/x-www-form-urlencoded</code>, but if <code>urlEncoded</code> is false, the content type will be <code>application/json</code>.</p>
<p>There are 6 event types: <code>update</code>, <code>create</code>, <code>delete</code>, <code>updateAll</code>, <code>createAll</code>, <code>deleteAll</code>. You can also register
webhooks which are subscribed to all events on all types in Para:</p>
<pre><code>POST /v1/webhooks
{
    <span class="hljs-string">"active"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"urlEncoded"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"update"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"create"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"delete"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"updateAll"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"createAll"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"deleteAll"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"targetUrl"</span>: <span class="hljs-string">"https://destination.url"</span>,
    <span class="hljs-string">"secret"</span>: <span class="hljs-string">"secret"</span>,
    <span class="hljs-string">"typeFilter"</span>:<span class="hljs-string">"*"</span>
}</code></pre><p>If the typeFilter is either blank or <code>*</code>, all selected events will be sent to the destination, regardless of the object
type.</p>
<p>Webhooks with too many failed deliveries (10 by default) will be disabled automatically. The number of maximum failed
attemts can be adjusted like so:</p>
<pre><code>para.max_failed_webhook_attempts = <span class="hljs-number">15</span></code></pre><p>Events are intercepted by the <code>WebhookIOListener</code> which listens for mutating <code>DAO</code> methods and after each method
invocation sends a message to the queue for all registered <code>Webhook</code> objects. Each message is signed with <code>HmacSHA256</code>
which is sent to the destination in a <code>X-Webhook-Signature</code> header. The signature takes the webhook secret and uses it
to sign only the <code>payload</code> JSON string (whitespace removed). The worker node (might be the same machine) then pulls
messages from the queue and sends them to their destinations using a <code>POST</code> request. Here’s an example <code>POST</code> request:</p>
<pre><code>POST /test HTTP/<span class="hljs-number">1.1</span>
Host: parawebhooks.requestcatcher.com
Accept-Encoding: gzip,deflate
Connection: Keep-Alive
Content-Length: <span class="hljs-number">327</span>
Content-Type: application/json
User-Agent: Para Webhook Dispacher <span class="hljs-number">1.32</span><span class="hljs-number">.0</span>
X-Para-Event: update
X-Webhook-Signature: FFEma4/Uc5gGCs974cJNa873kzsumFgqPGVIGOEexmY=

{<span class="hljs-string">"appid"</span>:<span class="hljs-string">"scoold"</span>,<span class="hljs-string">"event"</span>:<span class="hljs-string">"update"</span>,<span class="hljs-string">"items"</span>:[{<span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:acpi"</span>,<span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1486848081865</span>,<span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,<span class="hljs-string">"appid"</span>:<span class="hljs-string">"scoold"</span>,<span class="hljs-string">"updated"</span>:<span class="hljs-number">1561644547996</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"ParaObject tag:acpi"</span>,<span class="hljs-string">"votes"</span>:<span class="hljs-number">2</span>,<span class="hljs-string">"version"</span>:<span class="hljs-number">0</span>,<span class="hljs-string">"stored"</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">"indexed"</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">"cached"</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">"tag"</span>:<span class="hljs-string">"acpi"</span>,<span class="hljs-string">"count"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/acpi"</span>,<span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>}],<span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1561644548430</span>}</code></pre><p>The format of the message is this:</p>
<pre><code>{
    <span class="hljs-string">"appid"</span>: <span class="hljs-string">"myapp"</span>,
    <span class="hljs-string">"event"</span>: <span class="hljs-string">"create"</span>,
    <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1486848081865</span>,
    <span class="hljs-string">"items"</span>: [{}, ...]
}</code></pre><p>The receiving party should verify the signature of each payload by computing <code>Base64(HmacSHA256(payload, secret))</code>.</p>
<h3 id="custom-events">Custom events</h3>
<p>In addition to the standard <code>create</code>, <code>update</code>, <code>delete</code> events you can create webhooks which are subscribed to custom
events. For example you can have a webhook which is subscribed to events like <code>post.like</code> or <code>user.mention</code>. These events
are triggered from the code of your application using the Para API. Let’s say we have a post which is liked by someone -
the code which handles the like event will notify Para that <code>post.like</code> has occured along with a custom payload, in this
case the post object and the object of the user who liked the post. Para will then dispatch that payload to the appropriate
target URLs (subscribers). Custom events allow you to create applications which follow the best practices of
<a href="https://resthooks.org/">RESTHooks</a> and this makes it easy to integrate them with other applications (see Zapier).
Here’s an example request which would trigger a custom event <code>post.like</code> via the API:</p>
<pre><code>POST /v1/webhooks
{
    <span class="hljs-string">"triggeredEvent"</span>: <span class="hljs-string">"post.like"</span>,
    <span class="hljs-string">"customPayload"</span>: {
        <span class="hljs-string">"post_id"</span>: <span class="hljs-string">"5129509320"</span>,
        <span class="hljs-string">"title"</span>: <span class="hljs-string">"Hello world"</span>,
        <span class="hljs-string">"liked_by"</span>: {
            <span class="hljs-string">"user_id"</span>: <span class="hljs-string">"581703234"</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"Gordon"</span>
        }
    }
}</code></pre><p>The response object returned from this request should be ignored.</p>

				</section>
			</article>
			<a id="012-dao" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>DAO interface</h2>
				<section class="body  img-rounded">
					<p>The <code>DAO</code> interface declares the following methods:</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>method</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>String create(P obj)</code></td><td> Persists an object. A new <code>id</code> <em>should</em> be generated if absent.</td></tr>
        <tr><td></p>
<p><code>P read(String key)</code></td><td> Reads an object from the data store for a given <code>id</code>. Returns <code>null</code> if the object for this <code>id</code> is missing.</td></tr>
        <tr><td></p>
<p><code>void update(P obj)</code></td><td> Updates an object. Implementations of this method <em>should</em> set a timestamp to the field <code>updated</code>. </td></tr>
        <tr><td></p>
<p><code>void delete(P obj)</code></td><td> Deletes an object completely (the opposite of <code>create</code>).</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; readAll(List&lt;String&gt; keys, boolean all)</code></td><td> Batch operation for <code>read()</code>. If <code>all</code> is <code>false</code>, only the <code>id</code> and <code>type</code> columns should be returned.</td></tr>
        <tr><td></p>
<p><code>void createAll(List&lt;P&gt; objects)</code></td><td> Batch operation for <code>create()</code>.</td></tr>
        <tr><td></p>
<p><code>void updateAll(List&lt;P&gt; objects)</code></td><td> Batch operation for <code>update()</code>.</td></tr>
        <tr><td></p>
<p><code>void deleteAll(List&lt;P&gt; objects)</code></td><td> Batch operation for <code>delete()</code>.</td></tr>
    </tbody></p>
</table>

<h3 id="optimistic-locking">Optimistic locking</h3>
<p>Each <code>DAO</code> implementation is responsible for supporting optimistic locking if the underlying database is capable of
performing conditional write operations natively. The <code>ParaObject</code> interface contains a <code>version</code> field which can be
used to store information about the current version of each object and it’s value should be incremented by the database,
if an update operation succeeds. The locking mechanism is simple - the database checks if the supplied object version
matches the one stored in the database. If the two versions match, the update operation is executed, otherwise it fails.
A <code>version</code> value of <code>-1</code> indicates a failed update and it’s the responsibility of the API clients to handle such failures.
If the <code>version</code> value is positive, the update has been successful, and <code>0</code> means the field is unused or the object
has not been persisted yet.</p>
<p>Optimistic locking is enabled for each <code>ParaObject</code> individually by setting its <code>version</code> field to a positive value
different than 0. To disable, set the <code>version</code> field back to 0.</p>
<blockquote>
<p>A <code>DAO</code> object only deals with storing objects in a database. It is not concerned with relationships between objects or
constraint validation or any other operations like caching, indexing, etc.</p>
</blockquote>
<h3 id="data-consistency-and-resilience">Data consistency and resilience</h3>
<p>Para is designed to store data in more than one place - a database and a search index. Both the database and index may
be configured to have multiple replicas of the same data to ensure resilience to data loss. If the database loses its
data, we could still recover it from the search index with <code>para.read_from_index = true</code>. If the index is corrupted, we
can simply rebuild it with the request <code>POST /v1/_reindex</code>.</p>
<p>Para makes an effort to keep the database and index in sync at all times but there might be occasional failures in
either of the two layers and we end up with inconsistent data. So when an object is indexed but does not appear in the
database, Para will print out a warning log message. If an object is persisted to DB but an error occurs during indexing,
you have the option to set <code>para.es.fail_on_indexing_errors</code> (Elasticsearch only). This will cascade an exception back to
the client and it can decide whether to revert the operation or try again. Additionally, if an update operation fails due
to a version mismatch (see optimistic locking above), Para automatically prevents the indexing and caching of that object.
In relation to this, <code>para.fail_on_write_errors</code> is <code>true</code> by default, which means that if there’s any error returned
from the DB on write operations, all subsequent index operations will be skipped.</p>

				</section>
			</article>
			<a id="013-cassandra" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Cassandra</h2>
				<section class="body  img-rounded">
					<p>The Cassandra plugin adds <a href="https://github.com/Erudika/para-dao-cassandra">support for Apache Cassandra</a>.
The class <code>CassandraDAO</code> is a <code>DAO</code> implementation and is responsible for connecting to a <a href="https://cassandra.apache.org/">Cassandra</a>
cluster and storing/retrieving objects (items) to/from it. All operations are carried out using the latest Cassandra
Java Driver by DataStax, compatible with Cassandra 3.x.</p>
<p>There are several configuration properties for Cassandra (these go in your <code>application.conf</code> file):</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.cassandra.hosts</code></td><td> Comma-separated server hostnames (contact points). Defaults to <code>localhost</code>.</td></tr>
        <tr><td></p>
<p><code>para.cassandra.port</code></td><td> The server port to connect to. Defaults to <code>9042</code>.</td></tr>
        <tr><td></p>
<p><code>para.cassandra.keyspace</code></td><td> The keyspace name that Para will use. Default is equal to <code>para.app_name</code>.</td></tr>
        <tr><td></p>
<p><code>para.cassandra.user</code></td><td> The username with access to the database. Defaults to <code>&quot;&quot;</code>.</td></tr>
        <tr><td></p>
<p><code>para.cassandra.password</code></td><td> The password. Defaults to <code>&quot;&quot;</code>.</td></tr>
        <tr><td></p>
<p><code>para.cassandra.replication_factor</code></td><td> Replication factor for the keyspace. Defaults to <code>1</code>.</td></tr>
        <tr><td></p>
<p><code>para.cassandra.ssl_enabled</code></td><td> Enables the secure SSL/TLS transport. Defaults to <code>false</code>.</td></tr>
    </tbody></p>
</table>

<p>The plugin is on Maven Central. Here’s the Maven snippet to include in your <code>pom.xml</code>:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-dao-cassandra<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p>Alternatively you can download the JAR from the “Releases” tab above put it in a <code>lib</code> folder alongside the server
JAR file <code>para-x.y.z.jar</code>. Para will look for plugins inside <code>lib</code> and pick up the Cassandra plugin.</p>
<p>Finally, set the config property:</p>
<pre><code>para.dao = <span class="hljs-string">"CassandraDAO"</span></code></pre><p>This could be a Java system property or part of a <code>application.conf</code> file on the classpath.
This tells Para to use the Cassandra Data Access Object (DAO) implementation instead of the default.</p>
<p>See <a href="#008-plugins">Plugins</a> for more information about how you can create your own plugins.</p>
<blockquote>
<p>For more information about using Cassandra, see the <a href="https://cassandra.apache.org/doc/latest/">official docs</a>.</p>
</blockquote>

				</section>
			</article>
			<a id="013-dynamodb" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>DynamoDB</h2>
				<section class="body  img-rounded">
					<p>Para can work with DynamoDB by using the <code>AWSDynamoDAO</code> implementation. That class is responsible for connecting
to <a href="http://aws.amazon.com/dynamodb/">Amazon’s DynamoDB</a> server and storing/retrieving objects (items) to/from it.
All operations are carried out using the latest AWS Java SDK.</p>
<p><strong>Note:</strong> DynamoDB doesn’t support batch update requests so <code>AWSDynamoDAO</code> does not batch update requests.
It simply executes all update requests in a sequence.</p>
<p>The implementation adds a default prefix <code>para-</code> to DynamoDB tables, so if you have an app called “myapp” your table for
that will be called <code>para-myapp</code>.</p>
<p>This <code>DAO</code> implementation <strong>supports optimistic locking</strong> through conditional update expressions in DynamoDB.</p>
<p>It also supports server-side encryption (SSE, encryption-at-rest). This is turned off by default. To turn it on, set:</p>
<pre><code>para.dynamodb.sse_enabled = <span class="hljs-literal">true</span></code></pre><p><strong>Note:</strong> SSE will work for newly created tables only. Currently, you can’t enable encryption at rest on an existing table.
After encryption at rest is enabled, it <strong>can’t</strong> be disabled.</p>
<h3 id="table-sharing">Table sharing</h3>
<p>In v1.21, we added new functionality to <code>AWSDynamoDAO</code> which enables apps to share the same table. This is useful
for certain deployment scenarios where you have a large number of apps (and tables) which are rarely accessed and have
low throughput. This makes it expensive to run Para on many DynamoDB tables which remain underutilized for long periods
of time. So with table sharing you can reduce your DynamoDB bill to a minimum by having a shared table that contains
all the objects for all those apps. You can enable this feature by setting the following in your config:</p>
<pre><code>para.prepend_shared_appids_with_space = <span class="hljs-literal">true</span></code></pre><p>This will prepend the <code>appid</code> property with a space character for those apps that have <code>isSharingTable</code> set to <code>true</code>,
thus letting the <code>DAO</code> know that this app belongs to the shared table, instead of sending its data to a separate table.
The shared table name is controlled by <code>para.shared_table_name</code> and defaults to “0”.</p>
<p>The shared table keys are a combination of <code>appid</code> and <code>id</code> (e.g. <code>myapp_679334060962615296</code>). Para will
also automatically create a global secondary index (GSI) on the shared table, with a primary key <code>appid</code> and secondary
key <code>timestamp</code>, to facilitate queries like <code>dao.readPage()</code>.</p>
<p>See <a href="#006-modules">Modules</a> for more information about how you can override the default implementation.</p>
<blockquote>
<p>For more information about DyanamoDB see the
<a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction.html">documentation on AWS</a>.</p>
</blockquote>

				</section>
			</article>
			<a id="013-mongodb" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>MongoDB</h2>
				<section class="body  img-rounded">
					<p>Since v1.18.0 Para supports plugins and the the first official plugin adds <a href="https://github.com/Erudika/para-dao-mongodb">support for MongoDB</a>.
The class <code>MongoDBDAO</code> is a <code>DAO</code> implementation and is responsible for connecting to a <a href="https://www.mongodb.org/">MongoDB</a>
server and storing/retrieving objects (items) to/from it. All operations are carried out using the latest MongoDB
Java Driver compatible with MongoDB 3.2.</p>
<p>There are several configuration properties for MongoDB (these go in your <code>application.conf</code> file):</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.mongodb.uri</code></td><td> The client URI string. See
<a href="https://mongodb.github.io/mongo-java-driver/3.4/javadoc/com/mongodb/MongoClientURI.html">MongoClientURI</a>. Overrides
<code>host</code>, <code>port</code>, <code>user</code> and <code>password</code> if set. Defaults to blank.</td></tr>
        <tr><td></p>
<p><code>para.mongodb.host</code></td><td> The hostname of the MongoDB server. Defaults to <code>localhost</code>.</td></tr>
        <tr><td></p>
<p><code>para.mongodb.port</code></td><td> The server port to connect to. Defaults to <code>27017</code>.</td></tr>
        <tr><td></p>
<p><code>para.mongodb.database</code></td><td> The database name that Para will use. Default is equal to <code>para.app_name</code>.</td></tr>
        <tr><td></p>
<p><code>para.mongodb.user</code></td><td> The username with access to the database. Defaults to blank.</td></tr>
        <tr><td></p>
<p><code>para.mongodb.password</code></td><td> The password. Defaults to blank.</td></tr>
        <tr><td></p>
<p><code>para.mongodb.ssl_enabled</code></td><td> Enables the secure SSL/TLS transport. Defaults to <code>false</code>.</td></tr>
        <tr><td></p>
<p><code>para.mongodb.ssl_allow_all</code></td><td> Allows any hostname by skipping the certificate verification. Defaults to <code>false</code>.</td></tr>
    </tbody></p>
</table>

<p>The plugin is on Maven Central. Here’s the Maven snippet to include in your <code>pom.xml</code>:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-dao-mongodb<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p>Alternatively you can <a href="https://github.com/Erudika/para-dao-mongodb/releases">download the JAR</a> and put it in a
<code>lib</code> folder alongside the server JAR file <code>para-x.y.z.jar</code>. Para will look for plugins inside <code>lib</code> and pick up
the plugin.</p>
<p>Finally, set the config property:</p>
<pre><code>para.dao = <span class="hljs-string">"MongoDBDAO"</span></code></pre><p>This could be a Java system property or part of a <code>application.conf</code> file on the classpath.
This tells Para to use the MongoDB Data Access Object (DAO) implementation instead of the default.</p>
<p>See <a href="#008-plugins">Plugins</a> for more information about how you can create your own plugins.</p>
<blockquote>
<p>For more information about using MongoDB, see the <a href="https://docs.mongodb.org/manual/">official manual</a>.</p>
</blockquote>

				</section>
			</article>
			<a id="013-sql" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Generic SQL</h2>
				<section class="body  img-rounded">
					<p>Besides the default H2 implementation, there’s a <a href="https://github.com/Erudika/para-dao-sql">generic SQL</a> <code>DAO</code> plugin
which adds support for all the major RDBMS - MySQL/MariaDB, PostgreSQL and Microsoft SQL Server.
The class <code>SqlDAO</code> implements the <code>DAO</code> interface is responsible for connecting to an SQL server at a given URL.
All database connections are managed by <a href="https://github.com/brettwooldridge/HikariCP">HikariCP</a> - a lightweight,
production-ready, JDBC connection pool.</p>
<p>Before you can use this plugin, you need to find an download the right driver for your database. This is a small package
which must be loaded from the classpath along with the plugin and the HikariCP library. You also have to specify the
class name of the loaded driver in the main Para configuration file.</p>
<p>There are several configuration properties for this plugin (these go in your <code>application.conf</code> file):</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.sql.driver</code></td><td> The fully-qualified class name for your SQL driver. Defaults to <code>null</code>.</td></tr>
        <tr><td></p>
<p><code>para.sql.url</code></td><td> The server URL to connect to, <em>without</em> the <code>jdbc:</code> prefix. Defaults to <code>null</code>.</td></tr>
        <tr><td></p>
<p><code>para.sql.user</code></td><td> The username with access to the database. Defaults to <code>user</code>.</td></tr>
        <tr><td></p>
<p><code>para.sql.password</code></td><td> The DB password. Defaults to <code>secret</code>.</td></tr>
    </tbody></p>
</table>

<p>The plugin is on Maven Central. Here’s the Maven snippet to include in your <code>pom.xml</code>:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-dao-sql<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p>Alternatively you can <a href="https://github.com/Erudika/para-dao-sql/releases">download the JAR</a> and put it in a
<code>lib</code> folder alongside the server JAR file <code>para-x.y.z.jar</code>. Para will look for plugins inside <code>lib</code> and pick up
the plugin.</p>
<blockquote>
<p><strong>Important:</strong> You must download the appropriate JDBC driver package for your database and put it in the <code>lib/</code> folder.</p>
</blockquote>
<p>Then you have to set the <code>loader.path=lib</code> system property in order to make the Spring Boot launcher add that folder
to the classpath. For example:</p>
<pre><code>java -jar -Dconfig.file=./application.conf -Dloader.path=lib  para.jar</code></pre><p>Finally, set the config property:</p>
<pre><code>para.dao = <span class="hljs-string">"SqlDAO"</span></code></pre><p>This could be a Java system property or part of a <code>application.conf</code> file on the classpath.
This tells Para to use the SQL DAO implementation instead of the default.</p>
<h3 id="setting-the-database-server-url">Setting the database server URL</h3>
<p>The environment variable <code>para.sql.url</code> is required and provides the URL to connect to the SQL database.
The SQL DAO uses JDBC and will prefix your URL with the JDBC protocol, so you don’t need to include the JDBC
protocol in your URL path. For example, to connect to a MySQL server with URL <code>mysql://localhost:3306</code>,
the SQL DAO will prefix this URL with the JDBC protocol to form the full URL <code>jdbc:mysql://localhost:3306</code>.</p>
<p>The URL you specify should also include in it’s path the database to be used by Para. The SQL DAO will not
automatically create a <strong>database</strong> for you (though Para <em>does</em> create <strong>tables</strong> within your database automatically),
so you must use an existing database. For example, you cannot simply specify the URL to your MySQL cluster/server
(<code>mysql://localhost:3306</code>), but rather you need to specify the path to an existing database
(<code>mysql://localhost:3306/para</code>). Note that the user name and password you provide with <code>para.sql.user</code> and
<code>para.sql.password</code> should correspond to the specific database you specify in the URL, and that user should have
complete permissions within that database.</p>
<h3 id="schema">Schema</h3>
<blockquote>
<p><strong>BREAKING CHANGE:</strong> The schema has changed in v1.30.0 - columns <code>timestamp</code> and <code>updated</code> were removed,
column <code>json_updates</code> was added. <code>H2DAO</code> attempts to apply these changes automatically or error, but <code>SqlDAO</code> does not.</p>
</blockquote>
<p><strong>Execute the following statements one after another before switching to the new version:</strong></p>
<pre><code class="language-sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> {app_identifier} <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">COLUMN</span> <span class="hljs-built_in">timestamp</span>, <span class="hljs-keyword">updated</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> {app_identifier} <span class="hljs-keyword">ADD</span> json_updates <span class="hljs-keyword">NVARCHAR</span>;</code></pre>
<p>This is not required for tables created after v1.30.0.</p>
<p>Here’s the schema for each table created by Para:</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> {app_identifier} (
    <span class="hljs-keyword">id</span>                        <span class="hljs-keyword">NVARCHAR</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    <span class="hljs-keyword">type</span>                    <span class="hljs-keyword">NVARCHAR</span>,
    <span class="hljs-keyword">name</span>                    <span class="hljs-keyword">NVARCHAR</span>,
    parentid            <span class="hljs-keyword">NVARCHAR</span>,
    creatorid            <span class="hljs-keyword">NVARCHAR</span>,
    <span class="hljs-keyword">json</span>                    <span class="hljs-keyword">NVARCHAR</span>,
    json_updates    <span class="hljs-keyword">NVARCHAR</span>
)</code></pre>

				</section>
			</article>
			<a id="014-h2" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>H2 DB</h2>
				<section class="body  img-rounded">
					<p>This is the default database for object storage since v1.25. It is lightweight and embedded, which speeds up the
startup of the server. All tables are stored inside a <code>./data</code> folder by default. Keep in mind that each app has its
own table which is created automatically when the app is created.</p>
<p>The implementing class <code>H2DAO</code> is part of the <a href="https://github.com/Erudika/para-dao-sql">para-dao-sql</a> plugin.</p>
<p>There are several configuration properties for H2 (these go in your <code>application.conf</code> file):</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.db.dir</code></td><td> The data directory for storing DB files. Defaults to <code>./data</code>.</td></tr>
        <tr><td></p>
<p><code>para.db.hostname</code></td><td> The hostname of the server. Setting this will enable H2’s “server mode” and starts a TCP server. Defaults to blank.</td></tr>
        <tr><td></p>
<p><code>para.db.user</code></td><td> The username with access to the database. Defaults to <code>para</code>.</td></tr>
        <tr><td></p>
<p><code>para.db.password</code></td><td> The password. Defaults to <code>secret</code>.</td></tr>
        <tr><td></p>
<p><code>para.db.tcpServer</code></td><td> Parameters for the H2 TCP server. Defaults to blank.</td></tr>
    </tbody></p>
</table>

<h3 id="the-h2-web-console">The H2 web console</h3>
<p>Browsing the data stored in H2 is relatively simple. Any JDBC-compatible client will work. You can also download the
H2 <a href="http://www.h2database.com/html/download.html">JAR package</a> and execute the command <code>java -jar h2*.jar</code>. This will
open up the web console where you can open the Para DB file. The default credentials are:</p>
<ul>
<li>JDBC URL: jdbc:h2:file:/para_folder/data/para</li>
<li>User name: <code>para</code></li>
<li>Password: <code>secret</code></li>
</ul>
<p>The URL for your DB file will be different and it should not end with <code>.mv.db</code>.</p>
<div class="text-center">
<img class="img-responsive" src="data:image/png;base64,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">
</div>

<h3 id="backup-restore-and-migration">Backup, restore and migration</h3>
<p>To make a backup copy of the entire Para dabatase, including all child app tables, run this command:</p>
<pre><code>java -cp h2*.jar org.h2.tools.Script -url jdbc:h2:file:<span class="hljs-regexp">/para_folder/</span>data/para -user para -password secret -script para.zip -options compression zip</code></pre><p>To restore an existing backup, run:</p>
<pre><code>java -cp h2*.jar org.h2.tools.RunScript -url jdbc:h2:file:<span class="hljs-regexp">/para_folder/</span>data/para -user para -password secret -script para.zip -options compression zip</code></pre><p>When upgrading to a new version of the H2 library, you might get an exception like <code>Unsupported type 17 [1.4.200/3]</code> and
<code>java.lang.IllegalStateException: Unable to read the page at position 2080825755576522</code>. This means that you’re trying
to access an H2 database with a version incompatible with the H2 version used by the <code>para-dao-sql</code> plugin.
You can either downgrade the plugin version or migrate the H2 database to the new version.</p>
<p>Migrating an old version of the H2 database to a new one requires you to first backup the data using the
<strong>old</strong> H2 engine JAR, then restore the data using the <strong>new</strong> engine JAR like so:</p>
<ol>
<li>Stop Para</li>
<li>Open a terminal in the <code>para_folder/data</code> directory</li>
<li>Download the H2 JARs and backup the <code>para</code> database:<pre><code class="language-sh">$ java -cp h2-{OLD_H2_VERSION}.jar org.h2.tools.Script -url jdbc:h2:./para -user para -password secret -script para.sql</code></pre>
</li>
<li>Delete the old files and create a new <code>para</code> database using the Shell tool:<pre><code class="language-sh">$ rm para.mv.db para.trace.db
$ java -cp h2-{NEW_H2_VERSION}.jar org.h2.tools.Shell</code></pre>
</li>
<li>Restore the backup to the newly created <code>para</code> database<pre><code class="language-sh">$ java -cp h2-{NEW_H2_VERSION}.jar org.h2.tools.RunScript -url jdbc:h2:./para -user para -password secret -script para.sql</code></pre>
</li>
<li>Start Para again</li>
</ol>
<blockquote>
<p>This implementation is production-ready and ideal for local development and testing.</p>
</blockquote>

				</section>
			</article>
			<a id="015-search" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Search interface</h2>
				<section class="body  img-rounded">
					<p>Para indexes objects based on their type. For example, a <code>User</code> objects has a <code>type</code> field with the value “user”.
Most of the search methods below ask for a <code>type</code> to search for (i.e. the <code>type</code> field acts as a filter).</p>
<p>The <code>Search</code> interface defines the following methods used for search:</p>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>P findById(String id)</code></td></tr><tr><td> Returns the object with the given <code>id</code> from the index or <code>null</code>.</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findByIds(List&lt;String&gt; ids)</code></td></tr><tr><td> Returns all objects for the given ids. </td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findNearby(String type, String query, int radius, double lat, double lng)</code></td></tr><tr><td> Location-based search query.</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findPrefix(String type, String field, String prefix)</code></td></tr><tr><td> Searches for objects containing a field (property) that starts with the given prefix.</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findNestedQuery(String type, String field, String query)</code></td></tr><tr><td> Searches inside a nested field <code>nstd</code> (a list of objects).</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findQuery(String type, String query)</code></td></tr><tr><td> The main search method. Follows the Lucene query parser syntax.</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findSimilar(String type, String filterKey, String[] fields, String liketext)</code></td></tr><tr><td> “More like this” search. </td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findTagged(String type, String[] tags)</code></td></tr><tr><td> Search for objects tagged with a set of tags.</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findTags(String keyword)</code></td></tr><tr><td> Shortcut method for listing all tags.</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findTermInList(String type, String field, List&lt;?&gt; terms)</code></td></tr><tr><td> Searches for objects containing any of the terms in the given list (matched exactly).</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findTerms(String type, Map&lt;String, ?&gt; terms, boolean matchAll)</code></td></tr><tr><td> Searches for objects containing all of the specified terms (matched exactly)</td></tr>
        <tr><td></p>
<p><code>List&lt;P&gt; findWildcard(String type, String field, String wildcard)</code></td></tr><tr><td> A wildcard query like “example*”.</td></tr>
    </tbody></p>
</table>

<p>All methods accept an optional <code>Pager</code> parameter for paginating and sorting the search results.</p>
<p>Also there are a few methods for indexing and unindexing objects but you should avoid calling them directly.
These methods are:</p>
<ul>
<li><code>void index(ParaObject obj)</code></li>
<li><code>void indexAll(List&lt;P&gt; objects)</code></li>
<li><code>void unindex(ParaObject obj)</code></li>
<li><code>void unindexAll(List&lt;P&gt; objects)</code></li>
</ul>
<blockquote>
<p>You should <em>not</em> index/unindex your objects manually - Para does this for you.</p>
</blockquote>

				</section>
			</article>
			<a id="016-elasticsearch" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Elasticsearch</h2>
				<section class="body  img-rounded">
					<p><strong>Now part of the <a href="https://github.com/erudika/para-search-elasticsearch">para-search-elasticsearch</a> plugin.</strong></p>
<p>Elasticsearch is the right choice as the search engine for Para in production. It supports Elasticsearch v7+ and
uses the high level REST client (default).</p>
<blockquote>
<p>Support for the transport client has been removed as it has been deprecated in Elasticsearch 7.0.</p>
</blockquote>
<p>The <code>Search</code> interface is implemented in the <code>ElasticSearch</code> class.</p>
<p>There are several configuration properties for Elasticsearch (these go in your <code>application.conf</code> file):</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.cluster_name</code></td><td> Elasticsearch cluster name. Default is <code>para-prod</code> when running in production.</td></tr>
        <tr><td></p>
<p><code>para.es.use_nested_custom_fields</code></td><td> Switches between “normal” and “nested” indexing modes. Defaults to <code>false</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.async_enabled</code></td><td> Asynchronous operation when indexing/unindexing. Defaults to <code>false</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.shards</code></td><td> The number of shards per index. Used when creating an new index. Default is <code>5</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.replicas</code></td><td> The number of copies of an index. Default is <code>0</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.auto_expand_replicas</code></td><td> Automatically make a replica copy of the index to the number of nodes specified. Default is <code>0-1</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.restclient_scheme</code></td><td> Scheme (for REST client). Default is <code>https</code> in production, <code>http</code> otherwise.</td></tr>
        <tr><td></p>
<p><code>para.es.restclient_host</code></td><td> ES server host (for REST client). Default is <code>localhost</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.restclient_port</code></td><td> ES server port (for REST client). Default is <code>9200</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.transportclient_host</code></td><td> <strong>DEPRECATED</strong> The hostname of the Elasticsearch instance or cluster head node to connect to. Default is <code>localhost</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.transportclient_port</code></td><td> <strong>DEPRECATED</strong> The port of the Elasticsearch instance or cluster head node to connect to. Default is <code>9300</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.track_total_hits</code></td><td> If <code>true</code>, total hits are always counted accurately (slower queries), otherwise they are counted accurately up to 10000 documents (default, faster queries). If set to an integer, the results are counted accurately up to that integer. Default is blank.</td></tr>
        <tr><td></p>
<p><code>para.es.fail_on_indexing_errors</code></td><td> If enabled, throws an exception if an error occurs during indexing operations. This will cascade back to clients as HTTP <code>500</code>. Default is <code>false</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.bulk.size_limit_mb</code></td><td> <code>BulkProcessor</code> flush threshold in terms of megabytes. Default is <code>5</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.bulk.action_limit</code></td><td> <code>BulkProcessor</code> flush threshold in terms of batch size. Default is <code>1000</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.bulk.concurrent_requests</code></td><td> <code>BulkProcessor</code> concurrent requests (<code>0</code> means synchronous execution). Default is <code>1</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.bulk.flush_interval_ms</code></td><td> <code>BulkProcessor</code> flush interval in milliseconds. Default is <code>5000</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.bulk.backoff_initial_delay_ms</code></td><td> <code>BulkProcessor</code> inital backoff delay in milliseconds. Default is <code>50</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.bulk.max_num_retries</code></td><td> <code>BulkProcessor</code> number of retries. Default is <code>8</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.bulk.flush_immediately</code></td><td> If set to <code>true</code>, <code>BulkProcessor</code> will flush immediately on each request, concurrently (in another thread). Default is <code>true</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.sign_requests_to_aws</code></td><td> If enabled, requests will be signed using the AWS V4 algorithm. Default is <code>false</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.aws_region</code></td><td> Used only for the purposes of signing requests to AWS. Default is <code>null</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.proxy_enabled</code></td><td> Enables the Elasticsearch proxy endpoint. Default is <code>false</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.proxy_path</code></td><td> The path to the proxy endpoint. Default is <code>_elasticsearch</code>.</td></tr>
        <tr><td></p>
<p><code>para.es.root_index_sharing_enabled</code></td><td> Enable/disable root index sharing by child apps with <code>isSharingIndex</code> set to <code>true</code>. Default is <code>false</code>.</td></tr>
    </tbody></p>
</table>

<p>The plugin is on Maven Central. Here’s the Maven snippet to include in your <code>pom.xml</code>:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-search-elasticsearch<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p><strong>Note:</strong> There’s a fork of the plugin which is compatible only with the Elasticsearch 5.x branch and it’s missing
some of the latest features like AWS Elasticsearch support and it uses <strong>only the legacy transport client</strong>.
The project’s repository is at <a href="https://github.com/erudika/para-search-elasticsearch-v5">Erudika/para-search-elasticsearch-v5</a>.
The Maven coordinates for the legacy plugin are:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-search-elasticsearch-v5<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>{version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
<p>Alternatively you can download the JAR from the “Releases” tab above put it in a <code>lib</code> folder alongside the server
JAR file <code>para-x.y.z.jar</code>. Para will look for plugins inside <code>lib</code> and pick up the Elasticsearch plugin.</p>
<p>Finally, set the config property:</p>
<pre><code>para.search = <span class="hljs-string">"ElasticSearch"</span></code></pre><p>This could be a Java system property or part of a <code>application.conf</code> file on the classpath.
This tells Para to use the Elasticsearch implementation instead of the default (Lucene).</p>
<h3 id="synchronous-versus-asynchronous-indexing">Synchronous versus Asynchronous Indexing</h3>
<p>The Elasticsearch plugin supports both synchronous (default) and asynchronous indexing modes.
For synchronous indexing, the Elasticsearch plugin will make a single, blocking request through the client
and wait for a response. This means each document operation (index, reindex, or delete) invokes
a new client request. For certain applications, this can induce heavy load on the Elasticsearch cluster.
The advantage of synchronous indexing, however, is the result of the request can be communicated back
to the client application. If the setting <code>para.es.fail_on_indexing_errors</code> is set to <code>true</code>, synchronous
requests that result in an error will propagate back to the client application with an HTTP error code.</p>
<p>The asynchronous indexing mode uses the Elasticsearch BulkProcessor for batching all requests to the Elasticsearch
cluster. If the asynchronous mode is enabled, all document requests will be fed into the BulkProcessor, which
will flush the requests to the cluster on occasion. There are several configurable parameters to control the
flush frequency based on document count, total document size (MB), and total duration (ms). Since Elasticsearch
is designed as a near real-time search engine, the asynchronous mode is highly recommended. Making occasional,
larger batches of document requests will help reduce the load on the Elasticsearch cluster.</p>
<p>The asynchronous indexing mode also offers an appealing feature to automatically retry failed indexing requests. If
your Elasticsearch cluster is under heavy load, it’s possible a request to index new documents may be rejected. With
synchronous indexing, the burden falls on the client application to try the indexing request again. The Elasticsearch
BulkProcessor, however, offers a useful feature to automatically retry indexing requests with exponential
backoff between retries. If the index request fails with a <code>EsRejectedExecutionException</code>, the request
will be retried up to <code>para.es.bulk.max_num_retries</code> times. Even if your use case demands a high degree
of confidence with respect to data consistency between your database and index, it’s still recommended to use
asynchronous indexing with retries enabled. If you’d prefer to use asynchronous indexing but have the BulkProcessor
flushed upon every invocation of index/unindex/indexAll/unindexAll, simply enabled <code>para.es.bulk.flush_immediately</code>.
When this option is enabled, the BulkProcessor’s flush method will be called immediately after adding the documents
in the request. This option is also useful for writing unit tests where you want ensure the documents flush promptly.</p>
<h3 id="indexing-modes">Indexing modes</h3>
<p>This plugin has two indexing modes: <strong>normal</strong> and <strong>nested</strong>. The nested mode was added after v1.28 to protect against
a possible <a href="https://discuss.elastic.co/t/can-nested-fields-prevent-mapping-explosion/95464">mapping explosion</a> which
happens when there are lots of objects with lots of different custom properties in them. This overloads the Elasticsearch
index metadata and can crash the whole cluster. This indexing mode affects only custom properties in <code>Sysprop</code> objects.</p>
<p>The old “normal” mode is suitable for most Para deployments, with just a few tenants or a single tenant
(one app per server). In this mode, Para objects are indexed without modification (all data types are preserved)
but this could lead to a mapping explosion.</p>
<p>The nested data structure for these two indexing modes is shown below:</p>
<pre><code><span class="hljs-comment">// NORMAL MODE                   // NESTED MODE</span>
{                                {
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"123"</span>,                     <span class="hljs-string">"id"</span>: <span class="hljs-string">"123"</span>,
  <span class="hljs-string">"appid"</span>: <span class="hljs-string">"para"</span>,                 <span class="hljs-string">"appid"</span>: <span class="hljs-string">"para"</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"custom"</span>,                <span class="hljs-string">"type"</span>: <span class="hljs-string">"custom"</span>,
  <span class="hljs-string">"properties"</span>: {                  <span class="hljs-string">"properties"</span>: [
    <span class="hljs-string">"key1"</span>: <span class="hljs-string">"value1"</span>,                {<span class="hljs-string">"k"</span>: <span class="hljs-string">"key1"</span>,         <span class="hljs-string">"v"</span>: <span class="hljs-string">"value1"</span>},
    <span class="hljs-string">"key2"</span>: {                        {<span class="hljs-string">"k"</span>: <span class="hljs-string">"key2-subkey1"</span>, <span class="hljs-string">"v"</span>: <span class="hljs-string">"subValue1"</span>},
      <span class="hljs-string">"subkey1"</span>: <span class="hljs-string">"subValue1"</span>         {<span class="hljs-string">"k"</span>: <span class="hljs-string">"numericKey3"</span>,  <span class="hljs-string">"vn"</span>: <span class="hljs-number">5</span>}
    },                             ],
    <span class="hljs-string">"numericKey3"</span>: <span class="hljs-number">5</span>               <span class="hljs-string">"_properties"</span>: <span class="hljs-string">"{\"key1\":\"value1\"}..."</span>
  }                              }
}</code></pre><p>Switching to the new nested indexing mode is done with the configuration property:</p>
<pre><code>para.es.es.use_nested_custom_fields = <span class="hljs-literal">true</span></code></pre><p>Another benefit, when using the “nested” mode, is the support for nested queries in query strings.
This is a really useful feature which, at the time of writing this, has not yet been implemented in Elasticsearch
(issue <a href="https://github.com/elastic/elasticsearch/issues/11322">elastic/elasticsearch#11322</a>). Even better, you can
query objects within nested arrays with pinpoint precision, e.g. <code>?q=properties.nestedArray[2].key:value</code>.
A nested query string query is detected if it contains a field with prefix <code>properties.*</code>.
Examples of query string queries:</p>
<pre><code>/v1/search?q=term AND properties.owner.age:[* TO <span class="hljs-number">34</span>]
/v1/search?q=properties.owner.name:alice OR properties.owner.pets[<span class="hljs-number">1</span>].name=whiskers</code></pre><p><strong>Note:</strong> Sorting on nested fields works only with numeric data. For example, sorting on a field <code>properties.year</code> will
work, but sorting on <code>properties.month</code> won’t (applicable only to the “nested” mode).</p>
<h3 id="calling-elasticsearch-through-the-proxy-endpoint">Calling Elasticsearch through the proxy endpoint</h3>
<p>You can directly call the Elasticsearch API through <code>/v1/_elasticsearch</code>. To enable it, set <code>para.es.proxy_enabled = true</code>.
Then you must specify the <code>path</code> parameter corresponds to the Elasticsearch API resource path. This is done for every
<code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>PATCH</code> or <code>DELETE</code> request to Elasticsearch. The endpoint accepts request to either
<code>/v1/_elasticsearch</code> or <code>/v1/_elasticsearch/{path}</code> where <code>path</code> is a URL-encoded path parameter.
<strong>Do not add query parameters to the request path with <code>?</code>, instead, pass them as a parameter map.</strong></p>
<pre><code>GET /v1/_elasticsearch/_search
GET /v1/_elasticsearch/mytype%<span class="hljs-number">2</span>f_search
DELETE /v1/_elasticsearch/tweet%<span class="hljs-number">2</span>f1</code></pre><p><code>ParaClient</code> example:</p>
<pre><code class="language-java">Response get = paraClient.invokeGet(<span class="hljs-string">"_elasticsearch/"</span> + Utils.urlEncode(<span class="hljs-string">"tweet/_search"</span>), params);

Response post = paraClient.invokePost(<span class="hljs-string">"_elasticsearch/_count"</span>,
                Entity.json(Collections.singletonMap(<span class="hljs-string">"query"</span>,
                                        Collections.singletonMap(<span class="hljs-string">"term"</span>,
                                        Collections.singletonMap(<span class="hljs-string">"type"</span>, <span class="hljs-string">"cat"</span>)))));</code></pre>
<p>If the <code>path</code> parameter is omitted, it defaults to <code>_search</code>.</p>
<p>The response object will be transformed to be compatible with Para clients an looks like this:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"page"</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">"totalHits"</span>:<span class="hljs-number">3</span>,
    <span class="hljs-string">"items"</span>:[{...}]
}</code></pre>
<p>If you wish to get the raw query response from Elasticsearch, add the parameter <code>getRawResponse=true</code> to the requst
path and also URL-encode it:</p>
<pre><code>GET /v1/_elasticsearch/mytype%<span class="hljs-number">2</span>f_search%<span class="hljs-number">3</span>FgetRawResponse%<span class="hljs-number">3</span>Dtrue</code></pre><p>Equivalently, the same can be done by adding the query parameter using <code>ParaClient</code>:</p>
<pre><code>MultivaluedHashMap&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; params = <span class="hljs-keyword">new</span> MultivaluedHashMap&lt;&gt;();
params.putSingle(<span class="hljs-string">"getRawRequest"</span>, <span class="hljs-string">"true"</span>);
paraClient.invokeGet(<span class="hljs-string">"_elasticsearch/"</span> + Utils.urlEncode(<span class="hljs-string">"mytype/_search"</span>), params);</code></pre><p><strong>Note:</strong> This endpoint requires authentication and unsigned requests are not allowed. Keep in mind that all requests
to Elasticsearch are prefixed with the app identifier. For example if the app id is “app:myapp, then Para will proxy
requests to Elasticsearch at <code>http://eshost:9200/myapp/{path}</code>.</p>
<h3 id="rebuilding-indices-through-the-elasticsearch-proxy-endpoint">Rebuilding indices through the Elasticsearch proxy endpoint</h3>
<p>You can rebuild the whole app index from scratch by calling <code>POST /v1/_elasticsearch/reindex</code>. To enable it set
<code>para.es.proxy_reindexing_enabled = true</code> first. This operation executes <code>ElasticSearchUtils.rebuildIndex()</code> internally,
and returns a response indicating the number of reindexed objects and the elapsed time:</p>
<pre><code>{
   <span class="hljs-string">"reindexed"</span>: <span class="hljs-number">154</span>,
   <span class="hljs-string">"tookMillis"</span>: <span class="hljs-number">365</span>
}</code></pre><p>Additionally, you can specify the destination index to reindex into, which must have been created beforehand:</p>
<pre><code>POST /v1/_elasticsearch/reindex?destinationIndex=yourCustomIndex</code></pre><h3 id="search-query-pagination-and-sorting">Search query pagination and sorting</h3>
<p>The Elasticsearch plugin supports two modes of pagination for query results. The standard mode works with the
<code>page</code> parameter:</p>
<pre><code>GET /v1/users?limit=<span class="hljs-number">30</span>&amp;page=<span class="hljs-number">2</span></code></pre><p>The other mode is “search after” and uses a stateless cursor to scroll through the results.
To activate “search after”, append the <code>lastKey</code> query parameter to the search request like so:</p>
<pre><code>GET /v1/users?limit=<span class="hljs-number">10000</span>&amp;sort=_docid&amp;lastKey=<span class="hljs-number">835146458100404225</span></code></pre><blockquote>
<p><strong>Important:</strong> For consistent results when doing “search after” scrolling, set <code>pager.setSortby(&quot;_docid&quot;)</code>
to sort on the <code>_docid</code> field. Additionally, there’s a limit to the result window imposed by Elasticsearch
of maximum 10000 documents. See the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#dynamic-index-settings">docs for <code>index.max_result_window</code></a>.</p>
</blockquote>
<p>The “search after” method works well for deep pagination or infinite scrolling or search results.
The <code>lastKey</code> field is returned in the body of the response for each search query. It represents the <code>_docid</code> value
for a Elasticsearch document - a unique, time-based <code>long</code>. You may have to rebuild your index for “search after” to work.</p>
<p>Sorting is done on the <code>timestamp</code> field by default, in <code>desc</code> (descending) order. To sort on a different field, set
<code>pager.setSortBy(field)</code>. Sorting on multiple fields is also possible by separating them with a comma. For example:</p>
<pre><code>GET /v1/users?sort=name,timestamp
<span class="hljs-comment">// or</span>
pager.setSortBy(<span class="hljs-string">"name:desc,timestamp:asc"</span>);</code></pre><h3 id="shared-indices-with-alias-routing">Shared indices with alias routing</h3>
<p>The plugin also supports index sharing, whereby the root app index is shared with other apps which are created with the
flag <code>app.isSharingIndex = true</code>. This feature is enabled with <code>para.es.root_index_sharing_enabled = true</code> and it is off
by default. When the root index is created with sharing enabled, a special alias is created for it that contains a
routing field which sends all documents of a child app to a particular shard, while providing total isolation between
apps. This is useful when there are lots of smaller apps with just a few hundred documents each and we want to avoid the
overhead of one index per app.</p>
<blockquote>
<p>Read the <a href="https://www.elastic.co/guide/">Elasticsearch</a> docs for more information.</p>
</blockquote>

				</section>
			</article>
			<a id="016-lucene" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Lucene</h2>
				<section class="body  img-rounded">
					<p>Lucene is used as the default search engine in Para. It is a lightweight alternative to Elasticsearch for self-contained
deployments. It works great for local development and also in production.</p>
<p>The <code>Search</code> interface is implemented in the <code>LuceneSearch</code> class and is part of the
<a href="https://github.com/Erudika/para-search-lucene">para-search-lucene</a> plugin.</p>
<p>Keep in mind that each Para app has its own Lucene index, which is automatically created if missing. The path to where
Lucene files are stored is controlled by <code>para.lucene.dir</code> which defaults to <code>.</code> the current directory. If you set it
to <code>para.lucene.dir = &quot;/home/user/lucene&quot;</code> index files will be stored in <code>/home/users/lucene/data</code>.</p>
<h3 id="search-query-pagination">Search query pagination</h3>
<p>Lucene supports two modes of pagination for query results. The standard mode works with the <code>page</code> parameter:</p>
<pre><code>GET /v1/users?limit=<span class="hljs-number">30</span>&amp;page=<span class="hljs-number">2</span></code></pre><p>The other mode is “search after” and uses a stateless cursor to scroll through the results.
To activate “search after”, append the <code>lastKey</code> query parameter to the search request like so:</p>
<pre><code>GET /v1/users?limit=<span class="hljs-number">10000</span>&amp;sort=_docid&amp;lastKey=<span class="hljs-number">835146458100404225</span></code></pre><blockquote>
<p><strong>Important:</strong> For consistent results when doing “search after” scrolling, set <code>pager.setSortby(&quot;_docid&quot;)</code>
to sort on the <code>_docid</code> field.</p>
</blockquote>
<p>The “search after” method works well for deep pagination or infinite scrolling or search results.
The <code>lastKey</code> field is returned in the body of the response for each search query. It represents the <code>_docid</code> value
for a Lucene document - a unique, time-based <code>long</code>. You may have to rebuild your index for “search after” to work.</p>
<blockquote>
<p>Read the <a href="http://lucene.apache.org/core/">Lucene</a> docs for more information.</p>
</blockquote>

				</section>
			</article>
			<a id="017-cache" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Cache interface</h2>
				<section class="body  img-rounded">
					<p>The <code>Cache</code> interface defines the following methods used for object caching:</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>method</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>void put(String id, T object)</code></td><td> Caches an object with a key equal to its <code>id</code>. Should skip <code>null</code> objects.</td></tr>
        <tr><td></p>
<p><code>void putAll(Map&lt;String, T&gt; objects)</code></td><td> Caches multiple objects. Should skip <code>null</code> objects.</td></tr>
        <tr><td></p>
<p><code>T get(String id)</code></td><td> Retrieves an object from cache. Returns <code>null</code> if the object isn’t cached.</td></tr>
        <tr><td></p>
<p><code>Map&lt;String, T&gt; getAll(List&lt;String&gt; ids)</code></td><td> Retrieves multiple objects from cache.</td></tr>
        <tr><td></p>
<p><code>void remove(String id)</code></td><td> Removes an object from cache.</td></tr>
        <tr><td></p>
<p><code>void removeAll()</code></td><td> Clears the cache completely.</td></tr>
        <tr><td></p>
<p><code>void removeAll(List&lt;String&gt; ids)</code></td><td> Clears only the objects with the specified ids.</td></tr>
    </tbody></p>
</table>

<blockquote>
<p>You should avoid calling cache related methods directly - Para does this for you.</p>
</blockquote>

				</section>
			</article>
			<a id="018-caffeine" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Caffeine</h2>
				<section class="body  img-rounded">
					<p>Caffeine is the default cache implementation since v1.26. It’s built on top of the excellent Caffeine library by
Ben Manes. This cache supports automatic eviction and TTL for each object.</p>
<p>There’s one big cache map, shared by all Para apps. Cached objects have keys with a unique prefix for each app.
When the cache reaches its maximum size or when objects in the map expire, the least recently used ones are evicted.
Caffeine is simple and effective, making it excellent for smaller Para clusters or single-node deployments.</p>
<p>These are the configuration properties for Caffeine:</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.caffeine.cache_size</code></td><td> Maximum size for the cache map. Defaults to <code>10000</code>.</td></tr>
        <tr><td></p>
<p><code>para.caffeine.evict_after_minutes</code></td><td> Cache eviction policy - objects are evicted after this time. Defaults to <code>10</code> min.</td></tr>
    </tbody></p>
</table>

<blockquote>
<p>For more information see the <a href="https://github.com/ben-manes/caffeine/wiki">Caffeine wiki</a>.</p>
</blockquote>

				</section>
			</article>
			<a id="018-hazelcast" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Hazelcast</h2>
				<section class="body  img-rounded">
					<p>Hazelcast allows you to use a portion of the memory on each node for caching without having to manage a separate
caching server or cluster. Hazelcast was the default implementation of the <code>Cache</code> interface until v1.26, when it
was decoupled from Para and <a href="https://github.com/Erudika/para-cache-hazelcast">moved to its own repository</a>. We still
recommend the Hazelcast plugin for production use.</p>
<p>In Hazelcast, caches are organized by application <code>id</code> - each application has its own separate distributed map
with the same name.</p>
<p>These are the configuration properties for Hazelcast:</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>default value</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.hc.async_enabled</code></td><td></p>
<p><code>false</code></td></tr>
        <tr><td>Asynchronous operation when putting objects in cache.</td></tr>
        <tr><td></p>
<p><code>para.hc.eviction_policy</code></td><td></p>
<p><code>LRU</code></td></tr>
        <tr><td>Cache eviction policy - <code>LRU</code> or <code>LFU</code>. </td></tr>
        <tr><td></p>
<p><code>para.hc.eviction_percentage</code></td><td></p>
<p><code>25</code></td></tr>
        <tr><td>Cache eviction percentage. </td></tr>
        <tr><td></p>
<p><code>para.hc.ttl_seconds</code></td><td></p>
<p><code>3600</code></td></tr>
        <tr><td>‘Time To Live’ for cached objects in seconds. </td></tr>
        <tr><td></p>
<p><code>para.hc.max_size</code></td><td></p>
<p><code>25</code></td></tr>
        <tr><td>Cache size as a percentage of used heap. </td></tr>
        <tr><td></p>
<p><code>para.hc.jmx_enabled</code></td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enables JMX reporting. </td></tr>
        <tr><td></p>
<p><code>para.hc.ec2_discovery_enabled</code></td><td></p>
<p><code>true</code></td></tr>
        <tr><td>Enables AWS EC2 auto discovery. </td></tr>
        <tr><td></p>
<p><code>para.hc.discovery_group</code></td><td></p>
<p><code>hazelcast</code></td></tr>
        <tr><td>Security group for cloud discovery of nodes. </td></tr>
        <tr><td></p>
<p><code>para.hc.mancenter_enabled</code></td><td></p>
<p><code>!IN_PRODUCTION</code></td></tr>
        <tr><td>Enables the Hazelcast Management Center. </td></tr>
        <tr><td></p>
<p><code>para.hc.mancenter_url</code></td><td></p>
<p><code>http://localhost:8001/mancenter</code></td></tr>
        <tr><td>The URL for the Management Center server. </td></tr>
    </tbody></p>
</table>

<p>In case you have enabled EC2 auto discovery, you must set <code>para.aws_access_key</code>,
<code>para.aws_secret_key</code> and <code>para.aws_region</code> accordingly.</p>
<blockquote>
<p>For more information see the <a href="http://www.hazelcast.org/docs/latest/manual/html-single">Hazelcast docs</a>.</p>
</blockquote>

				</section>
			</article>
			<a id="019-one-to-many" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>One-to-many</h2>
				<section class="body  img-rounded">
					<p>Object relationships are defined by the <code>Linkable</code> interface. All Para objects are linkable, meaning that they can be
related to other Para objects.</p>
<p>Para supports one-to-many relationships between objects with the <code>parentid</code> field. It contains the <code>id</code> of the parent
object. For example a user might be linked to their father like this:</p>
<pre>
+--------+
| Darth  |
| id: 5  |  Parent
+---+----+
    |
+---+---------+
| Luke        |
| id: 10      |  Child
| parentid: 5 |
+-------------+
</pre>

<p>This allows us to have a parent objects with many children which have the same <code>parentid</code> set. Now we can get all
children for a given object by calling <code>parent.getChildren(Class&lt;P&gt; clazz)</code>. This will return the list of objects that
have a <code>parentid</code> equal to that object’s <code>id</code>. For example:</p>
<pre><code class="language-java"><span class="hljs-comment">// assuming we have the parent object...</span>
User luke = parent.getChildren(User.class).get(<span class="hljs-number">0</span>);
User darth = dao.read(luke.getParentid());</code></pre>

				</section>
			</article>
			<a id="020-many-to-many" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Many-to-many</h2>
				<section class="body  img-rounded">
					<p>Many-to-many relationships are implemented in Para with <code>Linker</code> objects. This object contains information
about a link between two objects. This is simply the <code>id</code> and <code>type</code> of both objects. Linker objects are just regular
Para objects - they can be persisted, indexed and cached.</p>
<pre>
+--------+
|  tag1  |
+---+----+
    |
+---+------------+
|post:10:tag:tag1|  Linker
+---+------------+
    |
+---+------+
|  Post1   |
|  id:10   |
+----------+
</pre>

<p><strong>Note:</strong> The following methods are only used when creating “many-to-many” links.
Linking and unlinking two objects, <code>object1</code> and <code>object2</code>, is done like this:</p>
<pre><code class="language-java">object1.link(object2.getType(), object2.getId());
object1.unlink(object2.getType(), object2.getId());
<span class="hljs-comment">// delete all links to/from object1</span>
object1.unlinkAll();</code></pre>
<p>To check if two objects are linked use:</p>
<pre><code class="language-java">object1.isLinked(object2.getType(), object2.getId())</code></pre>
<p>Also you can count the number of links by calling:</p>
<pre><code class="language-java">object1.countLinks(object2.getType())</code></pre>
<p>Finally, to read all objects that are linked to <code>object1</code>, use:</p>
<pre><code class="language-java">object1.getLinkedObjects(object2.getType(), Pager... pager);</code></pre>

				</section>
			</article>
			<a id="020-metrics-basics" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Collecting metrics</h2>
				<section class="body  img-rounded">
					<p>With version 1.27, a number of metrics are implemented on top of DropWizard. By default, DropWizard metrics are
captured for every application, as well as the overall system across all applications. The DropWizard <code>Timer</code> is used
to record metrics, which gives count and latency measurements. There are timers implemented on all of the following
components:</p>
<ul>
<li>All methods on the <code>DAO</code> interface</li>
<li>All methods on the <code>Search</code> interface</li>
<li>All methods on the <code>Cache</code> interface</li>
<li>All REST endpoints for CRUD operations (both single and batch)</li>
<li>All REST endpoints for Search operations</li>
<li>All REST endpoints for Link operations</li>
<li>All REST endpoints for classes implementing the <code>CustomResourceHandler</code> interface</li>
</ul>
<p>All of the above metrics are initialized at startup for the overall system, as well as any existing applications.
A new log file output was added to print the names of the applications found during initialization, and to indicate
which one is the root app. If a new app is created, metrics are automatically initialized for this app as well.</p>
<p>Metrics are retrievable in two ways. First, a new log file called <code>para-metrics.log</code> is created by default. The system
metrics are written to this file at a rate of every 60 seconds by default. There is a user configurable parameter
<code>para.metrics.logging_rate</code> which will override the logging rate of the log file. If the logging rate is set to zero,
no metrics are saved to the log file.</p>
<p>The other alternative for retrieving metrics is by configuring Para to push them to a metrics server like Graphite.
This method is preferred over pulling metrics from the API, because in a distributed environment with multiple Para nodes
and load balancers it becomes cumbersome to aggregate the metrics from all nodes.</p>
<p>There are several configuration settings for metrics in Para:</p>
<pre><code class="language-bash"><span class="hljs-comment"># enable/disable the collection of metrics (default: true)</span>
para.metrics_enabled = <span class="hljs-literal">false</span>
<span class="hljs-comment"># enable/disable JMX reporting (default: false)</span>
para.metrics.jmx_enabled = <span class="hljs-literal">false</span>
<span class="hljs-comment"># The URL of the host to push metrics to (default: blank)</span>
para.metrics.graphite.host = <span class="hljs-string">"localhost"</span>
<span class="hljs-comment"># The port number of the Graphite server</span>
para.metrics.graphite.port = 2003
<span class="hljs-comment"># The prefixes for applying to metric names (default: blank)</span>
para.metrics.graphite.prefix_system = <span class="hljs-string">"com.erudika.para.{{INSTANCE_ID}}"</span>
para.metrics.graphite.prefix_apps = <span class="hljs-string">"com.erudika.para.{{INSTANCE_ID}}.{{APP_ID}}"</span>
<span class="hljs-comment"># The period for how often to push system metrics in seconds (default: 0, disabled)</span>
para.metrics.graphite.period = 0</code></pre>
<p>The variable <code>para.metrics.graphite.period</code> controls how often (in seconds) metrics data is pushed to the Graphite server.
This field controls the frequency of metrics reporting for both the system-wide metrics as well as any app-specific
metrics that are pushed to Graphite. The default value is <code>0</code>, which disables all push to Graphite. Settings this
value to a positive number (i.e. <code>60</code>) will allow for system metrics to be pushed to a Graphite server, as well as
application metrics.</p>
<p>System-wide metrics are only reported to a Graphite server if <code>para.metrics.graphite.host</code> is not blank
(it defaults to null). This field specifies the host of the Graphite server to push only system metrics to and
<code>para.metrics.graphite.port</code> is the corresponding port number to the host (usually <code>2003</code> for Graphite).</p>
<p>Graphite metrics are often prefixed by some path to distinguish application metrics from other applications pushing
to the same Graphite server. For example, you may want to prefix your Para application metrics with “com.erudika.para”.
There are two fields for configuring a prefix for pushing metrics to Graphite. First, <code>para.metrics.graphite.prefix_apps</code>
indicates the prefix that should be applied when pushing the system-wide metrics. Second,
<code>para.metrics.graphite.prefix_apps</code> indicates the template prefix that should be applied when pushing a specific
application’s metrics to Graphite.</p>
<p>It’s common practice in a distributed environment to include the instance ID in the prefix for pushing metrics data.
That makes it possible to view metrics for each node in your cluster, and perform an aggregation across all nodes.
This is supported by defining the instance ID for your system in an environment variable called <code>para.instance_id</code>.
If you define <code>para.instance_id</code>, you can reference it in the <code>para.metrics.graphite.prefix_system</code> and
<code>para.metrics.graphite.prefix_apps</code> variables. To include the instance ID, simply add <code>{{INSTANCE_ID}}</code> in your
prefix variables and Para will replace it with the contents of <code>para.instance_id</code>. For example, a system prefix
variable may be configured as follows in your application config file:</p>
<pre><code>para.instance_id = <span class="hljs-string">"1234abcd"</span>
para.metrics.graphite.prefix_system = <span class="hljs-string">"com.erudika.para.{{INSTANCE_ID}}.system"</span></code></pre><p>In <code>para.metrics.graphite.prefix_apps</code> you can use both the <code>{{INSTANCE_ID}}</code> placeholder as well as the
application’s identifier placeholder - <code>{{APP_ID}}</code>. This allows application-specific metrics to contain
the application’s ID in the prefix path. For example, an application prefix variable may be configured as
follows in your application config file:</p>
<pre><code>para.metrics.graphite.prefix_apps = <span class="hljs-string">"com.erudika.para.{{INSTANCE_ID}}.{{APP_ID}}"</span></code></pre><p>Configuring the Graphite host settings for a specific application can be done by adding a setting to the application
(see <a href="#050-api-settings-get">app settings API</a>). Para will look for an application setting by the name
“metricsGraphiteReporter” to detect application-specific Graphite settings. This setting is configured in the
form of a map with two fields: <code>host</code> (String) and <code>port</code> (int). For example, to add application-specific metrics
make a signed request to Para as follows:</p>
<pre><code>PUT /v1/_settings/metricsGraphiteReporter
{
  <span class="hljs-string">"value"</span>: {
    <span class="hljs-string">"host"</span>: <span class="hljs-string">"localhost"</span>,
    <span class="hljs-string">"port"</span>: <span class="hljs-number">2003</span>
  }
}</code></pre><h3 id="running-graphite-and-grafana-locally">Running Graphite and Grafana locally</h3>
<p>To run a local Graphite server start a docker container like <a href="https://github.com/hopsoft/docker-graphite-statsd">hopsoft/docker-graphite-statsd</a>
and then run a local Grafana server using the instructions at <a href="http://docs.grafana.org/installation/docker/">http://docs.grafana.org/installation/docker/</a>.</p>
<p>Here’s how to run Graphite with a Docker command:</p>
<pre><code class="language-bash">$ docker run -d --name graphite --restart=always -p 80:80 -p 2003-2004:2003-2004 -p 2023-2024:2023-2024 \
  -p 8125:8125/udp -p 8126:8126 graphiteapp/graphite-statsd</code></pre>
<p>Then point you browser to <code>http://localhost/</code>. Then run Grafana locally with:</p>
<pre><code class="language-bash">$ docker run -d -p 3000:3000 -e GF_SECURITY_ADMIN_USER=admin -e GF_SECURITY_ADMIN_PASSWORD=password \
  -e GF_METRICS_GRAPHITE_ADDRESS=localhost:2003 grafana/grafana</code></pre>
<p>Then open Grafana at <code>http://localhost:3000</code> and login using admin/password at the login screen. Finally, add Graphite
as a data source to Grafana by specifying the Graphite server location at <code>http://localhost</code> using “Browser” access.</p>
<h3 id="instrumenting-para-plugins">Instrumenting Para plugins</h3>
<p>You can easily measure any aspect of a Para plugin using the static methods <code>Metrics.counter()</code> and <code>Metrics.time()</code>:</p>
<pre><code class="language-java"><span class="hljs-comment">// call this from a method to increment a counter each time it's called</span>
Metrics.counter(appid, getClass(), <span class="hljs-string">"searchQueryCalled"</span>).inc();

<span class="hljs-comment">// use this to time execution of a block of code</span>
<span class="hljs-keyword">try</span> (Metrics.Context ctx = Metrics.time(appid, getClass(), <span class="hljs-string">"timedBlock"</span>)) {
    <span class="hljs-comment">// do stuff...</span>
}</code></pre>

				</section>
			</article>
			<a id="020-metrics-health" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Health check</h2>
				<section class="body  img-rounded">
					<p>A simple health check is mapped to <code>/v1/_health</code> which returns <code>200 OK</code> if the server is
“healthy”, and <code>500</code> if it’s “unhealthy”. The health check is configured to simply read the
root app object from the <code>DAO</code>, <code>Search</code> and <code>Cache</code> to ensure there are active connections with each resource.
The implementation is done in a class called <code>HealthUtils</code> in the “utils” package of <code>para-server</code>.</p>
<p>The health check endpoint is publicly accessible so it can be easily called by any application or a load balancer.
To prevent excessive calls to the health check end point, the health check method is only allowed to run at a fixed
interval (defaults to once per minute, but can be configured using <code>para.health.check_interval</code>).</p>
<p>An initial health check is done on startup and a warning is printed if Para is not initialized,
which is actually just an assumption at this point. The only way to distinguish between “not initialized” and
“unhealthy” is to check for connection errors in the logs. Para starts as unhealthy, but once the root app is created,
i.e. <code>/v1/_setup</code> is called, the status is updated to “healthy”.</p>
<p>Here’s how to programmatically check the health of the system:</p>
<pre><code class="language-java">HealthUtils.getInstance().performHealthCheck();
<span class="hljs-keyword">boolean</span> isHealthy = HealthUtils.getInstance().isHealty();</code></pre>
<p>To disable health checking, set <code>para.health_check_enabled = false</code>.</p>

				</section>
			</article>
			<a id="020-metrics-logging" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Logging</h2>
				<section class="body  img-rounded">
					<p>Para uses SLF4J as a logging abstraction framework, meaning you can plug in any logging implementation like Logback,
Log4j2, etc. By default Para uses Logback. To use another implementation, exclude all Logback packages from <code>pom.xml</code>
like this:</p>
<pre><code>&lt;dependency&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.erudika<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>para-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${para.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-access<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></span></code></pre><p>Logs are stored in 3 files, located in the same directory from which Para is started:</p>
<ul>
<li><code>para.log</code> - main log file, also written to syslog</li>
<li><code>para-metrics.log</code> - contains all the metrics</li>
<li><code>para-access.log</code> - contains a history of requests</li>
</ul>
<p>To change the directory where logs are stored, set the system property <code>para.logs_dir</code> to a folder of your choice
(should not end with “/“):</p>
<pre><code>$ java -jar -Dpara.logs_dir=<span class="hljs-regexp">/var/</span>logs/para para.jar</code></pre>
				</section>
			</article>
			<a id="021-iot-aws" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>AWS IoT</h2>
				<section class="body  img-rounded">
					<p>Para is integrated with the AWS IoT cloud which means that you can create <code>Thing</code> objects through the Para API and have
them sync their state with the AWS cloud. When you create a <code>Thing</code> it is also created on the AWS cloud and a
certificate is generated for it which is saved within the <code>Thing</code> object. The certificate, private and public keys
and other information about the device are only shown once the <code>Thing</code> is created. Here’s an example create request:</p>
<pre><code>POST /v1/things
{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"MyThing"</span>,
    <span class="hljs-string">"serviceBroker"</span>: <span class="hljs-string">"AWS"</span>
}</code></pre><p>The response would be something like this:</p>
<pre><code>{
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"664870213421895680"</span>,
  <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1468601996535</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"thing"</span>,
  <span class="hljs-string">"appid"</span>: <span class="hljs-string">"myapp"</span>,
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"MyThing"</span>
  <span class="hljs-string">"serviceBroker"</span>: <span class="hljs-string">"AWS"</span>,
  <span class="hljs-string">"deviceState"</span>: {},
  <span class="hljs-string">"deviceMetadata"</span>: {
    <span class="hljs-string">"thingId"</span>: <span class="hljs-string">"664870213421895680"</span>,
    <span class="hljs-string">"thingName"</span>: <span class="hljs-string">"MyThing"</span>,
    <span class="hljs-string">"thingARN"</span>: <span class="hljs-string">"arn:aws:iot:eu-west-1:123456789:thing/MyThing"</span>,
    <span class="hljs-string">"clientId"</span>: <span class="hljs-string">"MyThing"</span>,
    <span class="hljs-string">"clientCertId"</span>: <span class="hljs-string">"1abee5f25a5e1b1c66b66dd462dda32000621b429f6eb1ddb179ec3b"</span>,
    <span class="hljs-string">"clientCertARN"</span>: <span class="hljs-string">"arn:aws:iot:eu-west-1:123456789:cert/1abee5f25a5e1b1c66b66dd462dda32000621b429f6eb1ddb179ec3b"</span>,
    <span class="hljs-string">"clientCert"</span>: <span class="hljs-string">"-----BEGIN CERTIFICATE-----\n ... \n-----END CERTIFICATE-----\n"</span>,
    <span class="hljs-string">"privateKey"</span>: <span class="hljs-string">"-----BEGIN RSA PRIVATE KEY-----\n ... \n-----END RSA PRIVATE KEY-----\n"</span>,
    <span class="hljs-string">"publicKey"</span>: <span class="hljs-string">"-----BEGIN PUBLIC KEY-----\n ... \n-----END PUBLIC KEY-----\n"</span>,
    <span class="hljs-string">"region"</span>: <span class="hljs-string">"eu-west-1"</span>,
    <span class="hljs-string">"port"</span>: <span class="hljs-number">8883</span>,
    <span class="hljs-string">"host"</span>: <span class="hljs-string">"b2chw4axefhujt.iot.eu-west-1.amazonaws.com"</span>
  }
}</code></pre><p>Note that the field <code>deviceDetails</code> is only showed once and the device’s metadata is hidden on read.
Now you can connect your device to the AWS cloud using the generated certificates and start sending messages with the
state of the device. Para will check with AWS for shadow updates on each read and sync the <code>Thing</code> object’s
state with the state that is stored in the cloud. If the <code>Thing</code> object is updated from the Para API, the AWS IoT
shadow is updated accordingly so the two are in sync again. Finally, deleting the <code>Thing</code> object also deletes it from
AWS along with the certificate and policy attached to it.</p>
<p>In order to use the IoT integration feature, Para needs to get your AWS credentials from the config file or from the
instance it is deployed on. Also you have to enable IoT features in Para with <code>para.iot_enabled = true</code>.</p>
<h3 id="getting-started-with-para-and-aws-iot">Getting started with Para and AWS IoT</h3>
<ol>
<li>Get an account from AWS and create a user with permissions to call the IoT API</li>
<li>Set the <code>para.aws_access_key</code> and <code>para.aws_secret_key</code> properties in your Para config file</li>
<li>Start the Para instance and create a <code>Thing</code> object through the API:<pre><code>POST /v1/things
{
 <span class="hljs-string">"name"</span>: <span class="hljs-string">"myDevice"</span>,
 <span class="hljs-string">"serviceBroker"</span>: <span class="hljs-string">"AWS"</span>
}</code></pre></li>
<li>Take note of the <code>deviceDetails</code> field retured by this request as it contains certificates for your device</li>
<li>Use the certificates to set up your device and connect it to AWS IoT</li>
<li>The <code>deviceState</code> field inside the Para <code>Thing</code> object is synced with the device shadow on AWS on every <code>GET</code> request</li>
<li>Update the <code>deviceState</code> from the Para API and it will be synced with the device shadow on AWS on every <code>PATCH</code> request.</li>
</ol>

				</section>
			</article>
			<a id="021-iot-azure" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Azure IoT</h2>
				<section class="body  img-rounded">
					<p>Para is integrated with the Microsoft’s Azure IoT Hub which means that you can create <code>Thing</code> objects through the Para
API and have them sync their state with the Azure cloud. When you create a <code>Thing</code> it is also created as a device on
the Azure cloud and primary/secondary keys are generated for it which are saved within the <code>Thing</code> object. These keys
and other information about the device are only shown once the <code>Thing</code> is created. Here’s an example create request:</p>
<pre><code>POST /v1/things
{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"MyThing"</span>,
    <span class="hljs-string">"serviceBroker"</span>: <span class="hljs-string">"Azure"</span>
}</code></pre><p>The response would be something like this:</p>
<pre><code>{
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"664870213421895680"</span>,
  <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1468601996535</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"thing"</span>,
  <span class="hljs-string">"appid"</span>: <span class="hljs-string">"myapp"</span>,
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"MyThing"</span>
  <span class="hljs-string">"serviceBroker"</span>: <span class="hljs-string">"Azure"</span>,
  <span class="hljs-string">"deviceState"</span>: {},
  <span class="hljs-string">"deviceDetails"</span>: {
    <span class="hljs-string">"thingId"</span>: <span class="hljs-string">"664870213421895680"</span>,
    <span class="hljs-string">"thingName"</span>: <span class="hljs-string">"MyThing"</span>,
    <span class="hljs-string">"primaryKey"</span>: <span class="hljs-string">"1abee5f25a5e1b1c66b66dd462dda"</span>,
    <span class="hljs-string">"secondaryKey"</span>: <span class="hljs-string">"32000621b429f6eb1ddb179ec3b"</span>,
    <span class="hljs-string">"status"</span>: <span class="hljs-string">"enabled"</span>,
    <span class="hljs-string">"lastActivity"</span>: <span class="hljs-string">"{timestamp}"</span>,
    <span class="hljs-string">"connectionState"</span>: <span class="hljs-string">"disconnected"</span>,
    <span class="hljs-string">"connectionString"</span>: <span class="hljs-string">"HostName=abc.def.com;DeviceId=664870213421895680;SharedAccessKey=1abee5f25a5e1b1c66b66dd462dda"</span>,
  }
}</code></pre><p>Note that the field <code>deviceDetails</code> is only showed once and the device’s metadata is hidden on read.
Now you can connect your device to the Azure cloud using the generated primary/secondary keys and start sending messages
with the state of the device. Para will automatically check with Azure for device messages and sync the <code>Thing</code> object’s
state with the state that is stored in the cloud. If the <code>Thing</code> object is updated from the Para API, the Azure IoT
device is updated accordingly so the two are in sync again. Finally, deleting the <code>Thing</code> object also deletes it from
the Azure IoT Hub.</p>
<p>In order to use the IoT integration feature, Para needs to get your AWS credentials from the config file or from the
instance it is deployed on. Also you have to enable IoT features in Para with <code>para.iot_enabled = true</code>.</p>
<h3 id="getting-started-with-para-and-azure-iot">Getting started with Para and Azure IoT</h3>
<ol>
<li>Get an account from Azure and create an IoT hub</li>
<li>Set the <code>para.azure.iot_hostname</code>, <code>para.azure.iot_access_key</code>, <code>para.azure.iot_eventhub_name</code> and
<code>para.azure.iot_eventhub_endpoint</code> properties in your Para config file (these can be found in your IoT console)</li>
<li>Start the Para instance and create a <code>Thing</code> object through the API:<pre><code>POST /v1/things
{
 <span class="hljs-string">"name"</span>: <span class="hljs-string">"myDevice"</span>,
 <span class="hljs-string">"serviceBroker"</span>: <span class="hljs-string">"Azure"</span>
}</code></pre></li>
<li>Take note of the <code>deviceDetails</code> field retured by this request as it contains primary/secondary keys for your device</li>
<li>Use the primary/secondary keys to set up your device and connect it to Azure IoT Hub</li>
<li>The <code>deviceState</code> field inside the Para <code>Thing</code> object is synced with the device on Azure automatically in the background</li>
<li>Update the <code>deviceState</code> from the Para API and it will be synced with the device shadow on Azure on every <code>PATCH</code> request.</li>
</ol>

				</section>
			</article>
			<a id="021-translations" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Translations</h2>
				<section class="body  img-rounded">
					<p>Translations are Para objects which contain a single translation of a string. For example you can have a language file
in English and for each string you can create a <code>Translation</code> object with the translation of that string.</p>
<p>Translations have a key and a value. The key is used to identify the string to be translated. Each translation also has
a specific locale associated with it.</p>
<p>A translation can be approved which makes it possible to build a crowdsourced system for translation of language packs.</p>

				</section>
			</article>
			<a id="022-languages" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Languages</h2>
				<section class="body  img-rounded">
					<p>Languages are maps of keys and values. A language file might contain all strings used by an application. Also you can
have the language loaded from a database.</p>
<p>The language map consists of language strings and each string has a short unique key. For example:</p>
<pre><code>english.txt
-----------
yes = <span class="hljs-string">"Yes"</span>
no  = <span class="hljs-string">"No"</span>

italian.txt
-----------
yes = <span class="hljs-string">"Sì"</span>
no  = <span class="hljs-string">"No"</span></code></pre><p>The <code>LanguageUtils</code> class deals with the loading of languages and contains methods for working with locales.
You can set default languages, write languages to a database and load them.</p>

				</section>
			</article>
			<a id="023-filters" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Filters</h2>
				<section class="body  img-rounded">
					<p>There are several filters you can use to enable different features like Gzip encoding, CORS, etc.</p>
<h3 id="cors">CORS</h3>
<p>The CORS filter enables cross-origin requests for the Para API. It is enabled with the configuration property
<code>para.cors_enabled</code> set to <code>true</code>. The implementation is based on the open source <code>CORSFilter</code> by Ebay.</p>
<h3 id="gzip">Gzip</h3>
<p>The <code>GZipServletFilter</code> is enabled by <code>para.gzip_enabled</code> and provides on-the-fly Gzip encoding for static resources,
as well as, the Para API JSON responses.</p>
<h3 id="caching">Caching</h3>
<p>The <code>CachingHttpHeadersFilter</code> is not used by Para but you can use it to enable <code>Cache-Control</code> headers for all static
resources.</p>

				</section>
			</article>
			<a id="023-utilities" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Misc. utilities</h2>
				<section class="body  img-rounded">
					<p>The <code>Utils</code> static class contains a variety of utility methods. These are summarized below:</p>
<h3 id="hashing">Hashing</h3>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>String MD5(String s)</code></td></tr>
        <tr><td> Calculates the MD5 hash for a string. </td></tr>
        <tr><td></p>
<p><code>String bcrypt(String s)</code></td></tr>
        <tr><td> Calclates the BCrypt hash for a string. Based on Spring Security. </td></tr>
        <tr><td></p>
<p><code>boolean bcryptMatches(String plain, String storedHash)</code></td></tr>
        <tr><td> Validates a BCrypt hash. </td></tr>
    </tbody></p>
</table>

<h3 id="strings">Strings</h3>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>String stripHtml(String html)</code></td></tr>
        <tr><td> Strips all HTML tags from a string leaving only the text. </td></tr>
        <tr><td></p>
<p><code>String markdownToHtml(String markdownString)</code></td></tr>
        <tr><td> Convert a Markdown string to HTML. Based on <a href="https://github.com/rjeschke/txtmark">Txtmark</a>. Supports GFM syntax, tables, task lists, striketrough and emojis.</td></tr>
        <tr><td></p>
<p><code>String compileMustache(Map&lt;String, Object&gt; scope, String template)</code></td></tr>
        <tr><td> Compile a Mustache template string to HTML. Based on <a href="https://github.com/spullara/mustache.java">Mustache.java</a>.</td></tr>
        <tr><td></p>
<p><code>String abbreviate(String str, int max)</code></td></tr>
        <tr><td> Abbreviates a string to a given length. </td></tr>
        <tr><td></p>
<p><code>String stripAndTrim(String str)</code></td></tr>
        <tr><td> Removes punctuation and symbols and normalizes whitespace. </td></tr>
        <tr><td></p>
<p><code>String noSpaces(String str, String replaceWith)</code></td></tr>
        <tr><td> Spaces are replaced with something or removed completely. </td></tr>
        <tr><td></p>
<p><code>String formatMessage(String msg, Object... params)</code></td></tr>
        <tr><td> Replaces placeholders like <code>{0}</code>, <code>{1}</code>, etc. with the corresponding objects (numbers, strings, booleans). </td></tr>
    </tbody></p>
</table>

<h3 id="numbers">Numbers</h3>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>String formatPrice(double price)</code></td></tr>
        <tr><td> Formats a price to a decimal with two fractional digits. </td></tr>
        <tr><td></p>
<p><code>double roundHalfUp(double d)</code></td></tr>
        <tr><td> Rounds up a double using the “half up” method, scale is 2 fractional digits.</td></tr>
        <tr><td></p>
<p><code>double roundHalfUp(double d, int scale)</code></td></tr>
        <tr><td> Rounds up a double using the “half up” method.</td></tr>
        <tr><td></p>
<p><code>String abbreviateInt(Number number, int decPlaces)</code></td></tr>
        <tr><td> Rounds a number like “10000” to “10K”, “1000000” to “1M”, etc. </td></tr>
    </tbody></p>
</table>

<h3 id="dates">Dates</h3>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>String formatDate(Long timestamp, String format, Locale loc)</code></td></tr>
        <tr><td> Formats a date according to a specific locale. </td></tr>
        <tr><td></p>
<p><code>String[] getMonths(Locale locale)</code></td></tr>
        <tr><td> A list of the twelve months in the language set by the locale. </td></tr>
    </tbody></p>
</table>

<h3 id="json">JSON</h3>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>P fromJSON(String json)</code></td></tr>
        <tr><td> Converts a JSON string to a <code>ParaObject</code>. Requires the <code>type</code> property. Based on Jackson. </td></tr>
        <tr><td></p>
<p><code>String toJSON(P obj)</code></td></tr>
        <tr><td> Converts a <code>ParaObject</code> to a JSON string. Based on Jackson. </td></tr>
    </tbody></p>
</table>

<h3 id="objects">Objects</h3>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>boolean typesMatch(ParaObject so)</code></td></tr>
        <tr><td> Validates that an object’s class matches its <code>type</code> property. </td></tr>
        <tr><td></p>
<p><code>Map&lt;String, Object&gt; getAnnotatedFields(P bean)</code></td></tr>
        <tr><td> Returns a map of all fields marked with the <code>Stored</code> annotation for a given object. </td></tr>
        <tr><td></p>
<p><code>P setAnnotatedFields(Map&lt;String, Object&gt; data)</code></td></tr>
        <tr><td> Reconstruct an object from a map of fields and their values. </td></tr>
        <tr><td></p>
<p><code>P toObject(String type)</code></td></tr>
        <tr><td> Constructs a new instance of the given type (must be a known <code>ParaObject</code>). </td></tr>
        <tr><td></p>
<p><code>Class&lt;? extends ParaObject&gt; toClass(String type)</code></td></tr>
        <tr><td> Returns the <code>Class</code> instance of a given type (must be a known <code>ParaObject</code>). </td></tr>
        <tr><td> <code>boolean isBasicType(Class&lt;?&gt; clazz)</code> </td></tr>
        <tr><td> Checks if a class is primitive, String or a primitive wrapper. </td></tr>
        <tr><td></p>
<p><code>String[] validateObject(ParaObject content)</code></td></tr>
        <tr><td> Runs the Hibernate Validator against an object. Returns a list of errors or an empty array if that object is valid. </td></tr>
        <tr><td></p>
<p><code>String getNewId()</code></td></tr>
        <tr><td> Generates a new <code>id</code>. Based on <a href="https://github.com/twitter/snowflake/">Twitter’s Snowflake</a> algorithm. You <em>must</em> set <code>para.worker_id</code> to be different on each node. </td></tr>
        <tr><td></p>
<p><code>String type(Class&lt;? extends ParaObject&gt; clazz)</code></td></tr>
    </tbody></p>
</table>

<h3 id="urls">URLs</h3>
<table class="table table-striped">
    <tbody>
        <tr><td>

<p><code>boolean isValidURL(String url)</code></td></tr>
        <tr><td> Validates a URL. </td></tr>
        <tr><td></p>
<p><code>String getHostFromURL(String url)</code></td></tr>
        <tr><td> Returns the host name of a URL - “example.com” </td></tr>
        <tr><td></p>
<p><code>String getBaseURL(String url)</code></td></tr>
        <tr><td> Returns the base URL, e.g. <a href="http://example.com">http://example.com</a> </td></tr>
    </tbody></p>
</table>

				</section>
			</article>
			<a id="024-humantime" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>HumanTime</h2>
				<section class="body  img-rounded">
					<p>Para includes the class <code>HumanTime</code> written by <a href="http://johannburkard.de">Johann Burkard</a>. This class makes it
easy to convert a timestamp to an approximation in the form of “X minutes ago”.</p>
<p>For example you can do:</p>
<pre><code class="language-java">HumanTime ht = Utils.getHumanTime();
<span class="hljs-comment">// prints 15 h 45 m</span>
String s1 = ht.approximately(<span class="hljs-number">56720083L</span>);

<span class="hljs-keyword">int</span> timeOfEvent = <span class="hljs-number">1399554448</span>;
<span class="hljs-keyword">int</span> timeNow = System.currentTimeMillis();
<span class="hljs-comment">// calculate elapsed time</span>
String s2 = ht.approximately(timeNow - timeOfEvent);
System.out.println(<span class="hljs-string">"Event happened "</span> + s2 + <span class="hljs-string">" time ago"</span>);</code></pre>
<blockquote>
<p>For more information about HumanTime see <a href="http://johannburkard.de/blog/programming/java/date-formatting-parsing-humans-humantime.html">the docs</a>.</p>
</blockquote>

				</section>
			</article>
			<a id="025-pager" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Pager</h2>
				<section class="body  img-rounded">
					<p>The <code>Pager</code> class is used for pagination. It holds data about a page request. For example you can call a search method
like this:</p>
<pre><code class="language-java">Pager pager = <span class="hljs-keyword">new</span> Pager();
<span class="hljs-comment">// limit results to 5</span>
pager.setLimit(<span class="hljs-number">5</span>);
<span class="hljs-comment">// sort by the 'tag' field</span>
pager.setSortby(<span class="hljs-string">"tag"</span>);
<span class="hljs-comment">// descending order</span>
pager.setDesc(<span class="hljs-keyword">true</span>);
<span class="hljs-comment">// last key special field</span>
pager.setLastKey(<span class="hljs-string">"1234"</span>);
List&lt;Tag&gt; tags = search.findTags(<span class="hljs-string">"tag1"</span>, pager);
<span class="hljs-comment">// the total number of tags for the query</span>
<span class="hljs-keyword">int</span> tagCount = pager.getCount();</code></pre>
<p>The <code>Pager</code> class has a special string field <code>lastKey</code> for storing the last <code>id</code> for scrolling pagination queries.
Usually scrolling is used in NoSQL databases, where in order to get a page of results, you have to provide the
last key from the previous page.</p>
<p><strong>Note:</strong> The fields <code>page</code> and <code>limit</code> are constrained by <code>para.max_pages = 1000</code> and <code>para.max_page_limit = 256</code>.
The first controls the maximum page number, and the second one sets the maximum results per page (i.e. the
maximum value which the <code>limit</code> parameter can have).</p>
<p>Pager objects are used primarily in combination with search queries and allow you to limit the results of a query.
When using <code>ParaClient</code> in combination with <code>Pager</code>, the client will automatically set the <code>pager.lastKey</code>
property. To use the standard pagination mode, you must explicitly set the <code>pager.page</code> property:</p>
<pre><code class="language-java"><span class="hljs-comment">// fetch page 1</span>
paraClient.findQuery(<span class="hljs-string">"*"</span>, pager);
pager.setPage(<span class="hljs-number">2</span>);

<span class="hljs-comment">// fetch page 2</span>
paraClient.findQuery(<span class="hljs-string">"*"</span>, pager);
pager.setPage(<span class="hljs-number">3</span>);
<span class="hljs-comment">//  and so on...</span></code></pre>
<p>For “search after”, or “deep” pagination the <code>page</code> property is omitted:</p>
<pre><code class="language-java"><span class="hljs-comment">// fetch page 1</span>
paraClient.findQuery(<span class="hljs-string">"*"</span>, pager);

<span class="hljs-comment">// fetch page 2</span>
paraClient.findQuery(<span class="hljs-string">"*"</span>, pager);
<span class="hljs-comment">//  and so on...</span></code></pre>
<p>And here’s an example for reading all object of type “cat” using deep pagination (“search after”):</p>
<pre><code class="language-java">Pager pager = <span class="hljs-keyword">new</span> Pager(<span class="hljs-number">1</span>, <span class="hljs-string">"_docid"</span>, <span class="hljs-keyword">false</span>, <span class="hljs-number">10_000</span>);
List&lt;Cat&gt; cats = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();
List&lt;Cat&gt; catsPage;
<span class="hljs-keyword">do</span> {
    catsPage = Para.getSearch().findQuery(<span class="hljs-string">"cat"</span>, <span class="hljs-string">"*"</span>, pager);
    cats.addAll(catsPage);
} <span class="hljs-keyword">while</span> (!catsPage.isEmpty());</code></pre>

				</section>
			</article>
			<a id="026-email" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Email</h2>
				<section class="body  img-rounded">
					<p>The <code>Emailer</code> interface has a simple API for sending email messages.</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Emailer</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">sendEmail</span><span class="hljs-params">(List&lt;String&gt; emails, String subject, String body)</span></span>;
}</code></pre>
<p>Para can either use the JavaMail API or AWS SES to send emails. This is used for email verification, password recovery
and notifications. Set <code>support_email</code> to be the email address used by the system. An example config for JavaMail:</p>
<pre><code>para.emailer = <span class="hljs-string">"javamail"</span>
para.support_email = <span class="hljs-string">"support@example.com"</span>
para.mail.host = <span class="hljs-string">"smtp.example.com"</span>
para.mail.port = <span class="hljs-number">587</span>
para.mail.username = <span class="hljs-string">"user@example.com"</span>
para.mail.password = <span class="hljs-string">"password"</span>
para.mail.tls = <span class="hljs-literal">true</span>
para.mail.ssl = <span class="hljs-literal">false</span></code></pre><p>Email templates can be loaded with:</p>
<pre><code class="language-java">Emailer.class.getClassLoader().getResourceAsStream(<span class="hljs-string">"emails/template.html"</span>)</code></pre>
<p>Para supports basic variable substitutions through Mustache with <code>Utils.compileMustache(data, template)</code>.</p>
<p>Set <code>para.emailer = &quot;aws&quot;</code> to use the AWS Simple Email Service and comment out the <code>para.mail.*</code>
properties as they are ignored. Also set <code>para.aws_access_key</code> and <code>para.aws_secret_key</code>.</p>

				</section>
			</article>
			<a id="027-queue" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Queue</h2>
				<section class="body  img-rounded">
					<p>The <code>Queue</code> interface is another simple API for pushing and pulling messages to and from a queue.</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Queue</span> </span>{
    <span class="hljs-function">String <span class="hljs-title">pull</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(String task)</span></span>;
    <span class="hljs-function">String <span class="hljs-title">getName</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">startPolling</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stopPolling</span><span class="hljs-params">()</span></span>;
}</code></pre>
<p>Currently this interface is implemented by the <code>AWSQueue</code> class which relies on the AWS Simple Queue Service, and by
<code>LocalQueue</code> which is based on a <code>ConcurrentLinkedQueue</code>. The implementation to load is configurable through:</p>
<pre><code>para.q = &quot;sqs&quot;
# or
para.q = &quot;local&quot;</code></pre><h3 id="awsqueue">AWSQueue</h3>
<p>The AWS SQS plugin uses Amazon’s SQS as a river by long polling for messages from a given queue.
This particular implementation was adapted from an earlier project called
<a href="https://github.com/albogdano/elasticsearch-river-amazonsqs">elasticsearch-river-amazonsqs</a>.</p>
<p>The code continuously pulls messages from an SQS queue. After a message is processed, it gets deleted from the queue.
To enable this functionality, set <code>para.queue_link_enabled = true</code> in the Para configuration file.</p>
<p>Sample code:</p>
<pre><code class="language-java">AWSQueue q = <span class="hljs-keyword">new</span> AWSQueue(<span class="hljs-string">"myQueue"</span>);
AWSQueueUtils.pushMessages(q.getUrl(), listOfMessages);
List&lt;String&gt; result = AWSQueueUtils.pullMessages(q.getUrl(), <span class="hljs-number">10</span>);</code></pre>
<p>To configure, put this in your <code>application.conf</code>:</p>
<pre><code class="language-bash">para.queue.polling_sleep_seconds: 60
para.queue.polling_interval_seconds: 20</code></pre>
<p>Messages are in the same format as all other Para objects (see <code>Sysprop</code>):</p>
<pre><code class="language-json">{
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"id_OR_null"</span>,
    <span class="hljs-attr">"appid"</span>: <span class="hljs-string">"para_app_id"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"para_data_type"</span>,
    <span class="hljs-attr">"properties"</span>: { <span class="hljs-attr">"key1"</span>: <span class="hljs-string">"value1"</span> ...}
}</code></pre>
<p><strong>Notes:</strong></p>
<ul>
<li>If a <code>&#39;_delete&#39;: true</code> field exists, the object in the message will be deleted.</li>
<li>If <code>&#39;_create&#39;: true</code> field exists, the object will be recreated, overwriting anything with the same <code>id</code>.</li>
</ul>
<p>When the queue is empty the river will sleep for <code>sleep</code> seconds before sending a new request for messages to the queue.
Long polling is done by the Amazon SQS client using the <code>waitTimeSeconds</code> attribute which is set to <code>longpolling_interval</code> <em>(must be between 0 and 20)</em>.</p>
<h3 id="localqueue">LocalQueue</h3>
<p>This queue implementation is good for local development, testing and single-machine Para servers. It uses an in-memory
queue which is not persisted in any way.</p>

				</section>
			</article>
			<a id="028-storage" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Storage</h2>
				<section class="body  img-rounded">
					<p>The <code>FileStore</code> interface allows you to have different storage services, like S3 or Google Drive, connected to
your application. You can save and load files from disk or cloud storage services easily.</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">FileStore</span> </span>{
    <span class="hljs-function">InputStream <span class="hljs-title">load</span><span class="hljs-params">(String path)</span></span>;
    <span class="hljs-function">String <span class="hljs-title">store</span><span class="hljs-params">(String path, InputStream data)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span><span class="hljs-params">(String path)</span></span>;
}</code></pre>
<h3 id="awsfilestore">AWSFileStore</h3>
<p>This implementation uses AWS S3 as file storage location. The location of each file is controlled by the bucket name
cofiguration property <code>para.s3.bucket</code>. There is also the <code>para.s3.max_filesize_mb</code> property which restricts the size of
the upload.</p>
<p>Before each upload, files are prepended with a timestamp, for example <code>myfile.txt</code> becomes <code>1405632454930.myfile.txt</code>.
Currently all files are set to be stored with “Reduced Redundancy” turned on.</p>
<p>You can Gzip compress files before uploading uploading but you must append the <code>.gz</code> extension in order for the correct
content encoding header to be set. The extension is removed before upload.</p>
<h3 id="localfilestore">LocalFileStore</h3>
<p>This implementation stores files on the local file system. The folder where files will be stored is set with the
<code>para.localstorage.folder</code> property. The maximum file size is controlled by <code>para.localstorage.max_filesize_mb</code>.</p>

				</section>
			</article>
			<a id="029-passwordless" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Custom authentication</h2>
				<section class="body  img-rounded">
					<p>Para supports custom authentication providers through its “passwordless” filter. This means that you can send any user
info to Para and it will authenticate that user automatically without passwords.</p>
<p>This mechanism is implemented in the <code>PasswordlessAuthFilter</code> class.</p>
<p>The default URL for this filter is <code>/passwordless_auth</code> and all requests to this location will be intercepted and processed
by it. It accepts one parameter - <code>token</code> a JWT generated on an external backend (for example your login server).</p>
<p>Also see the configuration properties <code>para.security.signin_success</code> and <code>para.security.signin_failure</code> in section Config.
These can be set for each app individually as <code>signin_success</code> and <code>signin_failure</code> in the app’s settings.
For apps other than the root app use <code>/passwordless_auth?appid=myapp</code>.</p>
<p>Custom authentication flow:</p>
<ol>
<li>A user wants to sign in to Para and clicks a button</li>
<li>The button redirects the user to a remote login page you or your company set up.</li>
<li>The user enters their credentials and logs in.</li>
<li>If the credentials are valid, you send back a special JSON Web Token (JWT) to Para with the user’s basic information.</li>
<li>Para verifies the token and the user is signed in</li>
</ol>
<p>The JWT must contain the following claims:</p>
<ul>
<li><code>email</code> - user’s email address</li>
<li><code>name</code> - user’s display name</li>
<li><code>identifier</code> - some unique ID for that user</li>
<li><code>appid</code> - the app id (optional)</li>
</ul>
<p>The JWT signature is verified using the secret key value which you provide in your configuration:</p>
<pre><code>para.app_secret_key = <span class="hljs-string">"change_to_long_random_string"</span></code></pre><p>This key must be at least 32 symbols in length and random. <strong>This key is different from the Para secret key for your app.</strong>
The JWT should have a short validity period (e.g. 10 min). The JWT should also contain the claims <code>iat</code> and <code>exp</code> and
optionally <code>nbf</code>.</p>
<p>Once you generate the JWT on your backend (step 4 above), redirect the successful login request back to Para:</p>
<pre><code>GET https:<span class="hljs-comment">//para-host/passwordless_auth?token=eyJhbGciOiJIUzI1NiI..</span></code></pre>
				</section>
			</article>
			<a id="029-passwords" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Simple authentication</h2>
				<section class="body  img-rounded">
					<p>Para implements several authentication mechanisms which you can integrate in your application and make it easy to handle
user registrations and logins.</p>
<p>The classic way of logging users in is with usernames and passwords. Para implements that mechanism in the
<code>PasswordAuthFilter</code> class. It takes a username or email and a password and tries to find that user in the database.
If the user exists then it validates that the hash of the given password matches the hash in the database.
The hashing algorithm is <strong>BCrypt</strong>.</p>
<p>The default URL for this filter is <code>/password_auth</code> and all requests to this location will be intercepted and processed
by it. The default parameters to pass to it are <code>email</code> and <code>password</code>.</p>
<p>Also see the configuration properties <code>para.security.signin_success</code> and <code>para.security.signin_failure</code> in section Config.
These can be set for each app individually as <code>signin_success</code> and <code>signin_failure</code> in the app’s settings.
For apps other than the root app use <code>/password_auth?appid=myapp</code>.</p>
<p>Here’s an example HTML form for initiating password-based authentication:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/password_auth"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></code></pre>
<h3 id="creating-users-programmatically">Creating users programmatically</h3>
<p>You can create users from your Java code by using a <code>ParaClient</code>. By default, users are created with <code>active = false</code>,
i.e. the account is locked until the email address is verified. You can disable email verification with
<code>para.security.allow_unverified_emails = true</code>. Another way to get around this is to “verify” the user manually, like so:</p>
<pre><code class="language-java"><span class="hljs-comment">// user is created but account is locked</span>
paraClient.signIn(<span class="hljs-string">"password"</span>, <span class="hljs-string">"user@example.com:Morgan Freeman:pass123"</span>);
<span class="hljs-comment">// read identifier first to get the user id</span>
ParaObject identifier = paraClient.read(<span class="hljs-string">"user@example.com"</span>);
User user = paraClient.read(identifier.getCreatorid());
user.setActive(<span class="hljs-keyword">true</span>);
User updated = paraClient.update(user); <span class="hljs-comment">// user is now active</span></code></pre>
<p>After executing the code above, any subsequent calls to <code>paraClient.signIn()</code> will be successful and the authenticated
user object will be returned.</p>

				</section>
			</article>
			<a id="029-saml" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>SAML support</h2>
				<section class="body  img-rounded">
					<p>Para can act as a SAML service provider and connect to a specified identity provider (IDP). The implementation uses
OneLogin’s SAML Java Toolkit. Here’s a summary of all the steps required to authenticate users with SAML:</p>
<ol>
<li>Generate a X509 certificate and private key for your SP</li>
<li>Convert the private key to PKCS#8 and Base64-encode both public and private keys</li>
<li>Specify the metadata URL for your IDP in your config file</li>
<li>Register Para with your IDP as trusted SP by copying the metadata from <code>/saml_metadata/{appid}</code></li>
<li>Send users to <code>/saml_auth/{appid}</code> and Para will take care of the rest</li>
</ol>
<p>The SP metadata endpoint is <code>/saml_metadata/{appid}</code> where <code>appid</code> is the app id for your Para app. For example, if your
Para endpoint is <code>paraio.com</code> and your <code>appid</code> is <code>scoold</code>, then the metadata is available at
<code>https://paraio.com/saml_metadata/scoold</code> as an XML file.</p>
<p>SAML authentication is initiated by sending users to the Para SAML authentication endpoint <code>/saml_auth/{appid}</code>.
For example, if your Para endpoint is <code>paraio.com</code> and your <code>appid</code> is <code>scoold</code>, then the user should be sent to
<code>https://paraio.com/saml_auth/scoold</code>. Para (the service provider) will handle the request and redirect to the SAML IDP.
Finally, upon successful authentication, the user is redirected back to <code>https://paraio.com/saml_auth/scoold</code> which is
also the assertion consumer service (ACS).</p>
<p><strong>Note:</strong> The X509 certificate and private key must be encoded as Base64 in the configuration file. Additionally,
the private key must be in the <strong>PKCS#8 format</strong> (<code>---BEGIN PRIVATE KEY---</code>). To convert from PKCS#1 to PKCS#8, use this:</p>
<pre><code>openssl pkcs8 -topk8 -inform pem -nocrypt -<span class="hljs-keyword">in</span> sp.rsa_key -outform pem -out sp.pem</code></pre><p>There are lots of configuration options but Para needs only a few of those in order to successfully
authenticate with your SAML IDP (listed in the first rows below).</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>default value</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.security.saml.sp.entityid</code></td><td>blank</td></tr>
        <tr><td> The SP <code>entityId</code>, a URL in the form of <code>https://paraio.com/saml_auth/{appid}</code>. </td></tr>
        <tr><td></p>
<p><code>para.security.saml.sp.assertion_consumer_service.url</code></td><td>blank</td></tr>
        <tr><td> The URL where users will be redirected back to, from the IDP. Same value as the <code>entityId</code> above.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.sp.nameidformat</code></td><td>blank</td></tr>
        <tr><td> Specifies constraints on the name identifier to be used to represent the requested subject.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.sp.x509cert</code></td><td>blank</td></tr>
        <tr><td> The X509 certificate for the SP, encoded as Base64.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.sp.privatekey</code></td><td>blank</td></tr>
        <tr><td> The private key for the X509 certificate, in PKCS#8 format, encoded as Base64.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.idp.entityid</code></td><td>blank</td></tr>
        <tr><td> The IDP <code>entityId</code>, a URL in the form of <code>https://idphost/idp/metadata.xml</code></td></tr>
        <tr><td></p>
<p><code>para.security.saml.idp.single_sign_on_service.url</code></td><td>blank</td></tr>
        <tr><td> SSO endpoint URL of the IdP.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.idp.x509cert</code></td><td>blank</td></tr>
        <tr><td> The x509 certificate for the IDP, encoded as Base64.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.idp.metadata_url</code></td><td>blank</td></tr>
        <tr><td> The location of IDP’s metadata document. Para will fetch it and the IDP will be auto-configured.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.authnrequest_signed</code></td><td>false</td></tr>
        <tr><td> Enables/disables signing of auth requests to the IDP.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.want_messages_signed</code></td><td>false</td></tr>
        <tr><td> Enables/disables signing of messages to the IDP.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.want_assertions_signed</code></td><td>false</td></tr>
        <tr><td> Enables/disables the requirement for signed assertions.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.want_assertions_encrypted</code></td><td>false</td></tr>
        <tr><td> Enables/disables the requirement for encrypted assertions.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.want_nameid_encrypted</code></td><td>false</td></tr>
        <tr><td> Enables/disables the requirement for encrypted <code>nameId</code></td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.sign_metadata</code></td><td>false</td></tr>
        <tr><td> Enables/disables signing of SP’s metadata.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.want_xml_validation</code></td><td>true</td></tr>
        <tr><td> Enables/disables XML validation by the SP.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.security.signature_algorithm</code></td><td>blank</td></tr>
        <tr><td> Algorithm that the SP will use in the signing process.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.attributes.id</code></td><td>blank</td></tr>
        <tr><td> Mapping key for the <code>id</code> attribute.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.attributes.picture</code></td><td>blank</td></tr>
        <tr><td> Mapping key for the <code>picture</code> attribute.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.attributes.email</code></td><td>blank</td></tr>
        <tr><td> Mapping key for the <code>email</code> attribute.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.attributes.name</code></td><td>blank</td></tr>
        <tr><td> Mapping key for the <code>name</code> attribute. If this is set, the values for attributes <code>firstname</code> and <code>lastname</code> below will be ignored.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.attributes.firstname</code></td><td>blank</td></tr>
        <tr><td> Mapping key for the <code>firstname</code> attribute.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.attributes.lastname</code></td><td>blank</td></tr>
        <tr><td> Mapping key for the <code>lastname</code> attribute.</td></tr>
        <tr><td></p>
<p><code>para.security.saml.domain</code></td><td>blank</td></tr>
        <tr><td> Domain name for users who don’t have a valid email.</td></tr>
    </tbody></p>
</table>

<p>As a bare minimum, you should have the following SAML configuration:</p>
<pre><code class="language-ini"><span class="hljs-comment"># minimal setup</span>
<span class="hljs-comment"># IDP metadata URL, e.g. https://idphost/idp/shibboleth</span>
<span class="hljs-attr">para.security.saml.idp.metadata_url</span> = <span class="hljs-string">""</span>

<span class="hljs-comment"># SP endpoint, e.g. https://paraio.com/saml_auth/scoold</span>
<span class="hljs-attr">para.security.saml.sp.entityid</span> = <span class="hljs-string">""</span>

<span class="hljs-comment"># SP public key as Base64(x509 certificate)</span>
<span class="hljs-attr">para.security.saml.sp.x509cert</span> = <span class="hljs-string">""</span>

<span class="hljs-comment"># SP private key as Base64(PKCS#8 key)</span>
<span class="hljs-attr">para.security.saml.sp.privatekey</span> = <span class="hljs-string">""</span>

<span class="hljs-comment"># attribute mappings (usually required)</span>
<span class="hljs-comment"># e.g. urn:oid:0.9.2342.19200300.100.1.1</span>
<span class="hljs-attr">para.security.saml.attributes.id</span> = <span class="hljs-string">""</span>
<span class="hljs-comment"># e.g. urn:oid:0.9.2342.19200300.100.1.3</span>
<span class="hljs-attr">para.security.saml.attributes.email</span> = <span class="hljs-string">""</span>
<span class="hljs-comment"># e.g. urn:oid:2.5.4.3</span>
<span class="hljs-attr">para.security.saml.attributes.name</span> = <span class="hljs-string">""</span></code></pre>
<p>You want to either configure <code>para.security.saml.attributes.name</code> or <code>para.security.saml.attributes.firstname</code>, but <strong>not both</strong>.</p>
<p>You can also configure the SAML authentication filter through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"security.saml.sp.entityid"</span>: <span class="hljs-string">"https://paraio.com/saml_auth/scoold"</span>,
    <span class="hljs-string">"security.saml.idp.metadata_url"</span>: <span class="hljs-string">"https://idphost/idp/shibboleth"</span>,
    <span class="hljs-string">"security.saml.sp.x509cert"</span>: <span class="hljs-string">"LS0tLS1CRUdJTiBDRVJUSUZJQ0..."</span>,
    <span class="hljs-string">"security.saml.sp.privatekey"</span>: <span class="hljs-string">"LS0tLS1CRUdJTiBQUklWQVRF..."</span>,
    ...
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>,
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>You can also put all of the settings above in a configuration file, but this <em>only works</em> if your app is the
<strong>root app</strong> (see <a href="#005-config">the config</a>).</p>

				</section>
			</article>
			<a id="030-ldap" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>LDAP support</h2>
				<section class="body  img-rounded">
					<p>Users can be authenticated through an LDAP server, including Active Directory. The implementation uses the UnboundID
SDK in combination with Spring Security. The user supplies a <code>uid</code> and <code>password</code> and Para connects to the LDAP server
and tries to bind that user. Then, upon successful login, a new <code>User</code> object is created and the user is signed in.
The user’s profile data (email, name, uid) is read from the LDAP directory. It is important to note that emails are
<strong>not</strong> validated and are assumed valid.</p>
<p>Support for LDAP authentication is implemented by the <code>LdapAuthFilter</code>. The default URL for this filter is
<code>/ldap_auth</code>. The filter takes two query parameters <code>username</code> and <code>password</code> and answers to any HTTP method.
Example: <code>GET /ldap_auth?username=bob&amp;password=secret</code></p>
<p>These are the configuration options for this filter:</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>default value</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.security.ldap.server_url</code></td><td></p>
<p><code>ldap://localhost:8389/</code></td></tr>
        <tr><td>URL of the LDAP server, including scheme and port.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.base_dn</code></td><td></p>
<p><code>dc=springframework,dc=org</code></td></tr>
        <tr><td>The base DN, aka domain.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.bind_dn</code></td><td>-</td></tr>
        <tr><td>The initial bind DN for a user with search privileges. The value of this property cannot contain whitespaces.
Those will automatically be escaped with <code>%20</code>. Usually this value is left blank.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.bind_pass</code></td><td>-</td></tr>
        <tr><td>The password for a user with search privileges. Usually this value is left blank.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.user_search_base</code></td><td>-</td></tr>
        <tr><td>Search base for user searches.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.user_search_filter</code></td><td></p>
<p><code>(cn={0})</code></td></tr>
        <tr><td>Search filter for user searches. This is combined with <code>user_search_base</code> to form the full DN path to a person in the directory.
A user search is performed when the person cannot be found directly using <code>user_dn_pattern</code> + <code>base_dn</code>.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.user_dn_pattern</code></td><td></p>
<p><code>uid={0}</code></td></tr>
        <tr><td>DN pattern for finding users directly. This is combined with <code>base_dn</code> to form the full DN path to a person in the directory.
This property can have multiple values separated by <code>|</code>, e.g. <code>uid={0}|cn={0}</code>.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.password_attribute</code></td><td></p>
<p><code>userPassword</code></td></tr>
        <tr><td>The password attribute in the directory</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.username_as_name</code></td><td></p>
<p><code>false</code></td></tr>
        <tr><td>Use a person’s username as their name</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.active_directory_domain</code></td><td>-</td></tr>
        <tr><td>The domain name for AD server. If blank (defaut) AD is disabled.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.mods_group_node</code></td><td>-</td></tr>
        <tr><td>Maps LDAP node like <code>cn=Mods</code> to Para user group <code>mods</code>.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.admins_group_node</code></td><td>-</td></tr>
        <tr><td>Maps LDAP node like <code>cn=Admins</code> to Para user group <code>admins</code>.</td></tr>
        <tr><td></p>
<p><code>para.security.ldap.compare_passwords</code></td><td>-</td></tr>
        <tr><td>If set to any value, will switch to password comparison strategy instead of default “bind” method.</td></tr>
    </tbody></p>
</table>

<p><strong>Note:</strong> Active Directory support is enabled when <code>active_directory_domain</code> is set. For AD LDAP, the search filter
defaults to <code>(&amp;(objectClass=user)(userPrincipalName={0}))</code>. The syntax for this allows either <code>{0}</code>
(replaced with <code>username@domain</code>) or <code>{1}</code> (replaced with <code>username</code> only). For regular LDAP, only <code>{0}</code> is a valid
placeholder and it gets replaced with the person’s username.</p>
<p>You can also configure LDAP through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"security.ldap.server_url"</span>: <span class="hljs-string">"ldap://localhost:8389/"</span>,
    <span class="hljs-string">"security.ldap.base_dn"</span>: <span class="hljs-string">"dc=springframework,dc=org"</span>,
    <span class="hljs-string">"security.ldap.user_dn_pattern"</span>: <span class="hljs-string">"uid={0}"</span>
    ...
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>,
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>You can also put all of the settings above in a configuration file, but this <em>only works</em> if your app is the
<strong>root app</strong> (see <a href="#005-config">the config</a>).</p>

				</section>
			</article>
			<a id="030-oauth" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>OAuth 2.0 support</h2>
				<section class="body  img-rounded">
					<p>A generic OAuth 2.0 filter is available for situations where you need to use your own authentication server.
It follows the standard OAuth 2.0 flow and requires that you redirect users to a login page first (on your server).
Then, upon successful login, the user is redirected back to <code>/oauth2_auth</code> and an access token is obtained.
Finally, the filter tries to get the user’s profile with that token, from a specified server, which could be the same
server used for authentication.</p>
<p>Support for generic OAuth authentication is implemented by the <code>GenericOAuth2Filter</code>. The default URL for this filter is
<code>/oauth2_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>These are the configuration options for this filter:</p>
<table class="table table-striped">
    <thead>
        <tr>
            <th>property</th>
            <th>description</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>

<p><code>para.security.oauth.profile_url</code></td><td>API endpoint for user profile. </td></tr>
        <tr><td></p>
<p><code>para.security.oauth.token_url</code></td><td>The URL from which the access token will be requested (via <code>POST</code>). </td></tr>
        <tr><td></p>
<p><code>para.security.oauth.scope</code></td><td>The <code>scope</code> parameter of the access token request payload.</td></tr>
        <tr><td></p>
<p><code>para.security.oauth.accept_header</code></td><td>The <code>Accept</code> header - if blank, the header won’t be set. (default is blank). </td></tr>
        <tr><td></p>
<p><code>para.security.oauth.parameters.id</code></td><td>The <code>id</code> parameter for requesting the user profile (default is <code>sub</code>). </td></tr>
        <tr><td></p>
<p><code>para.security.oauth.parameters.picture</code></td><td>The <code>picture</code> parameter for requesting the user profile (default is <code>picture</code>). </td></tr>
        <tr><td></p>
<p><code>para.security.oauth.parameters.email</code></td><td>The <code>email</code> parameter for requesting the user profile (default is <code>email</code>). </td></tr>
        <tr><td></p>
<p><code>para.security.oauth.parameters.name</code></td><td>The <code>name</code> parameter for requesting the user profile (default is <code>name</code>). </td></tr>
        <tr><td></p>
<p><code>para.security.oauth.domain</code></td><td> This domain name is used if a valid email can’t be obtained (optional).</td></tr>
        <tr><td></p>
<p><code>para.security.oauth.token_delegation_enabled</code></td><td> Enable/disable access token delegation. If enabled, access tokens will be saved
inside the user object’s <code>password</code> field and sent for validation to the IDP on each authentication request (using JWTs). (default is <code>false</code>).
        </td></tr>
    </tbody></p>
</table>

<p>You can configure the URLs for authentication success and failure in the configuration file (see <a href="#005-config">the config</a>)</p>
<p>You can also set all configuration properties through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"oa2_app_id"</span>: <span class="hljs-string">"some_appid"</span>,
    <span class="hljs-string">"oa2_secret"</span>: <span class="hljs-string">"some_secret"</span>,
    <span class="hljs-string">"security.oauth.token_url"</span>: <span class="hljs-string">"https://myidp.com/oauth/token"</span>,
    <span class="hljs-string">"security.oauth.profile_url"</span>: <span class="hljs-string">"https://myidp.com/oauth/userinfo"</span>,
    <span class="hljs-string">"security.oauth.scope"</span>: <span class="hljs-string">"openid email profile"</span>,
    ...
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>,
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>You can add two additional custom OAuth 2.0/OpenID connect providers called “second” and “third”. Here’s what the settings
look like for the “second” provider (“third” is identical but replace “second” with “third”):</p>
<pre><code>{
    <span class="hljs-string">"oa2second_app_id"</span>: <span class="hljs-string">"some_appid"</span>,
    <span class="hljs-string">"oa2second_secret"</span>: <span class="hljs-string">"some_secret"</span>,
    <span class="hljs-string">"security.oauthsecond.token_url"</span>: <span class="hljs-string">"https://myidp.com/oauth/token"</span>,
    <span class="hljs-string">"security.oauthsecond.profile_url"</span>: <span class="hljs-string">"https://myidp.com/oauth/userinfo"</span>,
    <span class="hljs-string">"security.oauthsecond.scope"</span>: <span class="hljs-string">"openid email profile"</span>,
    ...
}</code></pre><p>The endpoints for the “second” and “third” OAuth 2.0 providers are <code>/oauth2second_auth</code> and <code>/oauth2third_auth</code>, respectively.</p>

				</section>
			</article>
			<a id="030-openid" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>OpenID support</h2>
				<section class="body  img-rounded">
					<p><strong>DEPRECATED</strong></p>
<p><strong>Note</strong>: OpenID 2.0 is no longer supported by Google, and we recommend using one of the other authentication providers
or JWT-based authentication.</p>
<p>Support for OpenID authentication is implemented by the <code>OpenIDAuthFilter</code>. The default URL for this filter is
<code>/openid_auth</code>.</p>
<p>The filter takes a request with the <code>openid_identifier</code> parameter and redirects the user to their OpenID provider for
verification. Once the user’s identity is verified, the provider redirects the user back to our filter and the user gets
either logged in or registered.</p>
<p>You can configure the URLs for authentication success and failure in the configuration file (see <a href="#005-config">the config</a>)</p>

				</section>
			</article>
			<a id="031-facebook" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Facebook support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with Facebook. You could also login with an existing access token from
Facebook <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app in the Facebook Dev Center.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.fb_app_id = <span class="hljs-string">"..."</span>
para.fb_secret = <span class="hljs-string">"..."</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"fb_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"fb_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with Facebook is implemented by the <code>FacebookAuthFilter</code>. This filter responds to requests at
<code>/facebook_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with Facebook just redirect the user to the Facebook OAuth endpoint:</p>
<pre><code>facebook.com/dialog/oauth</code></pre><p>Pass the parameter <code>redirect_uri=/facebook_auth</code> so Para can handle the response from Facebook.
For apps other than the root app use <code>redirect_uri=/facebook_auth?state=myapp</code> instead.</p>
<p><strong>Note:</strong> You need to <a href="https://developers.facebook.com/">register a new application with Facebook</a>
in order to obtain an access and secret keys.</p>
<p>Below is an example Javascript code for a Facebook login button:</p>
<pre><code class="language-js">$(<span class="hljs-string">"#facebookLoginBtn"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">window</span>.location = <span class="hljs-string">"https://www.facebook.com/dialog/oauth?"</span> +
                <span class="hljs-string">"response_type=code&amp;client_id={FACEBOOK_APP_ID}"</span> +
                <span class="hljs-string">"&amp;scope=email&amp;state="</span> + APPID +
                <span class="hljs-string">"&amp;redirect_uri="</span> + <span class="hljs-built_in">window</span>.location.origin + <span class="hljs-string">"/facebook_auth"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
});</code></pre>

				</section>
			</article>
			<a id="031-github" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>GitHub support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with GitHub. You could also login with an existing access token from
GitHub <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app on GitHub.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.gh_app_id = <span class="hljs-string">"..."</span>
para.gh_secret = <span class="hljs-string">"..."</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"gh_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"gh_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with GitHub is implemented by the <code>GitHubAuthFilter</code>. This filter responds to requests at
<code>/github_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with GitHub just redirect the user to the GitHub OAuth endpoint:</p>
<pre><code>github.com/login/oauth/authorize</code></pre><p>Pass the parameter <code>redirect_uri=/github_auth</code> so Para can handle the response from GitHub.
For apps other than the root app use <code>redirect_uri=/github_auth?state=myapp</code> instead.</p>
<p><strong>Note:</strong> You need to <a href="https://github.com/settings/profile">register a new application with GitHub</a>
in order to obtain an access and secret keys.</p>
<p>Below is an example Javascript code for a GitHub login button:</p>
<pre><code class="language-js">$(<span class="hljs-string">"#githubLoginBtn"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">window</span>.location = <span class="hljs-string">"https://github.com/login/oauth/authorize?"</span> +
                <span class="hljs-string">"response_type=code&amp;client_id={GITHUB_APP_ID}"</span> +
                <span class="hljs-string">"&amp;scope=user&amp;state="</span> + APPID +
                <span class="hljs-string">"&amp;redirect_uri="</span> + <span class="hljs-built_in">window</span>.location.origin + <span class="hljs-string">"/github_auth"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
});</code></pre>

				</section>
			</article>
			<a id="031-google" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Google support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with Google. You could also login with an existing access token from
Google <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app in the Google Dev Console.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.gp_app_id = <span class="hljs-string">"..."</span>
para.gp_secret = <span class="hljs-string">"..."</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"gp_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"gp_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with Google acoounts is implemented by the <code>GoogleAuthFilter</code>.
This filter responds to requests at <code>/google_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with Google just redirect the user to the Google OAuth endpoint:</p>
<pre><code>accounts.google.com/o/oauth2/v2/auth</code></pre><p>Pass the parameter <code>redirect_uri=/google_auth</code> so Para can handle the response from Google.
For apps other than the root app use <code>redirect_uri=/google_auth?state=myapp</code> instead.</p>
<p><strong>Note:</strong> You need to <a href="https://console.developers.google.com/iam-admin/projects">register a new application with Google</a>
in order to obtain an access and secret keys.</p>
<p>Below is an example Javascript code for a Google login button:</p>
<pre><code class="language-js">$(<span class="hljs-string">"#googleLoginBtn"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> baseUrl = <span class="hljs-built_in">window</span>.location.origin;
        <span class="hljs-built_in">window</span>.location = <span class="hljs-string">"https://accounts.google.com/o/oauth2/v2/auth?"</span> +
                <span class="hljs-string">"client_id={GOOGLE_APP_ID}&amp;response_type=code"</span> +
                <span class="hljs-string">"&amp;scope=openid%20email&amp;redirect_uri="</span> + baseUrl + <span class="hljs-string">"/google_auth"</span> +
                <span class="hljs-string">"&amp;state="</span> + APPID + <span class="hljs-string">"&amp;"</span> + <span class="hljs-string">"openid.realm="</span> + baseUrl;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
});</code></pre>

				</section>
			</article>
			<a id="031-linkedin" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>LinkedIn support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with LinkedIn. You could also login with an existing access token from
LinkedIn <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app on LinkedIn.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.in_app_id = <span class="hljs-string">"..."</span>
para.in_secret = <span class="hljs-string">"..."</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"in_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"in_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with LinkedIn is implemented by the <code>LinkedInAuthFilter</code>. This filter responds to requests at
<code>/linkedin_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with LinkedIn just redirect the user to the LinkedIn OAuth endpoint:</p>
<pre><code>www.linkedin.com/oauth/v2/authorization</code></pre><p>Pass the parameter <code>redirect_uri=/linkedin_auth</code> so Para can handle the response from LinkedIn.
For apps other than the root app use <code>redirect_uri=/linkedin_auth?state=myapp</code> instead.</p>
<p><strong>Note:</strong> You need to <a href="https://www.linkedin.com/developer/apps">register a new application with LinkedIn</a>
in order to obtain an access and secret keys.</p>
<p>Below is an example Javascript code for a LinkedIn login button:</p>
<pre><code class="language-js">$(<span class="hljs-string">"#linkedinLoginBtn"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">window</span>.location = <span class="hljs-string">"https://www.linkedin.com/oauth/v2/authorization?"</span> +
                <span class="hljs-string">"response_type=code&amp;client_id={LINKEDIN_APP_ID}"</span> +
                <span class="hljs-string">"&amp;scope=r_liteprofile%20r_emailaddress&amp;state="</span> + APPID +
                <span class="hljs-string">"&amp;redirect_uri="</span> + <span class="hljs-built_in">window</span>.location.origin + <span class="hljs-string">"/linkedin_auth"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
});</code></pre>

				</section>
			</article>
			<a id="031-microsoft" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Microsoft support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with Microsoft. You could also login with an existing access token from
Microsoft <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app on Microsoft.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.ms_app_id = <span class="hljs-string">"..."</span>
para.ms_secret = <span class="hljs-string">"..."</span>
para.security.signin_success = <span class="hljs-string">"http://success.url"</span>
para.security.signin_failure = <span class="hljs-string">"http://failure.url"</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"ms_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"ms_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with Microsoft accounts is implemented by the <code>MicrosoftAuthFilter</code>.
This filter responds to requests at <code>/microsoft_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with Microsoft just redirect the user to the Microsoft OAuth endpoint:</p>
<pre><code>login.microsoftonline.com/common/oauth2/v2<span class="hljs-number">.0</span>/authorize</code></pre><p>Pass the parameter <code>redirect_uri=/microsoft_auth?state=myapp</code> so Para can handle the response from Microsoft.</p>
<p><strong>Note:</strong> You need to <a href="https://apps.dev.microsoft.com/#/appList">register a new application with Microsoft</a>
in order to obtain an access and secret keys.</p>
<p>Below is an example Javascript code for a Microsoft login button:</p>
<pre><code class="language-js">$("#microsoftLoginBtn").click(function() {
        window.location = "https://login.microsoftonline.com/common/oauth2/v2.0/authorize?" +
                "response_type=code&amp;client_id={MICROSOFT_APP_ID}" +
                "&amp;scope=https%3A%2F%2Fgraph.microsoft.com%2Fuser.read&amp;state=" + APPID +
                "&amp;redirect_uri=" + window.location.origin + "/microsoft_auth;
        return false;
});</code></pre>

				</section>
			</article>
			<a id="031-slack" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Slack support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with Slack. You could also login with an existing access token from
Slack <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app on Slack.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.sl_app_id = <span class="hljs-string">"..."</span>
para.sl_secret = <span class="hljs-string">"..."</span>
para.security.signin_success = <span class="hljs-string">"http://success.url"</span>
para.security.signin_failure = <span class="hljs-string">"http://failure.url"</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"sl_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"sl_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with Slack accounts is implemented by the <code>SlackAuthFilter</code>.
This filter responds to requests at <code>/slack_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with Slack just redirect the user to the Slack OAuth endpoint:</p>
<pre><code>slack.com/oauth/authorize</code></pre><p>Pass the parameter <code>redirect_uri=/slack_auth?state=myapp</code> so Para can handle the response from Slack.</p>
<p><strong>Note:</strong> You need to <a href="https://api.slack.com/apps">register a new application with Slack</a>
in order to obtain an access and secret keys.</p>
<p>Below is an example Javascript code for a Slack login button:</p>
<pre><code class="language-js">$("#slackLoginBtn").click(function() {
        window.location = "https://slack.com/oauth/authorize?" +
                "response_type=code&amp;client_id={SLACK_APP_ID}" +
                "&amp;scope=identity.basic%20identity.email%20identity.team%20identity.avatar&amp;state=" + APPID +
                "&amp;redirect_uri=" + window.location.origin + "/slack_auth;
        return false;
});</code></pre>

				</section>
			</article>
			<a id="031-twitter" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Twitter support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with Twitter. You could also login with an existing access token from
Twitter <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app on Twitter.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.tw_app_id = <span class="hljs-string">"..."</span>
para.tw_secret = <span class="hljs-string">"..."</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"tw_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"tw_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with Twitter is implemented by the <code>TwitterAuthFilter</code>. This filter responds to requests at
<code>/twitter_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with Twitter just redirect the user to the <code>/twitter_auth</code>. This will redirect the user to Twitter
for authentication. For apps other than the root app, redirect to <code>/twitter_auth?state=myapp</code>.</p>
<p><strong>Note:</strong> You need to <a href="https://apps.twitter.com/">register a new application with Twitter</a>
in order to obtain an access and secret keys.
The Twitter API does not share users’ emails by default, you have to ask Twitter to
<a href="https://dev.twitter.com/rest/reference/get/account/verify_credentials">whitelist your app first</a>.</p>
<p>Below is an example Javascript code for a Twitter login button:</p>
<pre><code class="language-js">$(<span class="hljs-string">"#twitterLoginBtn"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">window</span>.location = <span class="hljs-string">"/twitter_auth"</span>;
        <span class="hljs-comment">// for apps other than the root app use:</span>
        <span class="hljs-comment">// window.location = "/twitter_auth?state=" + APPID;</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
});</code></pre>

				</section>
			</article>
			<a id="032-amazon" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Amazon support</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>This describes the web authentication flow with Amazon. You could also login with an existing access token from
Amazon <a href="#034-api-jwt-signin">through the API</a>. This web flow sets a cookie, the API returns a JWT instead.</p>
</blockquote>
<p>First of all you need to have your API credentials ready by creating an app on Amazon.
Then add them to your <code>application.conf</code> configuration file:</p>
<pre><code>para.az_app_id = <span class="hljs-string">"..."</span>
para.az_secret = <span class="hljs-string">"..."</span>
para.security.signin_success = <span class="hljs-string">"http://success.url"</span>
para.security.signin_failure = <span class="hljs-string">"http://failure.url"</span></code></pre><p>Or add these through the <a href="#050-api-settings-put">app settings API</a>:</p>
<pre><code>{
    <span class="hljs-string">"az_app_id"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"az_secret"</span>: <span class="hljs-string">"..."</span>
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"http://success.url"</span>
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"http://failure.url"</span>
}</code></pre><p>If you want Para to generate a JWT token upon successful authentication, add the <code>jwt=?</code> parameter to your
<code>signin_success</code> url. For example <code>{ &quot;signin_success&quot;: &quot;http://success.url?jwt=?&quot; }</code>.
Para will redirect the user back to your host URL with the generated access token.</p>
<p>Support for logging in with Amazon accounts is implemented by the <code>AmazonAuthFilter</code>.
This filter responds to requests at <code>/amazon_auth</code>.</p>
<p>The endpoint expects an <code>appid</code> value from the ‘state’ parameter, e.g. <code>?state={appid}</code>. If that parameter is missing,
the default (root) app will be used as authentication target.</p>
<p>To initiate a login with Amazon just redirect the user to the Amazon OAuth endpoint:</p>
<pre><code>www.amazon.com/ap/oa</code></pre><p>Pass the parameter <code>redirect_uri=/amazon_auth?state=myapp</code> so Para can handle the response from Amazon.</p>
<p><strong>Note:</strong> You need to <a href="https://developer.amazon.com/loginwithamazon/console/site/lwa/overview.html">register a new application with Amazon</a>
in order to obtain an access and secret keys.</p>
<p>Below is an example Javascript code for a Amazon login button:</p>
<pre><code class="language-js">$(<span class="hljs-string">"#amazonLoginBtn"</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">window</span>.location = <span class="hljs-string">"https://www.amazon.com/ap/oa?"</span> +
                <span class="hljs-string">"response_type=code&amp;client_id="</span> + AMAZON_APP_ID +
                <span class="hljs-string">"&amp;scope=profile&amp;state="</span> + APPID +
                <span class="hljs-string">"&amp;redirect_uri="</span> + ENDPOINT + <span class="hljs-string">"/amazon_auth"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
});</code></pre>

				</section>
			</article>
			<a id="032-roles" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Groups and roles</h2>
				<section class="body  img-rounded">
					<p>Para defines three security groups and roles:</p>
<ul>
<li><code>users</code> group with role <code>user</code> (normal users)</li>
<li><code>mods</code> group with role <code>mod</code> (moderators)</li>
<li><code>admins</code> group with role <code>admin</code> (administrators)</li>
</ul>
<p>There is also a special role <code>app</code> for applications.</p>

				</section>
			</article>
			<a id="033-csrf" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>CSRF protection</h2>
				<section class="body  img-rounded">
					<p>Cross-Site Request Forgery protection is enabled by default for all <code>POST</code>, <code>PUT</code> and <code>DELETE</code> requests.
It works by verifying that incoming requests contain a security token (CSRF token) and it matches the one stored on the
server. CSRF protection is disabled for API requests.</p>
<p>To disable the CSRF protection set <code>para.security.csrf_protection</code> to <code>false</code>. You can also tell Para to send a cookie
containing the CSRF token by setting <code>para.security.csrf_cookie</code> as the cookie name. Leaving this parameter blank will
disable the CSRF cookie.</p>
<p>For example, if you wish to integrate CSRF protection with AngularJS you can do so by setting
the cookie name to <code>XSRF-TOKEN</code> which is the default cookie used by AngularJS. Also you need to configure AngularJS to
send the correct CSRF header to Para which is <code>X-CSRF-TOKEN</code> like so:</p>
<pre><code class="language-js">$httpProvider.defaults.xsrfHeaderName = <span class="hljs-string">"X-CSRF-TOKEN"</span>;</code></pre>
<p>In order to get a CSRF token from the server you need to send a <code>POST</code> request to a protected resource
like <code>POST /protected/ping</code> and the server will return the token as cookie.</p>

				</section>
			</article>
			<a id="033-restauth" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>Authentication</h2>
				<section class="body  img-rounded">
					<p>Para uses the <strong>AWS Signature Version 4</strong> algorithm for signing API requests. We chose this algorithm instead
of OAuth because it is less complicated and is already implemented inside the core AWS Java SDK, which we have as direct
dependency. In terms of security, both algorithms are considered very secure so there’s no compromise in that aspect.</p>
<p>Para offers two ways of authentication - one for apps using API keys and one for insecure clients (mobile, JS) using JWT.
Apps authenticated with a secret key have full access to the API. Users authenticated with social login are issued JWT
tokens and have limited access to the API, for example they can’t generate new API keys and they are authorized by
specific resource permissions (see <a href="#011-permissions">Resource permissions</a>).</p>
<h3 id="full-access-for-apps">Full access for apps</h3>
<p>In order to make a request to the API you need to have a pair of access and secret keys. Access keys are part of the
HTTP request and secret keys are used for signing only and must be kept safe.</p>
<p>We recommend that you choose one of our API client libraries to handle the authentication for you.</p>
<h3 id="first-time-setup">First-time setup</h3>
<p>Call <code>GET /v1/_setup</code> to get your first key pair. Once you do this you will get back a response like:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"secretKey"</span>: <span class="hljs-string">"U3VTNifLPqnZ1W2S3pVVuKG4HOVbimMocdDMl8T69BB001AXGZtwZw=="</span>,
    <span class="hljs-string">"accessKey"</span>: <span class="hljs-string">"YXBwOnBhcmE="</span>,
    <span class="hljs-string">"info"</span>:        <span class="hljs-string">"Save the secret key! It is showed only once!"</span>
}</code></pre>
<p>Make sure you <strong>save</strong> these security credentials because the API can only be accessed with them. Once you have the
keys you can start making signed requests to the API. Also you can use these keys to create applications which will
have their own separate keys (see <a href="#34">Apps</a>).</p>
<p><strong>Note:</strong> when a resource has public permissions you can access it without setting the <code>Authorization</code> header.
Simply specify your access key as a parameter:</p>
<pre><code>GET /v1/public/resource?accessKey=app:myapp</code></pre><h3 id="changing-keys">Changing keys</h3>
<p>Call <code>POST /v1/_newkeys</code> to generate a new secret key (<em>the request must be signed with the old keys</em>).</p>
<h3 id="disabling-api-security">Disabling API security</h3>
<p>To disable the API security completely, set the config parameter <code>para.security.api_security</code> to <code>false</code>.</p>
<p>If you wish to disable all API functions completely, set the config parameter <code>para.api_enabled</code> to <code>false</code>.</p>
<blockquote>
<p>For more information see the <a href="http://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html">AWS documentation</a>
for REST authentication.</p>
</blockquote>
<h3 id="json-web-tokens---client-access-based-on-permissions">JSON Web Tokens - client access based on permissions</h3>
<blockquote>
<p><strong>Important:</strong> Access to the root app can be enabled or disabled for API clients.</p>
</blockquote>
<p>To allow clients with access tokens to make API calls to the root app, use this configuration property:</p>
<pre><code>para.clients_can_access_root_app = <span class="hljs-literal">true</span></code></pre><p>This is useful if you only have one app on the server. When hosting multiple apps on Para, this should be set to <code>false</code>.
This does not affect clients that use an <code>accessKey</code> and a <code>secretKey</code>, only those that use access tokens (JWT).</p>
<p>In production, when Para is deployed as a multitenant server (hosting many apps), it is recommended that API clients
are not allowed to access root app through the API with <code>para.clients_can_access_root_app = false</code>.</p>
<p>Para apps can create new users and grant them specific permissions by implementing social login (identity federation).
First a user authenticates with their social identity provider such as Facebook, then comes back to Para with the
<code>access_token</code> and is issued a new JSON Web Token that allows him to access the REST API.</p>
<p>JWT tokens are a new standard for authentication which is similar to cookies but is more secure, compact and stateless.
An encoded token looks like this:</p>
<pre><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG
<span class="hljs-number">4</span>gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</code></pre><p>When decoded the token looks like this:</p>
<pre><code class="language-js"><span class="hljs-comment">// HEADER:</span>
{
  <span class="hljs-string">"alg"</span>: <span class="hljs-string">"HS256"</span>,
  <span class="hljs-string">"typ"</span>: <span class="hljs-string">"JWT"</span>
}
<span class="hljs-comment">// PAYLOAD:</span>
{
  <span class="hljs-string">"sub"</span>: <span class="hljs-string">"587408205806571520"</span>,
  <span class="hljs-string">"appid"</span>: <span class="hljs-string">"app:para"</span>,
    <span class="hljs-string">"refresh"</span>: <span class="hljs-number">1450137214490</span>,
  <span class="hljs-string">"nbf"</span>: <span class="hljs-number">1450133614</span>,
    <span class="hljs-string">"exp"</span>: <span class="hljs-number">1450738414</span>,
    <span class="hljs-string">"iat"</span>: <span class="hljs-number">1450133614</span>
}</code></pre>
<p>To authenticate with users with social login use the Para client:</p>
<pre><code class="language-java">paraClient.signIn(String provider, String providerToken);</code></pre>
<p>Supported providers are <code>facebook</code>, <code>google</code>, <code>twitter</code>, <code>github</code>, <code>linkedin</code>, <code>microsoft</code>, <code>slack</code>, <code>password</code>,
<code>oauth2</code>, <code>oauth2second</code>, <code>oauth2third</code>, <code>ldap</code>, <code>passwordless</code>.</p>
<p>You will have to add the API credentials for each of these in your <code>application.conf</code> configuration file:</p>
<pre><code class="language-bash"><span class="hljs-comment"># facebook</span>
para.fb_app_id = <span class="hljs-string">"..."</span>
para.fb_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># google</span>
para.gp_app_id = <span class="hljs-string">"..."</span>
para.gp_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># linkedin</span>
para.in_app_id = <span class="hljs-string">"..."</span>
para.in_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># twitter</span>
para.tw_app_id = <span class="hljs-string">"..."</span>
para.tw_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># github</span>
para.gh_app_id = <span class="hljs-string">"..."</span>
para.gh_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># microsoft</span>
para.ms_app_id = <span class="hljs-string">"..."</span>
para.ms_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># slack</span>
para.sl_app_id = <span class="hljs-string">"..."</span>
para.sl_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># generic oauth2</span>
para.oa2_app_id = <span class="hljs-string">"..."</span>
para.oa2_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># second generic oauth2</span>
para.oa2second_app_id = <span class="hljs-string">"..."</span>
para.oa2second_secret = <span class="hljs-string">"..."</span>
<span class="hljs-comment"># third generic oauth2</span>
para.oa2third_app_id = <span class="hljs-string">"..."</span>
para.oa2third_secret = <span class="hljs-string">"..."</span></code></pre>
<p>For example calling <code>paraClient.signIn(&quot;facebook&quot;, &quot;facebook_access_token&quot;)</code> should return a new <code>User</code> object and would
store the JWT token in memory. To get an access token from Facebook, use their JavaScript SDK.</p>
<p>After you call <code>paraClient.signIn()</code> and the request succeeds, the client caches the access token and <strong>all subsequent
requests</strong> to the API will include that token until <code>paraClient.signOut()</code> is called. This is different from the normal
operation using access and secret keys. Usually, tokens are used to authenticate users, unless they are “super” tokens,
which can authenticate apps (see below).</p>
<p>To get or set access tokens use:</p>
<pre><code class="language-java">paraClient.getAccessToken();
paraClient.setAccessToken(String token);</code></pre>
<p>To sign out and clear the JWT access token use:</p>
<pre><code class="language-java">paraClient.signOut();</code></pre>
<p>Tokens can also be revoked by calling <code>paraClient.revokeAllTokens()</code> but this only works for authenticated users.
The Para client takes care of refreshing the JWT tokens every hour and by default all tokens are valid for a week.</p>
<h3 id="creating-super-tokens">Creating “super” tokens</h3>
<p>Since v1.18.3 we’ve added the support for “super” JSON web tokens. These are just like normal tokens for users, but
instead of authenticating users we can authenticate apps with them. The give clients full access to the API, bypassing
permissions. You don’t need to connect to a social identity provider like Facebook or Twitter - you simply generate
the tokens on the client-side. Your code will need both the access key and secret key for this purpose.</p>
<p>For example, lets assume we have some JavaScript app running in the browser and we need admin access to our Para app.
We could use the <a href="https://github.com/Erudika/para-client-js">JavaScript client for Para</a> but putting the secret key
inside client-side code on the browser is <em>not a smart move</em>. So we pull in a library for generating JWT, like
<a href="https://github.com/kjur/jsrsasign">jsrsasign</a> and we create the token ourselves. Here’s a snippet:</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJWT</span>(<span class="hljs-params">appid, secret</span>) </span>{
    <span class="hljs-keyword">var</span> now = <span class="hljs-built_in">Math</span>.round(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime() / <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">var</span> sClaim = <span class="hljs-built_in">JSON</span>.stringify({
        <span class="hljs-attr">exp</span>: now + (<span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>), <span class="hljs-comment">// expires at</span>
        iat: now, <span class="hljs-comment">// issued at</span>
        nbf: now, <span class="hljs-comment">// not valid before</span>
        appid: appid <span class="hljs-comment">// app id must be present</span>
    });
    <span class="hljs-keyword">var</span> sHeader = <span class="hljs-built_in">JSON</span>.stringify({<span class="hljs-string">'alg'</span>: <span class="hljs-string">'HS256'</span>, <span class="hljs-string">'typ'</span>: <span class="hljs-string">'JWT'</span>});
    <span class="hljs-keyword">return</span> KJUR.jws.JWS.sign(<span class="hljs-literal">null</span>, sHeader, sClaim, secret);
}</code></pre>
<p>Your JS app could ask the user for the access keys, create a JWT and then discard the keys and use the newly generated
“super” token. Once we have this we can attach it to every request as a header:</p>
<pre><code class="language-js">Authorization: Bearer eyJhbGciOiVCJ9.eyJzdWIiOi0._MKAH6SGiKSoqgwmqUaxuMyE</code></pre>
<p>When calling the Para API from JavaScript in the browser, make sure you are running a web server and not as <code>file:///</code>
or your browser might not allow CORS requests. Also check that CORS is enabled in Para with <code>para.cors_enabled = true</code>.</p>
<h3 id="calling-the-api-from-postman">Calling the API from Postman</h3>
<p>You can access the protected API from Postman since it has support for the AWS Signature v4 algorithm, used in Para.
Open up Postman and in the “Authorization” tab choose “AWS Signature”:</p>
<div class="text-center">
<img class="img-responsive" src="data:image/png;base64,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">
</div>

<table class="table table-striped">
    <tbody>
        <tr><td>

<p> <strong>Access Key</strong>
        </td><td></p>
<p> Your Para access key, e.g. <code>app:myapp</code>.</td></tr>
        <tr><td><strong>Secret Key</strong></td><td></p>
<p> Your Para secret key.</td></tr>
        <tr><td><strong>Region</strong></td><td></p>
<p> Not used. It should always be <code>us-east-1</code>.</td></tr>
        <tr><td><strong>Service Name</strong></td><td></p>
<p> This should always be <code>para</code>.</td></tr>
    </tbody></p>
</table>

<p><strong>Make sure you don’t have extra headers</strong> in your requests because Postman is known to calculate invalid signatures for such requests.</p>

				</section>
			</article>
			<a id="034-api-intro" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class=" img-rounded">
					<h2>API methods</h2>
				<section class="body  img-rounded">
					<blockquote>
<p>All API methods below <strong>require authentication</strong> by default, unless it’s written otherwise.</p>
</blockquote>
<h3 id="limiting-which-fields-are-returned-by-the-api">Limiting which fields are returned by the API</h3>
<p>Field limiting is supported on all requests by using the query parameter <code>select=xxx,yyy</code>.
This parameter takes a comma separated list of fields to include. For example:</p>
<pre><code>GET /myobjects?select=id,name,my_field1,my_field2</code></pre><p><br><br>
<a href="#" class="radius collapse-expand-link">&blacktriangledown;&blacktriangle; collapse/expand all</a></p>

				</section>
			</article>
			<a id="034-api-jwt-signin" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="POST img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-info">POST</span>
								<span class="gray">
									/jwt_auth 
								</span>
							</code>
							<span class="hidden-xs">Sign in (JWT, public)</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Takes an identity provider access token and fetches the user data from that provider. A new <code>User</code> object is created
if that user doesn’t exist and is then returned. Access tokens are returned upon successful authentication
using one of the SDKs from Facebook, Google, Twitter, etc.</p>
<p><strong>Note:</strong> Twitter uses OAuth 1 and gives you a token and a token secret so you must concatenate them first -
<code>{oauth_token}:{oauth_token_secret}</code>, and then use that as the provider access token.
Also if you use the <code>password</code> provider, the <code>token</code> parameter must be in the format <code>{email}:{full_name}:{password}</code> or
<code>{email}::{password}</code> (must be <code>::</code> if name is empty). For LDAP the token looks similar - <code>{uid}:{password}</code> (single <code>:</code>).</p>
<p>Also keep in mind that when a new user signs in with a password and unverified email, through <code>/jwt_auth</code>,
Para will create the user but will return an error <code>400</code> indicating that the user is not active and cannot be authenticated.
Once the email is verified and the user is set to <code>active: true</code>, subsequent sign in attempts will be successful.</p>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - a JSON object containing <code>appid</code>, <code>provider</code> and <code>token</code> properties (required).</li>
</ul>
<p>Request body example for authenticating with email and password:</p>
<pre><code>{
    <span class="hljs-string">"appid"</span>: <span class="hljs-string">"app:myapp"</span>,
    <span class="hljs-string">"provider"</span>: <span class="hljs-string">"password"</span>,
    <span class="hljs-string">"token"</span>: <span class="hljs-string">"user@domain.com::password123"</span>
}</code></pre><p>Request body example for Facebook:</p>
<pre><code>{
    <span class="hljs-string">"appid"</span>: <span class="hljs-string">"app:myapp"</span>,
    <span class="hljs-string">"provider"</span>: <span class="hljs-string">"facebook"</span>,
    <span class="hljs-string">"token"</span>: <span class="hljs-string">"eyJhbGciOiJIUzI1NiJ9.eWIiO..."</span>
}</code></pre><p>The <code>appid</code> is the id of your own app that you’re trying to sign in to. The <code>provider</code> field a string and can be
one of the following values:</p>
<ul>
<li><code>facebook</code> - sign in with Facebook account,</li>
<li><code>google</code> - sign in with Google account,</li>
<li><code>twitter</code> - sign in with Twitter account,</li>
<li><code>github</code> - sign in with GitHub account,</li>
<li><code>linkedin</code> - sign in with LinkedIn account,</li>
<li><code>microsoft</code> - sign in with Microsoft account,</li>
<li><code>slack</code> - sign in with Slack account,</li>
<li><code>amazon</code> - sign in with Amazon account,</li>
<li><code>password</code> - sign in with email and password.</li>
<li><code>oauth2</code> - sign in with generic OAuth 2.</li>
<li><code>oauth2second</code> - sign in with “second” generic OAuth 2 provider.</li>
<li><code>oauth2third</code> - sign in with “third” generic OAuth 2 provider.</li>
<li><code>ldap</code> - sign in with LDAP.</li>
<li><code>passwordless</code> - sign in with an external authentication provider (custom SSO)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object containing JWT properties and a <code>User</code> object. The returned JWT properties are:</p>
<ul>
<li><p><code>access_token</code> - the JWT access token.</p>
</li>
<li><p><code>expires</code> - a Java timestamp of when the token will expire.</p>
</li>
<li><p><code>refresh</code> - a Java timestamp indicating when API clients should refresh their tokens,
usually 1 hour after token has been issued.</p>
</li>
<li><p><strong>status codes</strong> - <code>200</code>, <code>400</code></p>
</li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"jwt"</span>: {
        <span class="hljs-string">"access_token"</span>: <span class="hljs-string">"eyJhbGciOiJIUzI1NiJ9.eyJ..."</span>,
        <span class="hljs-string">"expires"</span>: <span class="hljs-number">1450137214490</span>,
        <span class="hljs-string">"refresh"</span>: <span class="hljs-number">1450137216490</span>
    },
    <span class="hljs-string">"user"</span>: {
        <span class="hljs-string">"id"</span>:<span class="hljs-string">"user1"</span>,
        <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1399721289987</span>,
        <span class="hljs-string">"type"</span>:<span class="hljs-string">"user"</span>,
        <span class="hljs-string">"appid"</span>:<span class="hljs-string">"myapp"</span>,
        ...
    }
}</code></pre>

				</section>
			</article>
			<a id="035-api-jwt-refresh" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/jwt_auth 
								</span>
							</code>
							<span class="hidden-xs">Token refresh (JWT)</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Refreshes the access token if and only if the provided token is valid and not expired.
Tokens should be refreshed periodically in order to keep users logged in for longer periods of time.</p>
<h3 id="request">Request</h3>
<p>Request should include an <code>Authorization: Bearer {JWT_TOKEN}</code> header containing a valid access token. (required)
As an alternative you could provide the token as query parameter instead of a header.</p>
<h3 id="response">Response</h3>
<p>Returns a JSON object containing a <strong>new</strong> JWT token and the same <code>User</code> object. The returned JWT properties are:</p>
<ul>
<li><p><code>access_token</code> - the JWT access token.</p>
</li>
<li><p><code>expires</code> - a Java timestamp of when the token will expire.</p>
</li>
<li><p><code>refresh</code> - a Java timestamp indicating when API clients should refresh their tokens.</p>
</li>
<li><p><strong>status codes</strong> - <code>200</code>, <code>400</code></p>
</li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"jwt"</span>: {
        <span class="hljs-string">"access_token"</span>: <span class="hljs-string">"eyJhbGciOiJIUzI1NiJ9.eyJ..."</span>,
        <span class="hljs-string">"expires"</span>: <span class="hljs-number">1450137214490</span>,
        <span class="hljs-string">"refresh"</span>: <span class="hljs-number">1450137216490</span>
    },
    <span class="hljs-string">"user"</span>: {
        <span class="hljs-string">"id"</span>:<span class="hljs-string">"user1"</span>,
        <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1399721289987</span>,
        <span class="hljs-string">"type"</span>:<span class="hljs-string">"user"</span>,
        <span class="hljs-string">"appid"</span>:<span class="hljs-string">"myapp"</span>,
        ...
    }
}</code></pre>

				</section>
			</article>
			<a id="035-api-jwt-revoke" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="DELETE img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-danger">DELETE</span>
								<span class="gray">
									/jwt_auth 
								</span>
							</code>
							<span class="hidden-xs">Revoke all tokens (JWT)</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Revokes all user tokens for the user that is currently logged in. This would be equivalent to “logout everywhere”.
<strong>Note:</strong> Generating a new API secret on the server will also invalidate all client tokens.</p>
<h3 id="request">Request</h3>
<p>Request should include an <code>Authorization: Bearer {JWT_TOKEN}</code> header containing a valid access token. (required)
As an alternative you could provide the token as query parameter instead of a header.</p>
<h3 id="response">Response</h3>
<p>Returns a JSON object containing a <strong>new</strong> JWT token and the same <code>User</code> object. The returned JWT properties are:</p>
<ul>
<li><p><code>access_token</code> - the JWT access token.</p>
</li>
<li><p><code>expires</code> - a Java timestamp of when the token will expire.</p>
</li>
<li><p><code>refresh</code> - a Java timestamp indicating when API clients should refresh their tokens.</p>
</li>
<li><p><strong>status codes</strong> - <code>200</code>, <code>400</code></p>
</li>
</ul>
<p>Example response (response is empty):</p>
<pre><code><span class="hljs-number">200</span> OK</code></pre>
				</section>
			</article>
			<a id="036-api-create" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="POST img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-info">POST</span>
								<span class="gray">
									/v1/{type} 
								</span>
							</code>
							<span class="hidden-xs">Create object</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Creates a new object of type <code>{type}</code>. You can also create objects with custom types and fields (since v1.4.0).</p>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - the JSON object to create</li>
<li><code>{type}</code> - the plural form of the object’s type, e.g. “users”</li>
</ul>
<p><strong>Example request body:</strong></p>
<pre><code class="language-js">{
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
    <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
    <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag1"</span>
}</code></pre>
<p>Notice how the <code>type</code> field is in singular form and the <code>plural</code> field is the plural form of the type’s name.
These are required for mapping types to URLs.</p>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>201</code>, <code>400</code></li>
</ul>
<p>Example response for a <code>Tag</code>:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:tag1"</span>,
    <span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1399721289987</span>,
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
    <span class="hljs-string">"appid"</span>:<span class="hljs-string">"para"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"tag tag:tag1"</span>,
    <span class="hljs-string">"votes"</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
    <span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/tag1"</span>,
    <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag1"</span>,
    <span class="hljs-string">"count"</span>:<span class="hljs-number">0</span>
}</code></pre>

				</section>
			</article>
			<a id="037-api-read" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/{type}/{id} 
								</span>
							</code>
							<span class="hidden-xs">Read object</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Returns an object of type <code>{type}</code>.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - the plural form of the object’s type, e.g. “users”</li>
<li><code>{id}</code> - the <code>id</code></li>
</ul>
<p><strong>Note:</strong> If <code>{id}</code> is omitted then the response will be a list of all objects of the specified type.</p>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>404</code></li>
</ul>
<p>Example response for a <code>Tag</code>:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:tag1"</span>,
    <span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1399721289987</span>,
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
    <span class="hljs-string">"appid"</span>:<span class="hljs-string">"para"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"tag tag:tag1"</span>,
    <span class="hljs-string">"votes"</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
    <span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/tag1"</span>,
    <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag1"</span>,
    <span class="hljs-string">"count"</span>:<span class="hljs-number">0</span>
}</code></pre>

				</section>
			</article>
			<a id="038-api-overwrite" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="PUT img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-warning">PUT</span>
								<span class="gray">
									/v1/{type}/{id} 
								</span>
							</code>
							<span class="hidden-xs">Overwrite object</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Overwrites an object of type <code>{type}</code>. If the object with this <code>{id}</code> doesn’t exist then a new one will be created.</p>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - the JSON data to merge with the stored object</li>
<li><code>{type}</code> - the plural form of the object’s type, e.g. “users”</li>
<li><code>{id}</code> - the <code>id</code></li>
</ul>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code>, <code>404</code>, <code>500</code></li>
</ul>
<p>Example response for a <code>Tag</code> with updated <code>count</code>:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:tag1"</span>,
    <span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1399721289987</span>,
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
    <span class="hljs-string">"appid"</span>:<span class="hljs-string">"para"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"tag tag:tag1"</span>,
    <span class="hljs-string">"votes"</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
    <span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/tag1"</span>,
    <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag1"</span>,
    <span class="hljs-string">"count"</span>:<span class="hljs-number">55</span>
}</code></pre>

				</section>
			</article>
			<a id="038-api-update" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="PATCH img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-default">PATCH</span>
								<span class="gray">
									/v1/{type}/{id} 
								</span>
							</code>
							<span class="hidden-xs">Update object</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Updates an existing object of type <code>{type}</code>. Partial objects are supported, meaning that only a few fields could be
updated, without having to send the whole object.</p>
<p><strong>Vote requests</strong>: these are a special kind of <code>PATCH</code> request, which has a body like <code>{&quot;_voteup&quot;: &quot;user123&quot;}</code> or
<code>{&quot;_votedown&quot;: &quot;user123&quot;}</code>. Here <code>user123</code> is the <code>id</code> of the voter. A successful vote request either increments or
decrements the <code>votes</code> field by 1.</p>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - the JSON object to merge with the stored object <strong>OR</strong> a vote request body like <code>{&quot;_voteup&quot;: &quot;user123&quot;}</code></li>
<li><code>{type}</code> - the plural form of the object’s type, e.g. “users”</li>
<li><code>{id}</code> - the <code>id</code></li>
</ul>
<p>A vote request body can look like this:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"_voteup"</span>: <span class="hljs-string">"obj123"</span>,
    <span class="hljs-string">"_vote_locked_after"</span>: <span class="hljs-number">60</span>,
    <span class="hljs-string">"_vote_expires_after"</span>: <span class="hljs-number">2592000</span>
}</code></pre>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code>, <code>404</code>, <code>412</code>, <code>500</code>, vote requests return <code>true</code> or <code>false</code></li>
</ul>
<p>If optimistic locking is enabled and the <code>DAO</code> implementation supports it, failed updates will result in
<code>412 Precondition Failed</code>.</p>
<p>Example response for a <code>Tag</code> with updated <code>count</code>:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:tag1"</span>,
    <span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1399721289987</span>,
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
    <span class="hljs-string">"appid"</span>:<span class="hljs-string">"para"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"tag tag:tag1"</span>,
    <span class="hljs-string">"votes"</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
    <span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/tag1"</span>,
    <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag1"</span>,
    <span class="hljs-string">"count"</span>:<span class="hljs-number">55</span>
}</code></pre>

				</section>
			</article>
			<a id="039-api-delete" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="DELETE img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-danger">DELETE</span>
								<span class="gray">
									/v1/{type}/{id} 
								</span>
							</code>
							<span class="hidden-xs">Delete object</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Deletes an existing object of type <code>{type}</code>. Returns code <code>200</code> regardless of the success of the request.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - the plural form of the object’s type, e.g. “users”</li>
<li><code>{id}</code> - the <code>id</code></li>
</ul>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code></li>
</ul>
<p>No content.</p>

				</section>
			</article>
			<a id="040-api-batch-create" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="POST img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-info">POST</span>
								<span class="gray">
									/v1/_batch 
								</span>
							</code>
							<span class="hidden-xs">Batch create</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Creates multiple objects with a single request. <code>PUT</code> requests to this resource are equivalent to <code>POST</code>.</p>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - a JSON array of objects to create (required).</li>
</ul>
<p><strong>Maximum request size is 1 megabyte.</strong></p>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code></li>
</ul>
<p>Example response for creating 3 objects (returns a list of the created objects):</p>
<pre><code class="language-js">[ { <span class="hljs-string">"id"</span>:<span class="hljs-string">"id1"</span>, ... }, { <span class="hljs-string">"id"</span>:<span class="hljs-string">"id2"</span>, ... }, { <span class="hljs-string">"id"</span>:<span class="hljs-string">"id3"</span>, ... } ]</code></pre>

				</section>
			</article>
			<a id="041-api-batch-read" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_batch 
								</span>
							</code>
							<span class="hidden-xs">Batch read</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Returns a list of objects given their <code>id</code> fields.</p>
<h3 id="parameters">Parameters</h3>
<ul>
<li><code>ids</code> - a list of <code>id</code>s of existing objects (required).</li>
</ul>
<p><strong>Example:</strong> <code>GET /v1/_batch?ids=id1&amp;ids=id2&amp;ids=id3</code></p>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code> (if no <code>ids</code> are specified)</li>
</ul>
<p>Example response for reading 3 objects:</p>
<pre><code class="language-js">[ { <span class="hljs-string">"id"</span>:<span class="hljs-string">"id1"</span>, ... }, { <span class="hljs-string">"id"</span>:<span class="hljs-string">"id2"</span>, ... }, { <span class="hljs-string">"id"</span>:<span class="hljs-string">"id3"</span>, ... } ]</code></pre>

				</section>
			</article>
			<a id="042-api-batch-update" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="PATCH img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-default">PATCH</span>
								<span class="gray">
									/v1/_batch 
								</span>
							</code>
							<span class="hidden-xs">Batch update</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Updates multiple objects with a single request. Partial objects are supported.
<strong>Note:</strong> These objects will not be validated as this would require us to read them first and validate them one by one.</p>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - a JSON array of objects to update (required). The fields <code>id</code> and <code>type</code> are required for each object.</li>
</ul>
<p><strong>Maximum request size is 1 megabyte.</strong></p>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code>, <code>412</code></li>
</ul>
<p>If optimistic locking is enabled and the <code>DAO</code> implementation supports it, failed updates will be ignored and
omitted from the response array. Error <code>412</code> is returned only if all object failed to update due to version locking.</p>
<p>Example response for updating 3 objects (returns a list of the updated objects):</p>
<pre><code class="language-js">[ {
    <span class="hljs-string">"id"</span>:<span class="hljs-string">"id1"</span>,
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"type1"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"newName1"</span>, ...
  }, {
    <span class="hljs-string">"id"</span>:<span class="hljs-string">"id2"</span>,
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"type2"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"newName2"</span>, ...
  }, {
     <span class="hljs-string">"id"</span>:<span class="hljs-string">"id3"</span>,
     <span class="hljs-string">"type"</span>:<span class="hljs-string">"type3"</span>,
     <span class="hljs-string">"name"</span>:<span class="hljs-string">"newName3"</span>, ...
} ]</code></pre>

				</section>
			</article>
			<a id="043-api-batch-delete" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="DELETE img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-danger">DELETE</span>
								<span class="gray">
									/v1/_batch 
								</span>
							</code>
							<span class="hidden-xs">Batch delete</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Deletes multiple objects with a single request.</p>
<h3 id="parameters">Parameters</h3>
<ul>
<li><code>ids</code> - a list of <code>id</code>s of existing objects (required).</li>
</ul>
<p>Example: <code>DELETE /v1/_batch?ids=1&amp;ids=2</code> will delete the two objects with an <code>id</code> of <code>1</code> and <code>2</code>, respectively.</p>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code> (if request maximum number of <code>ids</code> is over the limit of ~30)</li>
</ul>
<p>No content.</p>

				</section>
			</article>
			<a id="044-api-basicsearch" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/{type} 
								</span>
							</code>
							<span class="hidden-xs">Basic search</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Searches for objects of type <code>{type}</code>.</p>
<p><strong>Note:</strong> Requests to this path and <code>/v1/{type}/search/{querytype}</code> are handled identically. Also, note that
custom fields must be used in search queries as <code>properties.myfield</code>.</p>
<p>For detailed syntax of the query string see
<a href="https://lucene.apache.org/core/2_9_4/queryparsersyntax.html">Lucene’s query string syntax</a>.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - the plural form of the object’s type, e.g. “users”</li>
<li><code>{querytype}</code> - the type of query to execute (optional, see <a href="#015-search">Search</a>)</li>
</ul>
<h4 id="parameters">Parameters</h4>
<ul>
<li><code>q</code> - a search query string (optional). Defaults to <code>*</code> (all).</li>
<li><code>desc</code> - sort order - <code>true</code> for descending (optional). Default is <code>true</code>.</li>
<li><code>sort</code> - the field to sort by (optional).</li>
<li><code>limit</code> - the number of results to return. Default is <code>30</code>.</li>
<li><code>page</code> - starting page for results (optional). (note: page size is 30 items by default)</li>
</ul>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code> if query string syntax is invalid</li>
</ul>
<p>Example response for querying all tags <code>GET /v1/tags?q=*&amp;limit=3</code>:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"page"</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">"totalHits"</span>:<span class="hljs-number">3</span>,
    <span class="hljs-string">"items"</span>:[{
        <span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:tag3"</span>,
        <span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1400077389250</span>,
        <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
        <span class="hljs-string">"appid"</span>:<span class="hljs-string">"para"</span>,
        <span class="hljs-string">"name"</span>:<span class="hljs-string">"tag tag:tag3"</span>,
        <span class="hljs-string">"votes"</span>:<span class="hljs-number">0</span>,
        <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
        <span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/tag3"</span>,
        <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag3"</span>,
        <span class="hljs-string">"count"</span>:<span class="hljs-number">0</span>
    }, {
        <span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:tag1"</span>,
        <span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1400077383588</span>,
        <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
        <span class="hljs-string">"appid"</span>:<span class="hljs-string">"para"</span>,
        <span class="hljs-string">"name"</span>:<span class="hljs-string">"tag tag:tag1"</span>,
        <span class="hljs-string">"votes"</span>:<span class="hljs-number">0</span>,
        <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
        <span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/tag1"</span>,
        <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag1"</span>,
        <span class="hljs-string">"count"</span>:<span class="hljs-number">0</span>
    }, {
        <span class="hljs-string">"id"</span>:<span class="hljs-string">"tag:tag2"</span>,
        <span class="hljs-string">"timestamp"</span>:<span class="hljs-number">1400077386726</span>,
        <span class="hljs-string">"type"</span>:<span class="hljs-string">"tag"</span>,
        <span class="hljs-string">"appid"</span>:<span class="hljs-string">"para"</span>,
        <span class="hljs-string">"name"</span>:<span class="hljs-string">"tag tag:tag2"</span>,
        <span class="hljs-string">"votes"</span>:<span class="hljs-number">0</span>,
        <span class="hljs-string">"plural"</span>:<span class="hljs-string">"tags"</span>,
        <span class="hljs-string">"objectURI"</span>:<span class="hljs-string">"/tags/tag2"</span>,
        <span class="hljs-string">"tag"</span>:<span class="hljs-string">"tag2"</span>,
        <span class="hljs-string">"count"</span>:<span class="hljs-number">0</span>
    }]
}</code></pre>

				</section>
			</article>
			<a id="045-api-search" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/search/{querytype} 
								</span>
							</code>
							<span class="hidden-xs">Advanced search</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Executes a search query.</p>
<p><strong>Note:</strong> custom fields must be used in search queries as <code>properties.myfield</code>.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{querytype}</code> - the type of query to execute (optional), use one of types below:</li>
</ul>
<p>The <code>querytype</code> parameter switches between the different query types. If this parameter is missing
then the generic <code>findQuery()</code> method will be executed by default.</p>
<h4 id="id-query"><code>id</code> query</h4>
<p>Finds the object with the given <code>id</code> from the index or <code>null</code>.
This executes the method <code>findById()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>id</code> - the id to search for</li>
</ul>
<hr>

<h4 id="ids-query"><code>ids</code> query</h4>
<p>Finds all objects matchings the given ids.
This executes the method <code>findByIds()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>ids</code> - a list of ids to search for</li>
</ul>
<hr>

<h4 id="nested-query"><code>nested</code> query</h4>
<p>Searches through objects in a nested field named <code>nstd</code>. Used internally for joining search queries on linked objects.
This executes the method <code>findNestedQuery()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>q</code> - a search query string</li>
<li><code>field</code> - the name of the field to target within a nested object</li>
<li><code>type</code> - a type to search for</li>
</ul>
<hr>

<h4 id="nearby-query"><code>nearby</code> query</h4>
<p>Location-based search query. Relies on <code>Address</code> objects for coordinates.
This executes the method <code>findNearby()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>latlng</code> - latitude and longitude of the center of the search perimeter</li>
<li><code>radius</code> - radius of the search perimeter in kilometers.</li>
</ul>
<hr>

<h4 id="prefix-query"><code>prefix</code> query</h4>
<p>Searches for objects containing a field (property) that starts with the given prefix.
This executes the method <code>findPrefix()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>field</code> - the field to search on</li>
<li><code>prefix</code> - the prefix</li>
</ul>
<hr>

<h4 id="similar-query"><code>similar</code> query</h4>
<p>“More like this” search query.
This executes the method <code>findSimilar()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>fields</code> - a list of fields, for example:<pre><code>GET /v1/search/similar?fields=field1&amp;fields=field2</code></pre></li>
<li><code>filterid</code> - an id filter; excludes a particular object from the results</li>
<li><code>like</code> - the source text to use for comparison. If the <code>like</code> parameter starts with <code>id:</code>, e.g. <code>id:123</code>,
then the source of the “like” text is read from the object with id <code>123</code> and extracted from fields <code>fields</code>
on the server. This operation can be done on the server in situations where the supplied text in <code>like</code> is
too long and causes “URI too long” exceptions.</li>
</ul>
<hr>

<h4 id="tagged-query"><code>tagged</code> query</h4>
<p>Search for objects tagged with a set of tags.
This executes the method <code>findTagged()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>tags</code> - a list of tags, for example:<pre><code>GET /v1/search/tagged?tags=tag1&amp;tags=tag2</code></pre></li>
</ul>
<hr>

<h4 id="in-query"><code>in</code> query</h4>
<p>Searches for objects containing any of the terms in the given list (matched exactly).
This executes the method <code>findTermInList()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>field</code> - the field to search on</li>
<li><code>terms</code> - a list of terms (values)</li>
</ul>
<hr>

<h4 id="terms-query"><code>terms</code> query</h4>
<p>Searches for objects containing all of the specified terms (matched exactly)
This executes the method <code>findTerms()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>matchall</code> - if <code>true</code> executes an <code>AND</code> query, otherwise an <code>OR</code> query</li>
<li><code>terms</code> - a list of <code>field:term</code> pairs, for example:<pre><code>GET /v1/search/terms?terms=field1:term1&amp;terms=field2:term2</code></pre></li>
<li><code>count</code> - if present will return 0 objects but the “totalHits” field will contain the total number of results found
that match the given terms.</li>
</ul>
<p>Since v1.9, the terms query supports ranges. For example if you have a pair like <code>&#39;age&#39;:25</code> and you want to
find objects with higher <code>age</code> value, you can modify the key to have a relational operator <code>&#39;age &gt;&#39;:25</code>. You can
use the <code>&gt;, &lt;, &gt;=, &lt;=</code> operators by appending them to the keys of the terms map.</p>
<hr>

<h4 id="wildcard-query"><code>wildcard</code> query</h4>
<p>A wildcard query like “example*“.
This executes the method <code>findWildcard()</code> with these <strong>parameters</strong>:</p>
<ul>
<li><code>field</code> - the field to search on</li>
</ul>
<hr>

<h4 id="count-query"><code>count</code> query</h4>
<p>Returns the total number of results that would be returned by a query.
This executes the method <code>getCount()</code> and has <strong>no additional parameters</strong>.</p>
<h3 id="request-parameters">Request parameters</h3>
<ul>
<li><code>q</code> - a search query string (optional). Defaults to <code>*</code> (all).</li>
<li><code>type</code> - the type of objects to search for (optional).</li>
<li><code>desc</code> - sort order - <code>true</code> for descending (optional). Default is <code>true</code>.</li>
<li><code>sort</code> - the field to sort by (optional).</li>
<li><code>page</code> - starting page for results (optional). (note: page size is 30 items by default)</li>
<li><code>limit</code> - the number of results to return</li>
</ul>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code> if query string syntax is invalid</li>
</ul>
<p>Example response for counting all objects (just three for this example):</p>
<pre><code class="language-js">{
    <span class="hljs-string">"page"</span>:<span class="hljs-number">0</span>,
    <span class="hljs-string">"totalHits"</span>:<span class="hljs-number">3</span>,
    <span class="hljs-string">"items"</span>:[
    ]
}</code></pre>

				</section>
			</article>
			<a id="046-api-links-get" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/{type}/{id}/links/{type2}/{id2} 
								</span>
							</code>
							<span class="hidden-xs">Find linked objects</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Call this method to search for objects that linked to the object with the given <code>{id}</code>.</p>
<p><strong>Note:</strong> When called with the parameter <code>?childrenonly</code>, the request is treated as a “one-to-many” search request.
It will do asearch for child objects directly connected to their parent by the <code>parentid</code> field. Without <code>?childrenonly</code>
the request is treated as a “many-to-many” search request.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - the type of the first object, e.g. “users” (required)</li>
<li><code>{id}</code> - the <code>id</code> of the first object (required)</li>
<li><code>{type2}</code> - the <code>type</code> of the second object (required)</li>
<li><code>{id2}</code> - the <code>id</code> field of the second object (optional)</li>
</ul>
<h4 id="parameters">Parameters</h4>
<ul>
<li><code>childrenonly</code> - if set and <code>{id2}</code> is not set, will return a list of child objects
(these are the objects with <code>parentid</code> equal to <code>{id}</code> above). Also if <code>field</code> and <code>term</code> parameters are set, the results
are filtered by the specified field and the value of that field (term).</li>
<li><code>count</code> - if set will return no items an the total number of linked objects. If <code>childrenonly</code> is set, this will
return only the count of child objects.</li>
<li><code>q</code> - query string, if set, all linked/child objects will be searched and those that match the query are returned.
To search only child objects that are linked by <code>parentid</code> use <code>q</code> in combination with <code>childrenonly</code>, otherwise
the <code>Linker</code> objects will be searched. Since v1.19 <code>Linker</code> objects contain a copy of the two objects they connect. This
enables Para to execute more complex “joined” search queries. The effectiveness of these is determined by how up-to-date
the data inside a <code>Linker</code> is.</li>
</ul>
<h3 id="response">Response</h3>
<ul>
<li><p>If the <code>{id2}</code> parameter is specified, the response will be a boolean text value - <code>true</code> if objects are linked.</p>
</li>
<li><p>If the <code>{id2}</code> parameter is missing, the response will be a list of linked objects. (pagination parameters are applicable)</p>
</li>
<li><p><code>childrenonly</code> - if set, the response will be a list of child objects (pagination parameters are applicable)</p>
</li>
<li><p><strong>status codes</strong> - <code>200</code>, <code>400</code> (if <code>type</code> parameter is missing)</p>
</li>
</ul>
<p>Example response if <code>id2</code> is missing:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"page"</span>:X,
    <span class="hljs-string">"totalHits"</span>:Y,
    <span class="hljs-string">"items"</span>:[
        ...
    ]
}</code></pre>
<p>Response if <code>id2</code> is specified: <code>true</code> or <code>false</code></p>

				</section>
			</article>
			<a id="047-api-links-link" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="POST img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-info">POST</span>
								<span class="gray">
									/v1/{type}/{id}/links/{id2} 
								</span>
							</code>
							<span class="hidden-xs">Link objects</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>This will link the object with <code>{id}</code> to another object with the specified id in the <code>id</code> parameter.
The created link represents a many-to-many relationship (see also <a href="#019-one-to-many">one-to-many relationships</a>).</p>
<p>Don’t use this method for “one-to-many” links. Creating one-to-many links is trivial - just set the <code>parentid</code>
of an object (child) to be equal to the <code>id</code> field of another object (parent).</p>
<p><code>PUT</code> requests to this resource are equivalent to <code>POST</code>.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - the type of the first object, e.g. “users”</li>
<li><code>{id}</code> - the <code>id</code> of the first object</li>
<li><code>{id2}</code> - the <code>id</code> field of the second object (required)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns the <code>id</code> of the <code>Linker</code> object - the <code>linkId</code> - which contains the types and ids of the two objects.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code> (if any of the parameters are missing)</li>
</ul>
<p>Example response:</p>
<pre><code class="language-js"><span class="hljs-string">"type1:id1:type2:id2"</span></code></pre>

				</section>
			</article>
			<a id="048-api-links-unlink" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="DELETE img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-danger">DELETE</span>
								<span class="gray">
									/v1/{type}/{id}/links/{type2}/{id2} 
								</span>
							</code>
							<span class="hidden-xs">Unlink objects</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Unlinks or deletes the objects linked to the object with the specified <code>{id}</code>.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - the type of the first object, e.g. “users”</li>
<li><code>{id}</code> - the <code>id</code> of the first object</li>
<li><code>{type2}</code> - the <code>type</code> of the second object (not required, if this and <code>{id2}</code> are missing, it will unlink everything)</li>
<li><code>{id2}</code> - the <code>id</code> field of the second object (optional)</li>
</ul>
<h4 id="parameters">Parameters</h4>
<ul>
<li><code>all</code> - setting this will <strong>delete all</strong> linked objects (be careful!)</li>
<li><code>childrenonly</code> - if set, all child objects will be deleted rather than unlinked (be careful!)</li>
</ul>
<p><strong>Note:</strong></p>
<ul>
<li>If both <code>{type2}</code> and <code>{id2}</code> are not set, <strong>all linked objects will be unlinked from this one</strong>.</li>
<li>If <code>id</code> is set - the two objects are unlinked.</li>
<li>If <code>all</code> and <code>id</code> are not set, but <code>childrenonly</code> is set then the child objects with type <code>type</code> are <strong>deleted</strong>!
(these are the objects with <code>parentid</code> equal to <code>{id}</code> above)</li>
</ul>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>
<p>No content.</p>

				</section>
			</article>
			<a id="049-api-constraints-add" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="PUT img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-warning">PUT</span>
								<span class="gray">
									/v1/_constraints/{type}/{field}/{cname} 
								</span>
							</code>
							<span class="hidden-xs">Add constraint</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Adds a new validation constraint to the list of constraints for the given field and type.</p>
<h3 id="request">Request</h3>
<ul>
<li><p><strong>body</strong> - the JSON payload of the constraint (see the table below)</p>
</li>
<li><p><code>{type}</code> - the object type to which the constraint applies (required)</p>
</li>
<li><p><code>{field}</code> - the name of the field to which the constraint applies (required)</p>
</li>
<li><p><code>{cname}</code> - the constraint name (required), one of the following:</p>
<table class="table table-striped">
  <thead>
      <tr>
          <th>Name</th>
          <th>Payload (example)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>

</li>
</ul>
<p><code>required</code></td><td>none</td>
        </tr>
        <tr>
            <td></p>
<p><code>email</code></td><td>none</td>
        </tr>
        <tr>
            <td></p>
<p><code>false</code></td><td>none</td>
        </tr>
        <tr>
            <td></p>
<p><code>true</code></td><td>none</td>
        </tr>
        <tr>
            <td></p>
<p><code>past</code></td><td>none</td>
        </tr>
        <tr>
            <td></p>
<p><code>present</code></td><td>none</td>
        </tr>
        <tr>
            <td></p>
<p><code>url</code></td><td>none</td>
        </tr>
        <tr>
            <td></p>
<p><code>min</code></td><td></p>
<p><code>{ &quot;value&quot;: 123 }</code></td>
        </tr>
        <tr>
            <td></p>
<p><code>max</code></td><td></p>
<p><code>{ &quot;value&quot;: 123 }</code></td>
        </tr>
        <tr>
            <td></p>
<p><code>size</code></td><td></p>
<p><code>{ &quot;min&quot;: 123, &quot;max&quot;: 456 }</code></td>
        </tr>
        <tr>
            <td></p>
<p><code>digits</code></td><td></p>
<p><code>{ &quot;integer&quot;: 4, &quot;fraction&quot;: 2 }</code></td>
        </tr>
        <tr>
            <td></p>
<p><code>pattern</code></td><td></p>
<p><code>{ &quot;value&quot;: &quot;^[a-zA-Z]+$&quot; }</code></td>
        </tr>
    </tbody></p>
</table>

<h3 id="response">Response</h3>
<p>Returns a JSON object containing the validation constraints for the given type.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"User"</span> : {
        <span class="hljs-string">"identifier"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            }
        },
        <span class="hljs-string">"groups"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            }
        },
        <span class="hljs-string">"email"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            },
            <span class="hljs-string">"email"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.email"</span>
            }
        }
    },
    ...
}</code></pre>

				</section>
			</article>
			<a id="049-api-constraints-get" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_constraints/{type} 
								</span>
							</code>
							<span class="hidden-xs">List constraints</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Returns an object containing all validation constraints for all defined types in the current app.
This information can be used to power client-side validation libraries like
<a href="https://github.com/netceteragroup/valdr">valdr</a>.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - when supplied, returns only the constraints for this type (optional). If this parameter is omitted, all
constraints for all types will be returned.</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object with all validation constraints for a given type. The <code>message</code> field is a
key that can be used to retrieve a localized message.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"User"</span> : {
        <span class="hljs-string">"identifier"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            }
        },
        <span class="hljs-string">"groups"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            }
        },
        <span class="hljs-string">"email"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            },
            <span class="hljs-string">"email"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.email"</span>
            }
        }
    },
    ...
}</code></pre>

				</section>
			</article>
			<a id="049-api-constraints-rem" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="DELETE img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-danger">DELETE</span>
								<span class="gray">
									/v1/_constraints/{type}/{field}/{cname} 
								</span>
							</code>
							<span class="hidden-xs">Remove constraint</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Removes a validation constraint from the list of constraints for the given field and type.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{type}</code> - the object type to which the constraint applies (required)</li>
<li><code>{field}</code> - the name of the field to which the constraint applies (required)</li>
<li><code>{cname}</code> - the constraint name (required, see the table above)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object containing the validation constraints for the given type.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"User"</span> : {
        <span class="hljs-string">"identifier"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            }
        },
        <span class="hljs-string">"groups"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            }
        },
        <span class="hljs-string">"email"</span> : {
            <span class="hljs-string">"required"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.required"</span>
            },
            <span class="hljs-string">"email"</span> : {
                <span class="hljs-string">"message"</span> : <span class="hljs-string">"messages.email"</span>
            }
        }
    },
    ...
}</code></pre>

				</section>
			</article>
			<a id="049-api-health" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_health 
								</span>
							</code>
							<span class="hidden-xs">Health check (public)</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p><strong>This resource is publicly accessible without authentication.</strong></p>
<p>Displays the health status of the server. Status is updated about once every minute.</p>
<h3 id="request">Request</h3>
<p><strong>No parameters</strong>.</p>
<h3 id="response">Response</h3>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>500</code></li>
</ul>
<p>Example responses:</p>
<pre><code>{
  <span class="hljs-string">"message"</span> : <span class="hljs-string">"healthy"</span>
}</code></pre><pre><code>{
    <span class="hljs-string">"code"</span>: <span class="hljs-number">500</span>,
  <span class="hljs-string">"message"</span> : <span class="hljs-string">"unhealthy"</span>
}</code></pre>
				</section>
			</article>
			<a id="049-api-id" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_id/{id} 
								</span>
							</code>
							<span class="hidden-xs">Read by id</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Returns the object for the given <code>{id}</code>.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{id}</code> - the <code>id</code></li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>404</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"id"</span> : <span class="hljs-string">"417283630780387328"</span>,
  <span class="hljs-string">"timestamp"</span> : <span class="hljs-number">1409572755025</span>,
  <span class="hljs-string">"type"</span> : <span class="hljs-string">"user"</span>,
    <span class="hljs-string">"name"</span> : <span class="hljs-string">"Gordon Freeman"</span>
    ...
}</code></pre>

				</section>
			</article>
			<a id="049-api-me" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_me 
								</span>
							</code>
							<span class="hidden-xs">Me object</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Returns the currently authenticated <code>User</code> or <code>App</code> object. If the request is unauthenticated 401 error is returned.</p>
<h3 id="request">Request</h3>
<p><strong>No parameters</strong>.</p>
<h3 id="response">Response</h3>
<p>Returns the JSON object for the authenticated <code>User</code> or <code>App</code>.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>401</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"id"</span> : <span class="hljs-string">"417283630780387328"</span>,
  <span class="hljs-string">"timestamp"</span> : <span class="hljs-number">1409572755025</span>,
  <span class="hljs-string">"type"</span> : <span class="hljs-string">"user"</span>,
    <span class="hljs-string">"name"</span> : <span class="hljs-string">"Gordon Freeman"</span>
    ...
}</code></pre>

				</section>
			</article>
			<a id="049-api-types-list" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_types 
								</span>
							</code>
							<span class="hidden-xs">List types</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Returns a list of all known types for this application, including core types and user-defined types.
User-defined types are custom types which can be defined through the REST API and allow the users to call
the standard CRUD methods on them as if they were defined as regular Para objects.
See <a href="#010-userdefined">User-defined classes</a> for more details.</p>
<h3 id="request">Request</h3>
<p><strong>No parameters</strong>.</p>
<h3 id="response">Response</h3>
<p>Returns a list of all types that are defined for this application.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>
<p>Example response for querying all types:</p>
<pre><code class="language-js">[
    <span class="hljs-string">"addresses"</span>:<span class="hljs-string">"address"</span>,
    <span class="hljs-string">"apps"</span>:<span class="hljs-string">"app"</span>,
    <span class="hljs-string">"sysprops"</span>:<span class="hljs-string">"sysprop"</span>,
    <span class="hljs-string">"tags"</span>:<span class="hljs-string">"tag"</span>,
    <span class="hljs-string">"translations"</span>:<span class="hljs-string">"translation"</span>,
    <span class="hljs-string">"users"</span>:<span class="hljs-string">"user"</span>,
    <span class="hljs-string">"votes"</span>:<span class="hljs-string">"vote"</span>
]</code></pre>

				</section>
			</article>
			<a id="050-api-permissions-check" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_permissions/{subjectid}/{resource}/{method} 
								</span>
							</code>
							<span class="hidden-xs">Check permission</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>This checks if a subject is allowed to execute a specific type of request on a resource.</p>
<p>There are several methods and flags which control which requests can go through. These are:</p>
<ul>
<li><code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code> - use these to allow a certain method explicitly</li>
<li><code>?</code> - use this to enable public (unauthenticated) access to a resource</li>
<li><code>-</code> - use this to deny all access to a resource</li>
<li><code>*</code> - wildcard, allow all request to go through</li>
<li><code>OWN</code> - allow subject to only access objects they created</li>
</ul>
<h3 id="request">Request</h3>
<ul>
<li><code>{subjectid}</code> - the subject/user <code>id</code> to grant permissions to, or wildcard <code>*</code>. (required)</li>
<li><code>{resource}</code> - the resource path or object type (URL encoded), or wildcard <code>*</code>. (required)</li>
<li><code>{method}</code> - an HTTP method or flag, listed above. (required)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a boolean plain text response - <code>true</code> or <code>false</code>.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code>, <code>404</code></li>
</ul>
<p>Example response:</p>
<pre><code><span class="hljs-literal">true</span></code></pre>
				</section>
			</article>
			<a id="050-api-permissions-get" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_permissions/{subjectid} 
								</span>
							</code>
							<span class="hidden-xs">List permissions</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Returns a permissions objects containing all permissions. If <code>{subjectid}</code> is provided, the returned object contains
only the permissions for that subject.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{subjectid}</code> - the subject/user <code>id</code> (optional)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object containing the resource permissions for the given user.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code>, <code>404</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
  <span class="hljs-string">"*"</span>: {
        <span class="hljs-string">"*"</span>: [<span class="hljs-string">"GET"</span>]
    },
  <span class="hljs-string">"user1"</span>: [],
  <span class="hljs-string">"user2"</span>: {
        <span class="hljs-string">"posts"</span>: [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>]
    },
  <span class="hljs-string">"user3"</span>: {
    <span class="hljs-string">"*"</span>: [<span class="hljs-string">"*"</span>]
  }
}</code></pre>

				</section>
			</article>
			<a id="050-api-permissions-grant" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="PUT img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-warning">PUT</span>
								<span class="gray">
									/v1/_permissions/{subjectid}/{resource} 
								</span>
							</code>
							<span class="hidden-xs">Grant permissions</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Grants a set of permissions (allowed HTTP methods) to a subject for a given resource.</p>
<p>There are several methods and flags which control which requests can go through. These are:</p>
<ul>
<li><code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code> - use these to allow a certain method explicitly</li>
<li><code>?</code> - use this to enable public (unauthenticated) access to a resource</li>
<li><code>-</code> - use this to deny all access to a resource</li>
<li><code>*</code> - wildcard, allow all request to go through</li>
<li><code>OWN</code> - allow subject to only access objects they created</li>
</ul>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - a JSON array of permitted HTTP methods/flags, listed above (required).</li>
<li><code>{subjectid}</code> - the subject/user <code>id</code> to grant permissions to, or wildcard <code>*</code> (required)</li>
<li><code>{resource}</code> - the resource path or object type (URL encoded), or wildcard <code>*</code>. For example
<code>posts</code> corresponds to <code>/v1/posts</code>, <code>posts%2F123</code> corresponds to <code>/v1/posts/123</code> (required)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object containing the resource permissions for the given user.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code>, <code>404</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
  <span class="hljs-string">"user2"</span>: {
        <span class="hljs-string">"posts"</span>: [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>]
    }
}</code></pre>

				</section>
			</article>
			<a id="050-api-permissions-revoke" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="DELETE img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-danger">DELETE</span>
								<span class="gray">
									/v1/_permissions/{subjectid}/{resource} 
								</span>
							</code>
							<span class="hidden-xs">Revoke permissions</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Revokes all permissions for a given subject and resource. If <code>{resource}</code> is not specified, revokes every permission
that has been granted to that subject.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{subjectid}</code> - the subject/user <code>id</code> to grant permissions to (required)</li>
<li><code>{resource}</code> - the resource path or object type (URL encoded). If omitted,</li>
<li><em>all permissions*</em> for that subject will be revoked. (optional)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object containing the resource permissions for the given user.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code>, <code>404</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
  <span class="hljs-string">"user1"</span>: [],
}</code></pre>

				</section>
			</article>
			<a id="050-api-settings-get" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_settings 
								</span>
							</code>
							<span class="hidden-xs">List custom settings</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Lists all custom app settings. These can be user-defined key-value pairs and are stored withing the app object.</p>
<h3 id="request">Request</h3>
<p><strong>No parameters</strong>.</p>
<h3 id="response">Response</h3>
<p>Returns an map of keys and values.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"fb_app_id"</span>: <span class="hljs-string">"123U3VTNifLPqnZ1W2"</span>,
    <span class="hljs-string">"fb_secret"</span>: <span class="hljs-string">"YXBwOnBhcmE11234151667"</span>,
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"/dashboard"</span>,
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"/signin?error"</span>
}</code></pre>

				</section>
			</article>
			<a id="050-api-settings-put" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="PUT img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-warning">PUT</span>
								<span class="gray">
									/v1/_settings/{key} 
								</span>
							</code>
							<span class="hidden-xs">Add custom setting</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Adds a new custom app setting or overwrites an existing one. To overwrite all app settings, make a <code>PUT</code> request without
providing the <code>key</code> parameter, like so:</p>
<pre><code>PUT /v1/_settings
{
    <span class="hljs-string">"fb_app_id"</span>: <span class="hljs-string">"123U3VTNifLPqnZ1W2"</span>,
    <span class="hljs-string">"fb_secret"</span>: <span class="hljs-string">"YXBwOnBhcmE11234151667"</span>,
    <span class="hljs-string">"signin_success"</span>: <span class="hljs-string">"/dashboard"</span>,
    <span class="hljs-string">"signin_failure"</span>: <span class="hljs-string">"/signin?error"</span>
}</code></pre><p>This will replace all app-specific settings with the JSON object in that request.</p>
<h3 id="request">Request</h3>
<ul>
<li><strong>body</strong> - a JSON object with a single value field: <code>{ &quot;value&quot;: &quot;setting_value&quot; }</code>,
or an object containing all app-specific configuration properties.</li>
<li><code>{key}</code> - a key from the settings map <strong>(optional)</strong>. If <code>{key}</code> is missing, all app settings will be overwritten by
the JSON in the body of the request.</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns an empty response.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>

				</section>
			</article>
			<a id="050-api-settings-rem" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="DELETE img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-danger">DELETE</span>
								<span class="gray">
									/v1/_settings/{key} 
								</span>
							</code>
							<span class="hidden-xs">Remove custom setting</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Removes a custom app setting by the given key.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{key}</code> - a key from the settings map</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns <code>200 OK</code>.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>

				</section>
			</article>
			<a id="050-api-setup-child" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_setup/{app_name} 
								</span>
							</code>
							<span class="hidden-xs">Child app setup</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p><strong>Requires authentication with the root app access/secret keys</strong></p>
<p>Creates a new child app and generates the first pair of API keys. You are responsible for creating the database table
and index for the new app. Equivalent to calling <code>Para.newApp()</code> from your Java code.</p>
<h3 id="request">Request</h3>
<ul>
<li><code>{app_name}</code> - the name of the child app</li>
</ul>
<h4 id="parameters">Parameters</h4>
<ul>
<li><code>sharedTable</code> - Set it to <code>false</code> if the app should have its own table</li>
<li><code>sharedIndex</code> - Set it to <code>false</code> if the app should have its own index</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns the access and secret keys for this application which will be used for request signing.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>403</code></li>
</ul>

				</section>
			</article>
			<a id="050-api-setup" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/_setup 
								</span>
							</code>
							<span class="hidden-xs">Initial setup (public)</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p><strong>This resource is publicly accessible without authentication.</strong></p>
<p>Creates the root application and generates the first pair of API keys. Calling this method will enable you to access
the REST API.</p>
<h3 id="request">Request</h3>
<p><strong>No parameters</strong>.</p>
<h3 id="response">Response</h3>
<p>Returns the access and secret keys for this application which will be used for request signing.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"secretKey"</span>: <span class="hljs-string">"U3VTNifLPqnZ1W2S3pVVuKG4HOVbimMocdDMl8T69BB001AXGZtwZw=="</span>,
    <span class="hljs-string">"accessKey"</span>: <span class="hljs-string">"YXBwOnBhcmE="</span>,
    <span class="hljs-string">"info"</span>: <span class="hljs-string">"Save the secret key! It is showed only once!"</span>
}</code></pre>
<p>Subsequent calls to this method return:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>
    <span class="hljs-string">"message"</span>: <span class="hljs-string">"All set!"</span>
}</code></pre>

				</section>
			</article>
			<a id="051-api-newkeys" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="POST img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-info">POST</span>
								<span class="gray">
									/v1/_newkeys 
								</span>
							</code>
							<span class="hidden-xs">Reset API keys</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>This will reset your API secret key by generating a new one.
Make sure you save it and use it for signing future requests.</p>
<h3 id="request">Request</h3>
<p><strong>No parameters</strong>.</p>
<h3 id="response">Response</h3>
<p>Returns the access and secret keys for this application which will be used for request signing.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code></li>
</ul>
<p>Example response:</p>
<pre><code class="language-js">{
    <span class="hljs-string">"secretKey"</span>: <span class="hljs-string">"U3VTNifLPqnZ1W2S3pVVuKG4HOVbimMocdDMl8T69BB001AXGZtwZw=="</span>,
    <span class="hljs-string">"accessKey"</span>: <span class="hljs-string">"YXBwOnBhcmE="</span>,
    <span class="hljs-string">"info"</span>: <span class="hljs-string">"Save the secret key! It is showed only once!"</span>
}</code></pre>

				</section>
			</article>
			<a id="052-api-utils" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="GET img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-success">GET</span>
								<span class="gray">
									/v1/utils/{method} 
								</span>
							</code>
							<span class="hidden-xs">Utilities</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Utility functions which can be accessed via the REST API include (listed by the method’s short name):</p>
<ul>
<li><code>newid</code> - calls <code>Utils.getNewId()</code>. You <em>must</em> set <code>para.worker_id</code> to be different on each node.</li>
<li><code>timestamp</code> - calls <code>Utils.timestamp()</code></li>
<li><code>formatdate</code> - calls <code>Utils.formatDate(format, locale)</code>, additional parameters: <code>format</code> (e.g. “dd MM yyyy”), <code>locale</code>.</li>
<li><code>formatmessage</code> - calls <code>Utils.formatMessage(msg, params)</code>, additional parameters: <code>message</code> (the message to format)</li>
<li><code>nospaces</code> - calls <code>Utils.noSpaces(str, repl)</code>, additional parameters: <code>string</code> (the string to process)</li>
<li><code>nosymbols</code> - calls <code>Utils.stripAndTrim(str)</code>, additional parameters: <code>string</code> (the string to process)</li>
<li><code>md2html</code> - calls <code>Utils.markdownToHtml(md)</code>, additional parameters: <code>md</code> (a Markdown string)</li>
<li><code>timeago</code> - calls <code>HumanTime.approximately(delta)</code>, additional parameters: <code>delta</code> (time difference between now and then)</li>
</ul>
<p><strong>Example:</strong> <code>GET /v1/utils?method=nospaces&amp;string=some string with spaces</code></p>
<h3 id="request">Request</h3>
<ul>
<li><code>{method}</code> - the name of the method to call (one of the above)</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>400</code> (if no method is specified)</li>
</ul>
<p>Example response - returns the result without envelope:</p>
<pre><code class="language-js"><span class="hljs-string">"result"</span></code></pre>

				</section>
			</article>
			<a id="053-api-reindex" href="#" class="doc-anchor"><i class="glyphicon glyphicon-link"></i></a>
			<article class="POST img-rounded">
					<a href="#">
						<h2 class="img-rounded">
							<code>
									<span class="img-rounded label-info">POST</span>
								<span class="gray">
									/v1/_reindex 
								</span>
							</code>
							<span class="hidden-xs">Rebuild index</span>
						</h2>
					</a>
				<section class="body api-body img-rounded">
					<p>Rebuilds the entire search index by reading all objects from the data store and reindexing them to a new index.
This operation is synchronous - the request will return a response once reindexing is complete.</p>
<p><strong>Example:</strong> <code>POST /v1/_reindex</code></p>
<h3 id="request-parameters">Request parameters</h3>
<ul>
<li><code>destinationIndex</code> - the name of the new index (optional).</li>
<li><em>Use only if you have created the new destination index manually*</em>.</li>
</ul>
<h3 id="response">Response</h3>
<p>Returns a JSON object.</p>
<ul>
<li><strong>status codes</strong> - <code>200</code>, <code>404</code></li>
</ul>
<p>Example response - returns the result without envelope:</p>
<pre><code class="language-js">{
   <span class="hljs-string">"reindexed"</span>: <span class="hljs-number">154</span>,
   <span class="hljs-string">"tookMillis"</span>: <span class="hljs-number">365</span>
}</code></pre>

				</section>
			</article>
	</section>

	<!-- Footer Content -->
	<div class="container footer-section">
		<p>&nbsp;</p>
		<footer>
			<div class="row">
				<div class="col-lg-12 text-center">
					<p>Generated on <i>13 July 2020</i> by <a href="https://github.com/albogdano/bootup">bootUP</a>
						and hosted on <a href="https://github.com/erudika/paraio.org">GitHub</a></p>
					<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Some rights reserved</a> <tt>(cc)</tt>
						2020
						<a href="https://erudika.com">Erudika</a></p>
				</div>
			</div>
		</footer>
	</div>
</div>



		</div>

		<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/lang-basic.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
		<script src="/js/main.js?v=5"></script>

		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-51972923-1', 'paraio.org');
			ga('set', 'anonymizeIp', true);
			ga('send', 'pageview');
		</script>
	</body>
</html>
